---
title: "The number of close people: friends, neighbours or co-workers"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->

```{r setup, include=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_ania.r")
```

<!-- ########################################################## --> 



# Description of DataSchema variable

The description of harmonised variable is the following:

* Short name: `clspeop`
* Variable label: `The number of close people: friends, neighbours or co-workers`
* Domain: `Social environment`
* Value type: `continuous`
* Categories:

**Code** | **Category Label**
-------- | ------------------
0        | Lack of close people


* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing



<!-- ########################################################## --> 

# Data process

## aksst

### Wave 1 

#### Study-specific variable description

The study-specific variable elected to be harmonised is:

* Name: `	tome191`
* Label: `Q22:FRIENDS -1-MALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	tome192`
* Label: `Q22:FRIENDS -2-MALE WHO HELPS YOU- BUSINESS`

* Name: `	tome193`
* Label: `Q22:FRIENDS -3-MALE WHO HELPS YOU- HOBBY`

* Name: `	tome194`
* Label: `Q22:FRIENDS -4-MALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	tome195`
* Label: `Q22:FRIENDS -5-MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	tome196`
* Label: `Q22:FRIENDS -6-MALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	tome197`
* Label: `Q22:FRIENDS -7-MALE WHO HELPS YOU- OTHER CHANCE`

* Name: `	tome220`
* Label: `Q22:FRIENDS -1-FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	tome221`
* Label: `Q22:FRIENDS -2-FEMALE WHO HELPS YOU- BUSINESS`

* Name: `	tome222`
* Label: `Q22:FRIENDS -3-FEMALE WHO HELPS YOU- HOBBY`

* Name: `	tome223`
* Label: `Q22:FRIENDS -4-FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	tome224`
* Label: `Q22:FRIENDS -5-FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	tome225`
* Label: `Q22:FRIENDS -6-FEMALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	tome226`
* Label: `Q22:FRIENDS -7-FEMALE WHO HELPS YOU- OTHER CHANCE`



* Name: `	tome184`
* Label: `Q22:FRIENDS -1-MALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	tome185`
* Label: `Q22:FRIENDS -2-MALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	tome186`
* Label: `Q22:FRIENDS -3-MALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	tome187`
* Label: `Q22:FRIENDS -4-MALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	tome188`
* Label: `Q22:FRIENDS -5-MALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	tome189`
* Label: `Q22:FRIENDS -6-MALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	tome190`
* Label: `Q22:FRIENDS -7-MALE, DISCUSS PROBLEMS- OTHER CHANCE`

* Name: `	tome213`
* Label: `Q22:FRIENDS -1-FEMALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	tome214`
* Label: `Q22:FRIENDS -2-FEMALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	tome215`
* Label: `Q22:FRIENDS -3-FEMALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	tome216`
* Label: `Q22:FRIENDS -4-FEMALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	tome217`
* Label: `Q22:FRIENDS -5-FEMALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	tome218`
* Label: `Q22:FRIENDS -6-FEMALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	tome219`
* Label: `Q22:FRIENDS -7-FEMALE, DISCUSS PROBLEMS- OTHER CHANCE`



* Description: 
```{r assign1 5cities}
opal.assign.table.tibble(o, 'JSTAR_aksst_w1_clspeop','JSTAR_datasets_restricted.jstar_2007_5cities', 
                        variables=list('tome184','tome185','tome186','tome187','tome188','tome189',
                                       'tome190','tome191','tome192','tome193','tome194','tome195',
                                       'tome196','tome197',
                                       'tome213','tome214','tome215','tome216','tome217','tome218',
                                       'tome219','tome220','tome221','tome222','tome223','tome224',
                                       'tome225','tome226'), missings = TRUE)
```

```{r local1 5cities}
JSTAR_aksst_w1_clspeop <- opal.execute(o,'JSTAR_aksst_w1_clspeop')

vari <- JSTAR_aksst_w1_clspeop$tome191
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome191, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome191))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome192
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome192, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome192))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome193
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome193, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome193))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome194
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome194, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome194))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome195
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome195, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome195))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome196
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome196, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome196))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome197
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome197, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome197))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome220
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome220, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome220))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome221
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome221, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome221))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome222
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome222, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome222))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome223
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome223, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome223))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome224
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome224, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome224))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome225
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome225, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome225))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome226
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome226, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome226))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")


vari <- JSTAR_aksst_w1_clspeop$tome184
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome184, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome184))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome185
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome185, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome185))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- BUSINESS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome186
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome186, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome186))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- HOBBY") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome187
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome187, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome187))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome188
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome188, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome188))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome189
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome189, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome189))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome190
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome190, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome190))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- OTHER CHANCE") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome213
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome213, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome213))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome214
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome214, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome214))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- BUSINESS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome215
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome215, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome215))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- HOBBY") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome216
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome216, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome216))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome217
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome217, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome217))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome218
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome218, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome218))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_aksst_w1_clspeop$tome219
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_aksst_w1_clspeop$tome219, missing_values = NA)
ggplot(JSTAR_aksst_w1_clspeop, aes(x=factor(tome219))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- OTHER CHANCE") + ylab("Frequency")

```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `take the SUM OF max of every pair: (tome184, tome191), (tome185, tome192), …, (tome190, tome197) `
  `and ADD this sum to the SUM OF max of every pair: (tome213, tome220), (tome214, tome221), …, (tome219, tome226)`
* `NA into 999`

 **R script:**

```{r harmo1 5cities, echo=TRUE}
JSTAR_aksst_ds_w1 <- tibble(id=JSTAR_aksst_w1_clspeop$id)

JSTAR_aksst_w1_clspeop$tome184 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome184), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome185 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome185), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome186 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome186), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome187 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome187), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome188 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome188), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome189 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome189), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome190 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome190), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome191 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome191), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome192 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome192), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome193 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome193), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome194 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome194), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome195 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome195), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome196 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome196), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome197 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome197), "NA='-999'")

JSTAR_aksst_w1_clspeop$tome213 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome213), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome214 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome214), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome215 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome215), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome216 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome216), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome217 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome217), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome218 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome218), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome219 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome219), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome220 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome220), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome221 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome221), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome222 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome222), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome223 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome223), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome224 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome224), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome225 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome225), "NA='-999'")
JSTAR_aksst_w1_clspeop$tome226 <- car::recode(as.vector(JSTAR_aksst_w1_clspeop$tome226), "NA='-999'")


JSTAR_aksst_ds_w1$clspeop <- c(NA)  
for(i in 1:dim(JSTAR_aksst_w1_clspeop)[1]){
  
  JSTAR_aksst_ds_w1$clspeop[i] = 0
  
  if( max(JSTAR_aksst_w1_clspeop$tome184[i], JSTAR_aksst_w1_clspeop$tome191[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome184[i], JSTAR_aksst_w1_clspeop$tome191[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome185[i], JSTAR_aksst_w1_clspeop$tome192[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome185[i], JSTAR_aksst_w1_clspeop$tome192[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome186[i], JSTAR_aksst_w1_clspeop$tome193[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome186[i], JSTAR_aksst_w1_clspeop$tome193[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome187[i], JSTAR_aksst_w1_clspeop$tome194[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome187[i], JSTAR_aksst_w1_clspeop$tome194[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome188[i], JSTAR_aksst_w1_clspeop$tome195[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome188[i], JSTAR_aksst_w1_clspeop$tome195[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome189[i], JSTAR_aksst_w1_clspeop$tome196[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome189[i], JSTAR_aksst_w1_clspeop$tome196[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome190[i], JSTAR_aksst_w1_clspeop$tome197[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome190[i], JSTAR_aksst_w1_clspeop$tome197[i]) }
  
  if( max(JSTAR_aksst_w1_clspeop$tome213[i], JSTAR_aksst_w1_clspeop$tome220[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome213[i], JSTAR_aksst_w1_clspeop$tome220[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome214[i], JSTAR_aksst_w1_clspeop$tome221[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome214[i], JSTAR_aksst_w1_clspeop$tome221[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome215[i], JSTAR_aksst_w1_clspeop$tome222[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome215[i], JSTAR_aksst_w1_clspeop$tome222[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome216[i], JSTAR_aksst_w1_clspeop$tome223[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome216[i], JSTAR_aksst_w1_clspeop$tome223[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome217[i], JSTAR_aksst_w1_clspeop$tome224[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome217[i], JSTAR_aksst_w1_clspeop$tome224[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome218[i], JSTAR_aksst_w1_clspeop$tome225[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome218[i], JSTAR_aksst_w1_clspeop$tome225[i]) }
  if( max(JSTAR_aksst_w1_clspeop$tome219[i], JSTAR_aksst_w1_clspeop$tome226[i]) >= 0){
    JSTAR_aksst_ds_w1$clspeop[i] = JSTAR_aksst_ds_w1$clspeop[i] + max(JSTAR_aksst_w1_clspeop$tome219[i], JSTAR_aksst_w1_clspeop$tome226[i]) }
  
  if( JSTAR_aksst_w1_clspeop$tome184[i] <0 & JSTAR_aksst_w1_clspeop$tome185[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome186[i] <0 & JSTAR_aksst_w1_clspeop$tome187[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome188[i] <0 & JSTAR_aksst_w1_clspeop$tome189[i] <0 &
   JSTAR_aksst_w1_clspeop$tome190[i] <0 & JSTAR_aksst_w1_clspeop$tome191[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome192[i] <0 & JSTAR_aksst_w1_clspeop$tome193[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome194[i] <0 & JSTAR_aksst_w1_clspeop$tome195[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome196[i] <0 & JSTAR_aksst_w1_clspeop$tome197[i] <0 &
   JSTAR_aksst_w1_clspeop$tome213[i] <0 & JSTAR_aksst_w1_clspeop$tome214[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome215[i] <0 & JSTAR_aksst_w1_clspeop$tome216[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome217[i] <0 & JSTAR_aksst_w1_clspeop$tome218[i] <0 &
   JSTAR_aksst_w1_clspeop$tome219[i] <0 & JSTAR_aksst_w1_clspeop$tome220[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome221[i] <0 & JSTAR_aksst_w1_clspeop$tome222[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome223[i] <0 & JSTAR_aksst_w1_clspeop$tome224[i] <0 & 
   JSTAR_aksst_w1_clspeop$tome225[i] <0 & JSTAR_aksst_w1_clspeop$tome226[i] <0 )
  { JSTAR_aksst_ds_w1$clspeop[i] = NA}
}

JSTAR_aksst_ds_w1$clspeop <- car::recode(as.vector(JSTAR_aksst_ds_w1$clspeop), "NA='999'")
JSTAR_aksst_ds_w1$clspeop <- labelled(JSTAR_aksst_ds_w1$clspeop, labels = c("lack of close people"=0, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994,"Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript1 5cities}
vari <- JSTAR_aksst_ds_w1$clspeop
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
#Categorical_summary(var = JSTAR_aksst_ds_w1$clspeop, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(JSTAR_aksst_ds_w1, aes(x=factor(clspeop))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("The number of close people: friends, neighbours or co-workers") + ylab("Frequency")
```

#### Validation
```{r crosstabulation1 5cities}

```

 
 


### Wave 2
Not found.

### Wave 3
Not found.

## tn

### Wave 1 

#### Study-specific variable description

The study-specific variable elected to be harmonised is:

* Name: `	tome191`
* Label: `Q22:FRIENDS -1-MALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	tome192`
* Label: `Q22:FRIENDS -2-MALE WHO HELPS YOU- BUSINESS`

* Name: `	tome193`
* Label: `Q22:FRIENDS -3-MALE WHO HELPS YOU- HOBBY`

* Name: `	tome194`
* Label: `Q22:FRIENDS -4-MALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	tome195`
* Label: `Q22:FRIENDS -5-MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	tome196`
* Label: `Q22:FRIENDS -6-MALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	tome197`
* Label: `Q22:FRIENDS -7-MALE WHO HELPS YOU- OTHER CHANCE`

* Name: `	tome220`
* Label: `Q22:FRIENDS -1-FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	tome221`
* Label: `Q22:FRIENDS -2-FEMALE WHO HELPS YOU- BUSINESS`

* Name: `	tome222`
* Label: `Q22:FRIENDS -3-FEMALE WHO HELPS YOU- HOBBY`

* Name: `	tome223`
* Label: `Q22:FRIENDS -4-FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	tome224`
* Label: `Q22:FRIENDS -5-FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	tome225`
* Label: `Q22:FRIENDS -6-FEMALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	tome226`
* Label: `Q22:FRIENDS -7-FEMALE WHO HELPS YOU- OTHER CHANCE`



* Name: `	tome184`
* Label: `Q22:FRIENDS -1-MALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	tome185`
* Label: `Q22:FRIENDS -2-MALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	tome186`
* Label: `Q22:FRIENDS -3-MALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	tome187`
* Label: `Q22:FRIENDS -4-MALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	tome188`
* Label: `Q22:FRIENDS -5-MALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	tome189`
* Label: `Q22:FRIENDS -6-MALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	tome190`
* Label: `Q22:FRIENDS -7-MALE, DISCUSS PROBLEMS- OTHER CHANCE`

* Name: `	tome213`
* Label: `Q22:FRIENDS -1-FEMALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	tome214`
* Label: `Q22:FRIENDS -2-FEMALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	tome215`
* Label: `Q22:FRIENDS -3-FEMALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	tome216`
* Label: `Q22:FRIENDS -4-FEMALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	tome217`
* Label: `Q22:FRIENDS -5-FEMALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	tome218`
* Label: `Q22:FRIENDS -6-FEMALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	tome219`
* Label: `Q22:FRIENDS -7-FEMALE, DISCUSS PROBLEMS- OTHER CHANCE`



* Description: 
```{r assign1 2cities}
opal.assign.table.tibble(o, 'JSTAR_tn_w1_clspeop','JSTAR_datasets_restricted.jstar_2009_2cities', 
                        variables=list('tome184','tome185','tome186','tome187','tome188','tome189',
                                       'tome190','tome191','tome192','tome193','tome194','tome195',
                                       'tome196','tome197',
                                       'tome213','tome214','tome215','tome216','tome217','tome218',
                                       'tome219','tome220','tome221','tome222','tome223','tome224',
                                       'tome225','tome226'), missings = TRUE)
```

```{r local1 2cities}
JSTAR_tn_w1_clspeop <- opal.execute(o,'JSTAR_tn_w1_clspeop')

vari <- JSTAR_tn_w1_clspeop$tome191
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome191, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome191))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome192
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome192, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome192))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome193
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome193, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome193))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome194
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome194, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome194))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome195
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome195, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome195))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome196
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome196, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome196))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome197
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome197, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome197))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome220
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome220, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome220))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome221
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome221, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome221))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome222
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome222, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome222))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome223
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome223, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome223))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome224
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome224, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome224))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome225
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome225, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome225))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome226
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome226, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome226))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")


vari <- JSTAR_tn_w1_clspeop$tome184
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome184, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome184))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome185
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome185, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome185))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- BUSINESS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome186
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome186, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome186))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- HOBBY") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome187
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome187, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome187))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome188
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome188, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome188))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome189
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome189, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome189))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome190
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome190, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome190))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE, DISCUSS PROBLEMS- OTHER CHANCE") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome213
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome213, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome213))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome214
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome214, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome214))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- BUSINESS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome215
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome215, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome215))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- HOBBY") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome216
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome216, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome216))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome217
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome217, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome217))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome218
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome218, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome218))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_tn_w1_clspeop$tome219
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_tn_w1_clspeop$tome219, missing_values = NA)
ggplot(JSTAR_tn_w1_clspeop, aes(x=factor(tome219))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE, DISCUSS PROBLEMS- OTHER CHANCE") + ylab("Frequency")


```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `take the SUM OF max of every pair: (tome184, tome191), (tome185, tome192), …, (tome190, tome197) `
  `and ADD this sum to the SUM OF max of every pair: (tome213, tome220), (tome214, tome221), …, (tome219, tome226)`
* `NA into 999`

 **R script:**

```{r harmo1 2cities, echo=TRUE}
JSTAR_tn_ds_w1 <- tibble(id=JSTAR_tn_w1_clspeop$id)

JSTAR_tn_w1_clspeop$tome184 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome184), "NA='-999'")
JSTAR_tn_w1_clspeop$tome185 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome185), "NA='-999'")
JSTAR_tn_w1_clspeop$tome186 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome186), "NA='-999'")
JSTAR_tn_w1_clspeop$tome187 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome187), "NA='-999'")
JSTAR_tn_w1_clspeop$tome188 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome188), "NA='-999'")
JSTAR_tn_w1_clspeop$tome189 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome189), "NA='-999'")
JSTAR_tn_w1_clspeop$tome190 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome190), "NA='-999'")
JSTAR_tn_w1_clspeop$tome191 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome191), "NA='-999'")
JSTAR_tn_w1_clspeop$tome192 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome192), "NA='-999'")
JSTAR_tn_w1_clspeop$tome193 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome193), "NA='-999'")
JSTAR_tn_w1_clspeop$tome194 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome194), "NA='-999'")
JSTAR_tn_w1_clspeop$tome195 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome195), "NA='-999'")
JSTAR_tn_w1_clspeop$tome196 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome196), "NA='-999'")
JSTAR_tn_w1_clspeop$tome197 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome197), "NA='-999'")

JSTAR_tn_w1_clspeop$tome213 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome213), "NA='-999'")
JSTAR_tn_w1_clspeop$tome214 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome214), "NA='-999'")
JSTAR_tn_w1_clspeop$tome215 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome215), "NA='-999'")
JSTAR_tn_w1_clspeop$tome216 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome216), "NA='-999'")
JSTAR_tn_w1_clspeop$tome217 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome217), "NA='-999'")
JSTAR_tn_w1_clspeop$tome218 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome218), "NA='-999'")
JSTAR_tn_w1_clspeop$tome219 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome219), "NA='-999'")
JSTAR_tn_w1_clspeop$tome220 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome220), "NA='-999'")
JSTAR_tn_w1_clspeop$tome221 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome221), "NA='-999'")
JSTAR_tn_w1_clspeop$tome222 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome222), "NA='-999'")
JSTAR_tn_w1_clspeop$tome223 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome223), "NA='-999'")
JSTAR_tn_w1_clspeop$tome224 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome224), "NA='-999'")
JSTAR_tn_w1_clspeop$tome225 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome225), "NA='-999'")
JSTAR_tn_w1_clspeop$tome226 <- car::recode(as.vector(JSTAR_tn_w1_clspeop$tome226), "NA='-999'")



JSTAR_tn_ds_w1$clspeop <- c(NA)  
for(i in 1:dim(JSTAR_tn_w1_clspeop)[1]){
  
  JSTAR_tn_ds_w1$clspeop[i] = 0
  
  if( max(JSTAR_tn_w1_clspeop$tome184[i], JSTAR_tn_w1_clspeop$tome191[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome184[i], JSTAR_tn_w1_clspeop$tome191[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome185[i], JSTAR_tn_w1_clspeop$tome192[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome185[i], JSTAR_tn_w1_clspeop$tome192[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome186[i], JSTAR_tn_w1_clspeop$tome193[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome186[i], JSTAR_tn_w1_clspeop$tome193[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome187[i], JSTAR_tn_w1_clspeop$tome194[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome187[i], JSTAR_tn_w1_clspeop$tome194[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome188[i], JSTAR_tn_w1_clspeop$tome195[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome188[i], JSTAR_tn_w1_clspeop$tome195[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome189[i], JSTAR_tn_w1_clspeop$tome196[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome189[i], JSTAR_tn_w1_clspeop$tome196[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome190[i], JSTAR_tn_w1_clspeop$tome197[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome190[i], JSTAR_tn_w1_clspeop$tome197[i]) }
  
  if( max(JSTAR_tn_w1_clspeop$tome213[i], JSTAR_tn_w1_clspeop$tome220[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome213[i], JSTAR_tn_w1_clspeop$tome220[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome214[i], JSTAR_tn_w1_clspeop$tome221[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome214[i], JSTAR_tn_w1_clspeop$tome221[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome215[i], JSTAR_tn_w1_clspeop$tome222[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome215[i], JSTAR_tn_w1_clspeop$tome222[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome216[i], JSTAR_tn_w1_clspeop$tome223[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome216[i], JSTAR_tn_w1_clspeop$tome223[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome217[i], JSTAR_tn_w1_clspeop$tome224[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome217[i], JSTAR_tn_w1_clspeop$tome224[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome218[i], JSTAR_tn_w1_clspeop$tome225[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome218[i], JSTAR_tn_w1_clspeop$tome225[i]) }
  if( max(JSTAR_tn_w1_clspeop$tome219[i], JSTAR_tn_w1_clspeop$tome226[i]) >= 0){
    JSTAR_tn_ds_w1$clspeop[i] = JSTAR_tn_ds_w1$clspeop[i] + max(JSTAR_tn_w1_clspeop$tome219[i], JSTAR_tn_w1_clspeop$tome226[i]) }
  
  if( JSTAR_tn_w1_clspeop$tome184[i] <0 & JSTAR_tn_w1_clspeop$tome185[i] <0 & 
   JSTAR_tn_w1_clspeop$tome186[i] <0 & JSTAR_tn_w1_clspeop$tome187[i] <0 & 
   JSTAR_tn_w1_clspeop$tome188[i] <0 & JSTAR_tn_w1_clspeop$tome189[i] <0 &
   JSTAR_tn_w1_clspeop$tome190[i] <0 & JSTAR_tn_w1_clspeop$tome191[i] <0 & 
   JSTAR_tn_w1_clspeop$tome192[i] <0 & JSTAR_tn_w1_clspeop$tome193[i] <0 & 
   JSTAR_tn_w1_clspeop$tome194[i] <0 & JSTAR_tn_w1_clspeop$tome195[i] <0 & 
   JSTAR_tn_w1_clspeop$tome196[i] <0 & JSTAR_tn_w1_clspeop$tome197[i] <0 &
   JSTAR_tn_w1_clspeop$tome213[i] <0 & JSTAR_tn_w1_clspeop$tome214[i] <0 & 
   JSTAR_tn_w1_clspeop$tome215[i] <0 & JSTAR_tn_w1_clspeop$tome216[i] <0 & 
   JSTAR_tn_w1_clspeop$tome217[i] <0 & JSTAR_tn_w1_clspeop$tome218[i] <0 &
   JSTAR_tn_w1_clspeop$tome219[i] <0 & JSTAR_tn_w1_clspeop$tome220[i] <0 & 
   JSTAR_tn_w1_clspeop$tome221[i] <0 & JSTAR_tn_w1_clspeop$tome222[i] <0 & 
   JSTAR_tn_w1_clspeop$tome223[i] <0 & JSTAR_tn_w1_clspeop$tome224[i] <0 & 
   JSTAR_tn_w1_clspeop$tome225[i] <0 & JSTAR_tn_w1_clspeop$tome226[i] <0 )
  { JSTAR_tn_ds_w1$clspeop[i] = NA}
}

JSTAR_tn_ds_w1$clspeop <- car::recode(as.vector(JSTAR_tn_ds_w1$clspeop), "NA='999'")
JSTAR_tn_ds_w1$clspeop <- labelled(JSTAR_tn_ds_w1$clspeop, labels = c("lack of close people"=0, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994,"Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript1 2cities}
vari <- JSTAR_tn_ds_w1$clspeop
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
#Categorical_summary(var = JSTAR_tn_ds_w1$clspeop, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(JSTAR_tn_ds_w1, aes(x=factor(clspeop))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("The number of close people: friends, neighbours or co-workers") + ylab("Frequency")

```

#### Validation
```{r crosstabulation1 2cities}

```

 
 

### Wave 2
Not found.

## cth
### Wave 1 

#### Study-specific variable description

The study-specific variable elected to be harmonised is:

* Name: `	q22_4_1`
* Label: `Q22:FRIENDS -1-MALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	q22_4_2`
* Label: `Q22:FRIENDS -2-MALE WHO HELPS YOU- BUSINESS`

* Name: `	q22_4_3`
* Label: `Q22:FRIENDS -3-MALE WHO HELPS YOU- HOBBY`

* Name: `	q22_4_4`
* Label: `Q22:FRIENDS -4-MALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	q22_4_5`
* Label: `Q22:FRIENDS -5-MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	q22_4_6`
* Label: `Q22:FRIENDS -6-MALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	q22_4_7`
* Label: `Q22:FRIENDS -7-MALE WHO HELPS YOU- OTHER CHANCE`

* Name: `	q22_8_1`
* Label: `Q22:FRIENDS -1-FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS`

* Name: `	q22_8_2`
* Label: `Q22:FRIENDS -2-FEMALE WHO HELPS YOU- BUSINESS`

* Name: `	q22_8_3`
* Label: `Q22:FRIENDS -3-FEMALE WHO HELPS YOU- HOBBY`

* Name: `	q22_8_4`
* Label: `Q22:FRIENDS -4-FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD`

* Name: `	q22_8_5`
* Label: `Q22:FRIENDS -5-FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING`

* Name: `	q22_8_6`
* Label: `Q22:FRIENDS -6-FEMALE WHO HELPS YOU- NEIGHBORHOODS`

* Name: `	q22_8_7`
* Label: `Q22:FRIENDS -7-FEMALE WHO HELPS YOU- OTHER CHANCE`



* Name: `	q22_3_1`
* Label: `Q22:FRIENDS -1-MALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	q22_3_2`
* Label: `Q22:FRIENDS -2-MALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	q22_3_3`
* Label: `Q22:FRIENDS -3-MALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	q22_3_4`
* Label: `Q22:FRIENDS -4-MALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	q22_3_5`
* Label: `Q22:FRIENDS -5-MALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	q22_3_6`
* Label: `Q22:FRIENDS -6-MALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	q22_3_7`
* Label: `Q22:FRIENDS -7-MALE, DISCUSS PROBLEMS- OTHER CHANCE`

* Name: `	q22_7_1`
* Label: `Q22:FRIENDS -1-FEMALE, DISCUSS PROBLEMS- CHILDHOOD FRIENDS`

* Name: `	q22_7_2`
* Label: `Q22:FRIENDS -2-FEMALE, DISCUSS PROBLEMS- BUSINESS`

* Name: `	q22_7_3`
* Label: `Q22:FRIENDS -3-FEMALE, DISCUSS PROBLEMS- HOBBY`

* Name: `	q22_7_4`
* Label: `Q22:FRIENDS -4-FEMALE, DISCUSS PROBLEMS- VIA PARTNER OR CHILD`

* Name: `	q22_7_5`
* Label: `Q22:FRIENDS -5-FEMALE, DISCUSS PROBLEMS- VIA FRIEND AFTER GRADUATING`

* Name: `	q22_7_6`
* Label: `Q22:FRIENDS -6-FEMALE, DISCUSS PROBLEMS- NEIGHBORHOODS`

* Name: `	q22_7_7`
* Label: `Q22:FRIENDS -7-FEMALE, DISCUSS PROBLEMS- OTHER CHANCE`



* Description: 
```{r assign1}
opal.assign.table.tibble(o, 'JSTAR_cth_w1_clspeop','JSTAR_datasets_restricted.jstar_2011_3cities', 
                        variables=list('q22_3_1','q22_3_2','q22_3_3','q22_3_4','q22_3_5','q22_3_6','q22_3_7',
                                       'q22_4_1','q22_4_2','q22_4_3','q22_4_4','q22_4_5','q22_4_6','q22_4_7',
                                       'q22_7_1','q22_7_2','q22_7_3','q22_7_4','q22_7_5','q22_7_6','q22_7_7',
                                       'q22_8_1','q22_8_2','q22_8_3','q22_8_4','q22_8_5','q22_8_6','q22_8_7'), missings = TRUE)
```




```{r local1}
JSTAR_cth_w1_clspeop <- opal.execute(o,'JSTAR_cth_w1_clspeop')


vari <- JSTAR_cth_w1_clspeop$q22_3_1
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome191, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_2
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome192, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_2))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_3
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome193, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_3))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_4
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$q22_3_4, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_4))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_5
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$q22_3_5, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_5))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_6
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$q22_3_6, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_6))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_3_7
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$q22_3_7, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_3_7))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("MALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_1
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome220, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- CHILDHOOD FRIENDS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_2
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome221, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_2))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- BUSINESS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_3
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome222, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_3))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- HOBBY") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_4
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome223, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_4))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA PARTNER OR CHILD") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_5
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome224, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_5))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- VIA FRIEND AFTER GRADUATING") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_6
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome225, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_6))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- NEIGHBORHOODS") + ylab("Frequency")

vari <- JSTAR_cth_w1_clspeop$q22_8_7
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Continuous_summary(var = JSTAR_cth_w1_clspeop$tome226, missing_values = NA)
ggplot(JSTAR_cth_w1_clspeop, aes(x=factor(q22_8_7))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("FEMALE WHO HELPS YOU- OTHER CHANCE") + ylab("Frequency")


```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `take the SUM OF max of every pair: (q22_3_1, q22_4_1), (q22_3_2, q22_4_2), …, (q22_3_7, q22_4_7) `
  `and ADD this sum to the SUM OF max of every pair: (q22_7_1, q22_8_1), (q22_7_2, q22_8_2), …, (q22_7_7, q22_8_7)`
* `NA into 999`

 **R script:**

```{r harmo1, echo=TRUE}
JSTAR_cth_ds_w1 <- tibble(id=JSTAR_cth_w1_clspeop$id)

JSTAR_cth_w1_clspeop$q22_3_1 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_1), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_2 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_2), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_3 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_3), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_4 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_4), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_5 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_5), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_6 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_6), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_3_7 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_3_7), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_1 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_1), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_2 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_2), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_3 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_3), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_4 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_4), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_5 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_5), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_6 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_6), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_4_7 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_4_7), "NA='-999'")

JSTAR_cth_w1_clspeop$q22_7_1 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_1), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_2 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_2), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_3 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_3), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_4 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_4), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_5 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_5), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_6 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_6), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_7_7 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_7_7), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_1 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_1), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_2 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_2), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_3 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_3), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_4 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_4), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_5 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_5), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_6 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_6), "NA='-999'")
JSTAR_cth_w1_clspeop$q22_8_7 <- car::recode(as.vector(JSTAR_cth_w1_clspeop$q22_8_7), "NA='-999'")


JSTAR_cth_ds_w1$clspeop <- c(NA)  
for(i in 1:dim(JSTAR_cth_w1_clspeop)[1]){
  
  JSTAR_cth_ds_w1$clspeop[i] = 0
  
  if( max(JSTAR_cth_w1_clspeop$q22_3_1[i], JSTAR_cth_w1_clspeop$q22_4_1[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_1[i], JSTAR_cth_w1_clspeop$q22_4_1[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_2[i], JSTAR_cth_w1_clspeop$q22_4_2[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_2[i], JSTAR_cth_w1_clspeop$q22_4_2[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_3[i], JSTAR_cth_w1_clspeop$q22_4_3[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_3[i], JSTAR_cth_w1_clspeop$q22_4_3[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_4[i], JSTAR_cth_w1_clspeop$q22_4_4[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_4[i], JSTAR_cth_w1_clspeop$q22_4_4[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_5[i], JSTAR_cth_w1_clspeop$q22_4_5[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_5[i], JSTAR_cth_w1_clspeop$q22_4_5[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_6[i], JSTAR_cth_w1_clspeop$q22_4_6[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_6[i], JSTAR_cth_w1_clspeop$q22_4_6[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_3_7[i], JSTAR_cth_w1_clspeop$q22_4_7[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_3_7[i], JSTAR_cth_w1_clspeop$q22_4_7[i]) }
  
  if( max(JSTAR_cth_w1_clspeop$q22_7_1[i], JSTAR_cth_w1_clspeop$q22_8_1[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_1[i], JSTAR_cth_w1_clspeop$q22_8_1[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_2[i], JSTAR_cth_w1_clspeop$q22_8_2[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_2[i], JSTAR_cth_w1_clspeop$q22_8_2[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_3[i], JSTAR_cth_w1_clspeop$q22_8_3[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_3[i], JSTAR_cth_w1_clspeop$q22_8_3[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_4[i], JSTAR_cth_w1_clspeop$q22_8_4[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_4[i], JSTAR_cth_w1_clspeop$q22_8_4[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_5[i], JSTAR_cth_w1_clspeop$q22_8_5[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_5[i], JSTAR_cth_w1_clspeop$q22_8_5[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_6[i], JSTAR_cth_w1_clspeop$q22_8_6[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_6[i], JSTAR_cth_w1_clspeop$q22_8_6[i]) }
  if( max(JSTAR_cth_w1_clspeop$q22_7_7[i], JSTAR_cth_w1_clspeop$q22_8_7[i]) >= 0){
    JSTAR_cth_ds_w1$clspeop[i] = JSTAR_cth_ds_w1$clspeop[i] + max(JSTAR_cth_w1_clspeop$q22_7_7[i], JSTAR_cth_w1_clspeop$q22_8_7[i]) }
  
  if( JSTAR_cth_w1_clspeop$q22_3_1[i] <0 & JSTAR_cth_w1_clspeop$q22_3_2[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_3_3[i] <0 & JSTAR_cth_w1_clspeop$q22_3_4[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_3_5[i] <0 & JSTAR_cth_w1_clspeop$q22_3_6[i] <0 &
   JSTAR_cth_w1_clspeop$q22_3_7[i] <0 & JSTAR_cth_w1_clspeop$q22_4_1[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_4_2[i] <0 & JSTAR_cth_w1_clspeop$q22_4_3[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_4_4[i] <0 & JSTAR_cth_w1_clspeop$q22_4_5[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_4_6[i] <0 & JSTAR_cth_w1_clspeop$q22_4_7[i] <0 &
   JSTAR_cth_w1_clspeop$q22_7_1[i] <0 & JSTAR_cth_w1_clspeop$q22_7_2[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_7_3[i] <0 & JSTAR_cth_w1_clspeop$q22_7_4[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_7_5[i] <0 & JSTAR_cth_w1_clspeop$q22_7_6[i] <0 &
   JSTAR_cth_w1_clspeop$q22_7_7[i] <0 & JSTAR_cth_w1_clspeop$q22_8_1[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_8_2[i] <0 & JSTAR_cth_w1_clspeop$q22_8_3[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_8_4[i] <0 & JSTAR_cth_w1_clspeop$q22_8_5[i] <0 & 
   JSTAR_cth_w1_clspeop$q22_8_6[i] <0 & JSTAR_cth_w1_clspeop$q22_8_7[i] <0 )
  { JSTAR_cth_ds_w1$clspeop[i] = NA}
}


JSTAR_cth_ds_w1$clspeop <- car::recode(as.vector(JSTAR_cth_ds_w1$clspeop), "NA='999'")
JSTAR_cth_ds_w1$clspeop <- labelled(JSTAR_cth_ds_w1$clspeop, labels = c("lack of close people"=0, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript1}
vari <- JSTAR_cth_ds_w1$clspeop
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
#Categorical_summary(var = JSTAR_cth_ds_w1$clspeop, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(JSTAR_cth_ds_w1, aes(x=factor(clspeop))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("The number of close people: friends, neighbours or co-workers") + ylab("Frequency")
```

#### Validation
```{r crosstabulation1}

```

 
```{r save, echo=FALSE}
clspeop <- JSTAR_tn_ds_w1
save(clspeop, file = "../RData/tn_w1/clspeop.RData")
rm(clspeop)



clspeop <- JSTAR_aksst_ds_w1
save(clspeop, file = "../RData/aksst_w1/clspeop.RData")
rm(clspeop)

clspeop <- JSTAR_cth_ds_w1
save(clspeop, file = "../RData/cth_w1/clspeop.RData")
rm(clspeop)


```

# Quality estimation
```{r closeRsession, echo=FALSE} 
opal.logout(o)
```

