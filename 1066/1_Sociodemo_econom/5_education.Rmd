---
title: "Education"
output: 
  html_document:
    theme: united
    highlight: tango
    toc: true
    toc_depth: 6
    toc_float:
      collapsed: true
      smooth_scroll: true
    number_sections: true
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->

```{r setup, include=FALSE, echo=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/Rmds/setup_ania.r")
```

<!-- ########################################################## --> 

# Description of DataSchema variable 

* Short name: `education`
* Variable label: `Highest level of formal education achieved`
* Domain: `Socio-demographic and economic characteristics`
* Value type: `categorical`
* Category coding:

**Code** | **Category Label**
-------- | ------------------
0        | less than primary education
1        | primary education
2        | secondary education
3        | tertiary education

* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing




<!-- ########################################################## --> 

# Data process

## Cuba
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`
* Description:
```{r assign_cuba1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_cuba_w1_educ','10-66.1066-Cuba-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_cuba1, echo=FALSE}
t1066_cuba_w1_educ <- opal.execute(o,'t1066_cuba_w1_educ')
vari <- t1066_cuba_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_cuba_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_cuba_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_cuba1, echo=TRUE}
t1066_ds_cuba_w1 <- tibble(id=t1066_cuba_w1_educ$id)
t1066_ds_cuba_w1$education <- car::recode(t1066_cuba_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_cuba_w1$education <- labelled(t1066_ds_cuba_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_cuba1, echo=FALSE}
vari <- t1066_ds_cuba_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_cuba_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_cuba_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_cuba1, echo=FALSE}
BeforeH <- table(t1066_cuba_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_cuba_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_cuba_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```

### Wave 2 

There are no varibale


## India
### Wave 1 

#### Study-specific variable description

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`
* Description:
```{r assign_india1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_india_w1_educ','10-66.1066-India-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_india1, echo=FALSE}
t1066_india_w1_educ <- opal.execute(o,'t1066_india_w1_educ')
vari <- t1066_india_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_india_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_india_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_india1, echo=TRUE}
t1066_ds_india_w1 <- tibble(id=t1066_india_w1_educ$id)
t1066_ds_india_w1$education <- car::recode(t1066_india_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_india_w1$education <- labelled(t1066_ds_india_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_india1, echo=FALSE}
vari <- t1066_ds_india_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_india_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_india_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_india1, echo=FALSE}
BeforeH <- table(t1066_india_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_india_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_india_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```


### Wave 2 

There are no variable.



## Urban China
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`
* Description:
```{r assign_UCh1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_UCh_w1_educ','10-66.1066-UrbanChina-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_UCh1, echo=FALSE}
t1066_UCh_w1_educ <- opal.execute(o,'t1066_UCh_w1_educ')
vari <- t1066_UCh_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_UCh_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_UCh_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_UCh1, echo=TRUE}
t1066_ds_UCh_w1 <- tibble(id=t1066_UCh_w1_educ$id)
t1066_ds_UCh_w1$education <- car::recode(t1066_UCh_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_UCh_w1$education <- labelled(t1066_ds_UCh_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UCh1, echo=FALSE}
vari <- t1066_ds_UCh_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_UCh_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_UCh_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UCh1, echo=FALSE}
BeforeH <- table(t1066_UCh_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5])
AfterH <- table(t1066_ds_UCh_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3")
kable(C)
```

 
### Wave 2 

There is no variable. 




## Rural China
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`
* Description:
```{r assign_RCh1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_RCh_w1_educ','10-66.1066-RuralChina-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_RCh1, echo=FALSE}
t1066_RCh_w1_educ <- opal.execute(o,'t1066_RCh_w1_educ')
vari <- t1066_RCh_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_RCh_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_RCh_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_RCh1, echo=TRUE}
t1066_ds_RCh_w1 <- tibble(id=t1066_RCh_w1_educ$id)
t1066_ds_RCh_w1$education <- car::recode(t1066_RCh_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_RCh_w1$education <- labelled(t1066_ds_RCh_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RCh1, echo=FALSE}
vari <- t1066_ds_RCh_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_RCh_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_RCh_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RCh1, echo=FALSE}
BeforeH <- table(t1066_RCh_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5])
AfterH <- table(t1066_ds_RCh_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3")
kable(C)
```


### Wave  2 
There is no varibale

## Dominican Republic
### Wave 1 

#### Study-specific variable description

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_DR1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_DR_w1_educ','10-66.1066-DominicanRepublic-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_DR1, echo=FALSE}
t1066_DR_w1_educ <- opal.execute(o,'t1066_DR_w1_educ')
vari <- t1066_DR_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_DR_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_DR_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_DR1, echo=TRUE}
t1066_ds_DR_w1 <- tibble(id=t1066_DR_w1_educ$id)
t1066_ds_DR_w1$education <- car::recode(t1066_DR_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_DR_w1$education <- labelled(t1066_ds_DR_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_DR1, echo=FALSE}
vari <- t1066_ds_DR_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_DR_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_DR_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_DR1, echo=FALSE}
BeforeH <- table(t1066_DR_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_DR_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_DR_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```


### Wave 2 

There is no variable. 



## Venezuela
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_V2, echo=FALSE}
opal.assign.table.tibble(o, 't1066_Ven_w1_educ','10-66.1066-Venezuela-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_V2, echo=FALSE}
t1066_Ven_w1_educ <- opal.execute(o,'t1066_Ven_w1_educ')
vari <- t1066_Ven_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_Ven_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_Ven_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_V2, echo=TRUE}
t1066_ds_Ven_w1 <- tibble(id=t1066_Ven_w1_educ$id)
t1066_ds_Ven_w1$education <- car::recode(t1066_Ven_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_Ven_w1$education <- labelled(t1066_ds_Ven_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_V2, echo=FALSE}
vari <- t1066_ds_Ven_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_Ven_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_Ven_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_V2, echo=FALSE}
BeforeH <- table(t1066_Ven_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_Ven_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_Ven_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```


### Wave 2 

There is no variable.



## Urban Peru
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_UP, echo=FALSE}
opal.assign.table.tibble(o, 't1066_UP_w1_educ','10-66.1066-UrbanPeru-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_UP1, echo=FALSE}
t1066_UP_w1_educ <- opal.execute(o,'t1066_UP_w1_educ')
vari <- t1066_UP_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_UP_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_UP_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_UP1, echo=TRUE}
t1066_ds_UP_w1 <- tibble(id=t1066_UP_w1_educ$id)
t1066_ds_UP_w1$education <- car::recode(t1066_UP_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_UP_w1$education <- labelled(t1066_ds_UP_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UP1, echo=FALSE}
vari <- t1066_ds_UP_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_UP_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_UP_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UP1, echo=FALSE}
BeforeH <- table(t1066_UP_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_UP_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_UP_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```


### Wave 2 

There is no variable.





## Rural Peru
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_RP, echo=FALSE}
opal.assign.table.tibble(o, 't1066_RP_w1_educ','10-66.1066-RuralPeru-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_RP1, echo=FALSE}
t1066_RP_w1_educ <- opal.execute(o,'t1066_RP_w1_educ')
vari <- t1066_RP_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_RP_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_RP_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_RP1, echo=TRUE}
t1066_ds_RP_w1 <- tibble(id=t1066_RP_w1_educ$id)
t1066_ds_RP_w1$education <- car::recode(t1066_RP_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_RP_w1$education <- labelled(t1066_ds_RP_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RP1, echo=FALSE}
vari <- t1066_ds_RP_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_RP_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_RP_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RP1, echo=FALSE}
BeforeH <- table(t1066_RP_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_RP_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_RP_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```

### 2 

There is no variable.



## Urban Mexico
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_UM1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_UM_w1_educ','10-66.1066-UrbanMexico-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_UM1, echo=FALSE}
t1066_UM_w1_educ <- opal.execute(o,'t1066_UM_w1_educ')
vari <- t1066_UM_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_UM_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_UM_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_UM1, echo=TRUE}
t1066_ds_UM_w1 <- tibble(id=t1066_UM_w1_educ$id)
t1066_ds_UM_w1$education <- car::recode(t1066_UM_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_UM_w1$education <- labelled(t1066_ds_UM_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UM1, echo=FALSE}
vari <- t1066_ds_UM_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_UM_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_UM_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UM1, echo=FALSE}
BeforeH <- table(t1066_UM_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5], sum(is.na(t1066_UM_w1_educ$PEDUC)))
AfterH <- table(t1066_ds_UM_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "NA->999")
kable(C)
```


### Wave 2

There is no variable.


## Rural Mexico
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`

* Description:
```{r assign_RM1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_RM_w1_educ','10-66.1066-RuralMexico-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_RM1, echo=FALSE}
t1066_RM_w1_educ <- opal.execute(o,'t1066_RM_w1_educ')
vari <- t1066_RM_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_RM_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_RM_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode NA into 999`

**R script:**

```{r harmo_RM1, echo=TRUE}
t1066_ds_RM_w1 <- tibble(id=t1066_RM_w1_educ$id)
t1066_ds_RM_w1$education <- car::recode(t1066_RM_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; NA=999")
t1066_ds_RM_w1$education <- labelled(t1066_ds_RM_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RM1, echo=FALSE}
vari <- t1066_ds_RM_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_RM_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_RM_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RM1, echo=FALSE}
BeforeH <- table(t1066_RM_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5])
AfterH <- table(t1066_ds_RM_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3")
kable(C)
```


### Wave 2 

There is no variable.



## Puerto Rico
### Wave 1 

#### Study-specific variable description

 

* Name: `PEDUC`
* Label: `level of education`
* Categories: 
    + `1 = none`
    + `2 = some, did not complete primary`
    + `3 = completed primary`
    + `4 = completed secondary`
    + `5 = tertiary (college)`
    + `6`

* Description:
```{r assign_PR1, echo=FALSE}
opal.assign.table.tibble(o, 't1066_PR_w1_educ','10-66.1066-PuertoRico-Baseline',
                         variables=list('PEDUC'), missings = TRUE)
```

```{r local_PR1, echo=FALSE}
t1066_PR_w1_educ <- opal.execute(o,'t1066_PR_w1_educ')
vari <- t1066_PR_w1_educ$PEDUC
kable(Continuous_summary(vari, missing_values = NA)[3], caption = attributes(vari)$`spss::shortName`)
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
#Categorical_summary(var = t1066_PR_w1_educ$PEDUC, missing_values = NA)
ggplot(t1066_PR_w1_educ, aes(x=factor(PEDUC))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `recode 1 "none" into 0`
* `recode 2 "some, did not complete primary" into 0`
* `recode 3 "completed primary" into 1`
* `recode 4 "completed secondary" into 2`
* `recode 5 "tertiary (college)" into 3`
* `recode 6 into 999`
* `recode NA into 999`

**R script:**

```{r harmo_PR1, echo=TRUE}
t1066_ds_PR_w1 <- tibble(id=t1066_PR_w1_educ$id)
t1066_ds_PR_w1$education <- car::recode(t1066_PR_w1_educ$PEDUC, "1=0; 2=0; 3=1; 4=2; 5=3; 6=999; NA=999")
t1066_ds_PR_w1$education <- labelled(t1066_ds_PR_w1$education, labels = c("less than primary education"=0, "primary education"=1, "secondary education"=2, "tertiary education"=3, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not attempt not done"=994, "Does not answer"=995,  "Not applicable"=996, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_PR1, echo=FALSE}
vari <- t1066_ds_PR_w1$education
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "education") # EL CAPTION ES EL NOMBRE DE LA HASMONISED VARIABLE
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = t1066_ds_PR_w1$education, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(t1066_ds_PR_w1, aes(x=factor(education))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Level of education") + ylab("Frequency")
```

#### Validation
```{r crosstabulation_PR1, echo=FALSE}
BeforeH <- table(t1066_PR_w1_educ$PEDUC)
BeforeH <- c(sum(BeforeH[c(1,2)]), BeforeH[3],BeforeH[4], BeforeH[5],BeforeH[6] )
AfterH <- table(t1066_ds_PR_w1$education)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(1,2)->0", "3->1", "4->2", "5->3", "(6,NA)->999")
kable(C)
```



### Wave 2 

There is no variable.


```{r save, echo=FALSE}
education <- t1066_ds_cuba_w1
save(education, file = "../RData/cuba_w1/education.RData")
rm(education)

education <- t1066_ds_india_w1
save(education, file = "../RData/india_w1/education.RData")
rm(education)

education <- t1066_ds_UCh_w1
save(education, file = "../RData/UCh_w1/education.RData")
rm(education)

education <- t1066_ds_RCh_w1
save(education, file = "../RData/RCh_w1/education.RData")
rm(education)

education <- t1066_ds_DR_w1
save(education, file = "../RData/DR_w1/education.RData")
rm(education)

education <- t1066_ds_Ven_w1
save(education, file = "../RData/Ven_w1/education.RData")
rm(education)

education <- t1066_ds_UP_w1
save(education, file = "../RData/UP_w1/education.RData")
rm(education)

education <- t1066_ds_RP_w1
save(education, file = "../RData/RP_w1/education.RData")
rm(education)

education <- t1066_ds_UM_w1
save(education, file = "../RData/UM_w1/education.RData")
rm(education)

education <- t1066_ds_RM_w1
save(education, file = "../RData/RM_w1/education.RData")
rm(education)

education <- t1066_ds_PR_w1
save(education, file = "../RData/PR_w1/education.RData")
rm(education)

```


# Quality estimation

The original variable is available in the first wave


```{r closeRsession, echo=FALSE} 
opal.logout(o)
```