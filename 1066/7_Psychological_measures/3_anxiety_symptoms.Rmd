---
title: "Anxiety symptoms"
output: 
  html_document:
    theme: united
    highlight: tango
    toc: true
    toc_depth: 6
    toc_float:
      collapsed: true
      smooth_scroll: true
    number_sections: true
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->



```{r setup, include=FALSE,  echo=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_laia.r")
```

<!-- ########################################################## --> 

# Description of DataSchema variable 

* Short name: `anxiety_symp`
* Variable label: `Psychological measure of anxiety symptoms`
* Domain: `Psycological measures`
* Value type: `categorical`
* Category coding:
* Comments: `In this template we will collect any anxiety symptom taking individual questions about worry, trembling, anxiety distress or severity, anxiety in general, other body features or scale items that correspond to these anxiety symptoms. In this sense, here we include a broad definition of anxiety symptoms. On a different variable we will have a more strict definition that will collect "anxiety diagnosis" following consensus criteria of strudies or scale manuals. However, only 5 studies include validated scales as such and most of them are different and some of them do not mention cut-off points, are ambiguous about them, or have different criteria depending on their population.`

**Code** | **Category Label**
-------- | --------------------
0        | no anxiety symptoms
1        | presence of anxiety

* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing


```{r lab, echo=FALSE}
ds_label <- "Anxiety symptoms"
ds_label_all <- "Psychological measure of anxiety symptoms"
```



<!-- ########################################################## --> 

# Data process

## Cuba 

### Wave 1 

#### Study-specific variable description


| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-Cuba-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_cuba1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-Cuba-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_cuba1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_cuba1,   echo=TRUE}
t1066_ds_cuba_w1 <- tibble(id=t1066_as$id)
t1066_ds_cuba_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_cuba_w1$anxiety_symp <- labelled(t1066_ds_cuba_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_cuba1,  echo=FALSE}
vari <- t1066_ds_cuba_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_cuba1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_cuba_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_cuba1, echo=FALSE} 
label(t1066_ds_cuba_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_cuba_w1
save(anxiety_symp, file = "../RData/cuba_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```


### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-Cuba-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_cuba2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-Cuba-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_cuba2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_cuba2,   echo=TRUE}
t1066_ds_cuba_w2 <- tibble(id=t1066_as$id)
t1066_ds_cuba_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_cuba_w2$anxiety_symp <- labelled(t1066_ds_cuba_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_cuba2,  echo=FALSE}
vari <- t1066_ds_cuba_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_cuba2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]), BeforeH[7])
AfterH <- table(t1066_ds_cuba_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1", "NA->999")
kable(C)
```

```{r importOPAL_cuba2, echo=FALSE} 
label(t1066_ds_cuba_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_cuba_w2
save(anxiety_symp, file = "../RData/cuba_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

## India 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-India-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_india1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-India-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_india1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_india1,   echo=TRUE}
t1066_ds_india_w1 <- tibble(id=t1066_as$id)
t1066_ds_india_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_india_w1$anxiety_symp <- labelled(t1066_ds_india_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_india1,  echo=FALSE}
vari <- t1066_ds_india_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_india_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_india1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_india_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```
```{r importOPAL_india_w1, echo=FALSE} 
label(t1066_ds_india_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_india_w1
save(anxiety_symp, file = "../RData/india_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```


### Wave 2 

#### Study-specific variable description

There is not variable.



## Urban China 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanChina-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UCh1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanChina-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UCh1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UCh1,   echo=TRUE}
t1066_ds_UCh_w1 <- tibble(id=t1066_as$id)
t1066_ds_UCh_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UCh_w1$anxiety_symp <- labelled(t1066_ds_UCh_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UCh1,  echo=FALSE}
vari <- t1066_ds_UCh_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UCh1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:4)]))
AfterH <- table(t1066_ds_UCh_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

 
```{r importOPAL_UCh1, echo=FALSE} 
label(t1066_ds_UCh_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UCh_w1
save(anxiety_symp, file = "../RData/UCh_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanChina-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UCh2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanChina-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UCh2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UCh2,   echo=TRUE}
t1066_ds_UCh_w2 <- tibble(id=t1066_as$id)
t1066_ds_UCh_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UCh_w2$anxiety_symp <- labelled(t1066_ds_UCh_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UCh2,  echo=FALSE}
vari <- t1066_ds_UCh_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UCh2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:5)]))
AfterH <- table(t1066_ds_UCh_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

 
```{r importOPAL_UCh_w2, echo=FALSE} 
label(t1066_ds_UCh_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UCh_w2
save(anxiety_symp, file = "../RData/UCh_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

## Rural China 

### Wave 1 

#### Study-specific variable description

 

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralChina-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RCh1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralChina-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RCh1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RCh1,   echo=TRUE}
t1066_ds_RCh_w1 <- tibble(id=t1066_as$id)
t1066_ds_RCh_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RCh_w1$anxiety_symp <- labelled(t1066_ds_RCh_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RCh1,  echo=FALSE}
vari <- t1066_ds_RCh_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RCh1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:4)]))
AfterH <- table(t1066_ds_RCh_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_RCh_w1, echo=FALSE} 
label(t1066_ds_RCh_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RCh_w1
save(anxiety_symp, file = "../RData/RCh_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

### Wave 2 

#### Study-specific variable description


| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralChina-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RCh2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralChina-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RCh2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RCh2,   echo=TRUE}
t1066_ds_RCh_w2 <- tibble(id=t1066_as$id)
t1066_ds_RCh_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RCh_w2$anxiety_symp <- labelled(t1066_ds_RCh_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RCh2,  echo=FALSE}
vari <- t1066_ds_RCh_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RCh2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:4)]))
AfterH <- table(t1066_ds_RCh_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_RCh_w2, echo=FALSE} 
label(t1066_ds_RCh_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RCh_w2
save(anxiety_symp, file = "../RData/RCh_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

## Dominican Republic 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-DominicanRepublic-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_DR1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-DominicanRepublic-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_DR1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_DR1,   echo=TRUE}
t1066_ds_DR_w1 <- tibble(id=t1066_as$id)
t1066_ds_DR_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_DR_w1$anxiety_symp <- labelled(t1066_ds_DR_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_DR1,  echo=FALSE}
vari <- t1066_ds_DR_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_DR1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_DR_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_DR_w1, echo=FALSE} 
label(t1066_ds_DR_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_DR_w1
save(anxiety_symp, file = "../RData/DR_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```

 

 

### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-DominicanRepublic-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_DR2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-DominicanRepublic-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_DR2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_DR2,   echo=TRUE}
t1066_ds_DR_w2 <- tibble(id=t1066_as$id)
t1066_ds_DR_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_DR_w2$anxiety_symp <- labelled(t1066_ds_DR_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_DR2,  echo=FALSE}
vari <- t1066_ds_DR_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_DR2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_DR_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

 
```{r importOPAL_DR_w2, echo=FALSE} 
label(t1066_ds_DR_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_DR_w2
save(anxiety_symp, file = "../RData/DR_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

## Venezuela 

### Wave 1 

#### Study-specific variable description

 
| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-Venezuela-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_V2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-Venezuela-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_V2,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_V2,   echo=TRUE}
t1066_ds_Ven_w1 <- tibble(id=t1066_as$id)
t1066_ds_Ven_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_Ven_w1$anxiety_symp <- labelled(t1066_ds_Ven_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_V2,  echo=FALSE}
vari <- t1066_ds_Ven_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_V2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_Ven_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```


```{r importOPAL_Ven_w1, echo=FALSE} 
label(t1066_ds_Ven_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_Ven_w1
save(anxiety_symp, file = "../RData/Ven_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

### Wave 2 

#### Study-specific variable description

 
| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-Venezuela-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_V1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-Venezuela-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_V1,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_V1,   echo=TRUE}
t1066_ds_Ven_w2 <- tibble(id=t1066_as$id)
t1066_ds_Ven_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_Ven_w2$anxiety_symp <- labelled(t1066_ds_Ven_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_V1,  echo=FALSE}
vari <- t1066_ds_Ven_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_V1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_Ven_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_Ven_w2, echo=FALSE} 
label(t1066_ds_Ven_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_Ven_w2
save(anxiety_symp, file = "../RData/Ven_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

## Urban Peru 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanPeru-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UP,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanPeru-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UP1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UP1,   echo=TRUE}
t1066_ds_UP_w1 <- tibble(id=t1066_as$id)
t1066_ds_UP_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UP_w1$anxiety_symp <- labelled(t1066_ds_UP_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UP1,  echo=FALSE}
vari <- t1066_ds_UP_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UP1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_UP_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

 
```{r importOPAL_UP_w1, echo=FALSE} 
label(t1066_ds_UP_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UP_w1
save(anxiety_symp, file = "../RData/UP_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanPeru-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UP2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanPeru-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UP2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UP2,   echo=TRUE}
t1066_ds_UP_w2 <- tibble(id=t1066_as$id)
t1066_ds_UP_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UP_w2$anxiety_symp <- labelled(t1066_ds_UP_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UP2,  echo=FALSE}
vari <- t1066_ds_UP_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UP2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_UP_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_UP_w2, echo=FALSE} 
label(t1066_ds_UP_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UP_w2
save(anxiety_symp, file = "../RData/UP_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 

## Rural Peru

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralPeru-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RP,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralPeru-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RP1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RP1,   echo=TRUE}
t1066_ds_RP_w1 <- tibble(id=t1066_as$id)
t1066_ds_RP_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RP_w1$anxiety_symp <- labelled(t1066_ds_RP_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RP1,  echo=FALSE}
vari <- t1066_ds_RP_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RP1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:5)]))
AfterH <- table(t1066_ds_RP_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_RP_w1, echo=FALSE} 
label(t1066_ds_RP_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RP_w1
save(anxiety_symp, file = "../RData/RP_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```

 
 

 

### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralPeru-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RP2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralPeru-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RP2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RP2,   echo=TRUE}
t1066_ds_RP_w2 <- tibble(id=t1066_as$id)
t1066_ds_RP_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RP_w2$anxiety_symp <- labelled(t1066_ds_RP_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RP2,  echo=FALSE}
vari <- t1066_ds_RP_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RP2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:5)]))
AfterH <- table(t1066_ds_RP_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_RP_w2, echo=FALSE} 
label(t1066_ds_RP_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RP_w2
save(anxiety_symp, file = "../RData/RP_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```

 
 

 

## Urban Mexico 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanMexico-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UM1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanMexico-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UM1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UM1,   echo=TRUE}
t1066_ds_UM_w1 <- tibble(id=t1066_as$id)
t1066_ds_UM_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UM_w1$anxiety_symp <- labelled(t1066_ds_UM_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UM1,  echo=FALSE}
vari <- t1066_ds_UM_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UM1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_UM_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

 
```{r importOPAL_UM_w1, echo=FALSE} 
label(t1066_ds_UM_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UM_w1
save(anxiety_symp, file = "../RData/UM_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

### Wave 2

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-UrbanMexico-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_UM2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-UrbanMexico-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_UM2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_UM2,   echo=TRUE}
t1066_ds_UM_w2 <- tibble(id=t1066_as$id)
t1066_ds_UM_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_UM_w2$anxiety_symp <- labelled(t1066_ds_UM_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_UM2,  echo=FALSE}
vari <- t1066_ds_UM_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_UM2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]), BeforeH[7])
AfterH <- table(t1066_ds_UM_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1", "NA->999")
kable(C)
```

 
```{r importOPAL_UM_w2, echo=FALSE} 
label(t1066_ds_UM_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_UM_w2
save(anxiety_symp, file = "../RData/UM_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

## Rural Mexico 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralMexico-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RM1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralMexico-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RM1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RM1,   echo=TRUE}
t1066_ds_RM_w1 <- tibble(id=t1066_as$id)
t1066_ds_RM_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RM_w1$anxiety_symp <- labelled(t1066_ds_RM_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RM1,  echo=FALSE}
vari <- t1066_ds_RM_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RM1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]))
AfterH <- table(t1066_ds_RM_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1")
kable(C)
```

```{r importOPAL_RM_w1, echo=FALSE} 
label(t1066_ds_RM_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RM_w1
save(anxiety_symp, file = "../RData/RM_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 
 

 


### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-RuralMexico-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_RM2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-RuralMexico-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_RM2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_RM2,   echo=TRUE}
t1066_ds_RM_w2 <- tibble(id=t1066_as$id)
t1066_ds_RM_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_RM_w2$anxiety_symp <- labelled(t1066_ds_RM_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_RM2,  echo=FALSE}
vari <- t1066_ds_RM_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_RM2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]), BeforeH[7])
AfterH <- table(t1066_ds_RM_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1", "NA->999")
kable(C)
```

 
```{r importOPAL_RM_w2, echo=FALSE} 
label(t1066_ds_RM_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_RM_w2
save(anxiety_symp, file = "../RData/RM_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

## Puerto Rico 

### Wave 1 

#### Study-specific variable description

| **Name** | `anx`|
|-|-|
| **Label** | `GMS/AGECAT stage 1 - anxiety cluster`|
| **Table name** | `1066-PuertoRico-Baseline` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_PR1,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-PuertoRico-Baseline',
                         variables=list('anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_PR1,  echo=FALSE}
vari <- t1066_as$anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

**R script:**

```{r harmo_PR1,   echo=TRUE}
t1066_ds_PR_w1 <- tibble(id=t1066_as$id)
t1066_ds_PR_w1$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999")
t1066_ds_PR_w1$anxiety_symp <- labelled(t1066_ds_PR_w1$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_PR1,  echo=FALSE}
vari <- t1066_ds_PR_w1$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w1, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_PR1,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:6)]), BeforeH[7])
AfterH <- table(t1066_ds_PR_w1$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1", "NA->999")
kable(C)
```

 
```{r importOPAL_PR_w1, echo=FALSE} 
label(t1066_ds_PR_w1$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_PR_w1
save(anxiety_symp, file = "../RData/PR_w1/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

 

### Wave 2 

#### Study-specific variable description

| **Name** | `f_anx`|
|-|-|
| **Label** | `stage 1 - anxiety cluster`|
| **Table name** | `1066-PuertoRico-Followup` |
| **Categories** |`0 = AN0`|
| | `1 = AN1` |
| | `2 = AN2` |
| | `3 = AN3` |
| | `4 = AN4` |
| | `5 = AN5` |
| **Description** |  |

```{r assign_PR2,  echo=FALSE}
opal.assign.table.tibble(o, 't1066_as','10-66.1066-PuertoRico-Followup',
                         variables=list('f_anx'), missings = TRUE)
t1066_as <- opal.execute(o,'t1066_as')
```

```{r local_PR2,  echo=FALSE}
vari <- t1066_as$f_anx
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(t1066_as, aes(x=factor(t1066_as[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variable it has to be recoded as follows:

* `keep "AN0" into 0`
* `keep "AN1" into 1`
* `recode 2 "AN2" into 1`
* `recode 3 "AN3" into 1`
* `recode 4 "AN4" into 1`
* `recode 5 "AN5" into 1`
* `NA into 999`

There are values that don't correspond to any of the lavels and they are going to be considered as missings. 

**R script:**

```{r harmo_PR2,   echo=TRUE}
t1066_ds_PR_w2 <- tibble(id=t1066_as$id)
t1066_ds_PR_w2$anxiety_symp <- car::recode(t1066_as[[2]], "2=1; 3=1; 4=1; 5=1; NA=999; 6:hi=999")
t1066_ds_PR_w2$anxiety_symp <- labelled(t1066_ds_PR_w2$anxiety_symp, labels = c("no anxiety symptoms"=0, "presence of anxiety"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript_PR2,  echo=FALSE}
vari <- t1066_ds_PR_w2$anxiety_symp
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w2, aes(x=factor(anxiety_symp))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_PR2,  echo=FALSE}
BeforeH <- table(t1066_as[[2]], useNA = 'ifany')
BeforeH <- c(BeforeH[1], sum(BeforeH[c(2:5)]), sum(BeforeH[c(6:length(BeforeH))]))
AfterH <- table(t1066_ds_PR_w2$anxiety_symp)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("0","(1,2,3,4,5)->1", "(>6,NA)->999")
kable(C)
```

```{r importOPAL_PR_w2, echo=FALSE} 
label(t1066_ds_PR_w2$anxiety_symp) <- ds_label_all
anxiety_symp <- t1066_ds_PR_w2
save(anxiety_symp, file = "../RData/PR_w2/anxiety_symp.RData")
rm(t1066_as, anxiety_symp)
```
 

# Quality estimation
In the chinese sample, anxiety symptoms were aparently present in a wider part of the sample (cultural aspects of this measure should be taken into acount to explain these differences).
This variable was based in assessments performed using the Geriatric Mental State (GMS) schedule. 
Psychiatric diagnoses were made by the computer programme AGECAT (anxiety module).

```{r closeRsession, echo=FALSE,  echo=FALSE} 
opal.logout(o)
```