---
title: "Cognition - Immediate recall"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---


<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/cog_immDS.Rmd'}
```
```{r global, echo=F}
source('../../_DS_Rmd/cog_immDS.R')
```




# Data process

## Cuba

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-Cuba-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign Cuba w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_Cuba_w1_cog_imm','10-66.1066-Cuba-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_Cuba_w1_cog_imm <- opal.execute(o,'s1066_Cuba_w1_cog_imm')
```

```{r local Cuba w1, echo=F}
vari <- s1066_Cuba_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")

ggplot(s1066_Cuba_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo Cuba w1}
##cog_imm_c
t1066_ds_cuba_w1 <- tibble(id=s1066_Cuba_w1_cog_imm$id)
t1066_ds_cuba_w1$cog_imm_c <- car::recode(s1066_Cuba_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_cuba_w1$cog_imm_c <- labelled(t1066_ds_cuba_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_cuba_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_cuba_w1$cog_imm <- car::recode(t1066_ds_cuba_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_cuba_w1$cog_imm <- labelled(t1066_ds_cuba_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript Cuba w1, echo=FALSE}
vari <- t1066_ds_cuba_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_cuba_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_cuba_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Cuba w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_cuba_w1[[2]])<=Q), sum(na.omit(t1066_ds_cuba_w1[[2]])>Q & na.omit(t1066_ds_cuba_w1[[2]])<900))
Dichotomous <- table(t1066_ds_cuba_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:20->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL Cuba w1, echo=FALSE}
label(t1066_ds_cuba_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_cuba_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_cuba_w1', t1066_ds_cuba_w1)
#opal.symbol_import(o,'t1066_ds_cuba_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_cuba_w1
save(cog_imm, file = "../RData/cuba_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_cuba_w1 <- t1066_ds_cuba_w1
t1066_m_ds_cuba_w1$cog_imm <- car::recode(t1066_m_ds_cuba_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_cuba_w1$cog_imm_c <- car::recode(t1066_m_ds_cuba_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w1', t1066_m_ds_cuba_w1)
#opal.symbol_import(o,'t1066_m_ds_cuba_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-Cuba-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign Cuba w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_Cuba_w2_cog_imm','10-66.1066-Cuba-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_Cuba_w2_cog_imm <- opal.execute(o,'s1066_Cuba_w2_cog_imm')
```

```{r local Cuba w2, echo=F}
vari <- s1066_Cuba_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")

ggplot(s1066_Cuba_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo Cuba w2}
##cog_imm_c
t1066_ds_cuba_w2 <- tibble(id=s1066_Cuba_w2_cog_imm$id)
t1066_ds_cuba_w2$cog_imm_c <-  car::recode(s1066_Cuba_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_cuba_w2$cog_imm_c <- labelled(t1066_ds_cuba_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_cuba_w2$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_cuba_w2$cog_imm <- car::recode(t1066_ds_cuba_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_cuba_w2$cog_imm <- labelled(t1066_ds_cuba_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript Cuba w2, echo=FALSE}
vari <- t1066_ds_cuba_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_cuba_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_cuba_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Cuba w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_cuba_w2[[2]])<=Q), sum(na.omit(t1066_ds_cuba_w2[[2]])>Q & na.omit(t1066_ds_cuba_w2[[2]])<900), sum(na.omit(t1066_ds_cuba_w2[[2]])==999))
Dichotomous <- table(t1066_ds_cuba_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL Cuba w2, echo=FALSE}
label(t1066_ds_cuba_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_cuba_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_cuba_w2', t1066_ds_cuba_w2)
#opal.symbol_import(o,'t1066_ds_cuba_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_cuba_w2
save(cog_imm, file = "../RData/cuba_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_cuba_w2 <- t1066_ds_cuba_w2
t1066_m_ds_cuba_w2$cog_imm <- car::recode(t1066_m_ds_cuba_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_cuba_w2$cog_imm_c <- car::recode(t1066_m_ds_cuba_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w2', t1066_m_ds_cuba_w2)
#opal.symbol_import(o,'t1066_m_ds_cuba_w2', project='_Athlos_Harm_Dataset')
```


## India

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-India-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign India w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_India_w1_cog_imm','10-66.1066-India-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_India_w1_cog_imm <- opal.execute(o,'s1066_India_w1_cog_imm')
```

```{r local India w1, echo=FALSE}
vari <- s1066_India_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_India_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo India w1}
##cog_imm_c
t1066_ds_india_w1 <- tibble(id=s1066_India_w1_cog_imm$id)
t1066_ds_india_w1$cog_imm_c <- car::recode(s1066_India_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_india_w1$cog_imm_c <- labelled(t1066_ds_india_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_india_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_india_w1$cog_imm <- car::recode(t1066_ds_india_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_india_w1$cog_imm <- labelled(t1066_ds_india_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript India w1, echo=FALSE}
vari <- t1066_ds_india_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_india_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_india_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_india_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation India w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_india_w1[[2]])<=Q), sum(na.omit(t1066_ds_india_w1[[2]])>Q & na.omit(t1066_ds_india_w1[[2]])<900))
Dichotomous <- table(t1066_ds_india_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:1->0","2:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL India w1, echo=FALSE}
label(t1066_ds_india_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_india_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_india_w1', t1066_ds_india_w1)
#opal.symbol_import(o,'t1066_ds_india_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_india_w1
save(cog_imm, file = "../RData/india_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_india_w1 <- t1066_ds_india_w1
t1066_m_ds_india_w1$cog_imm <- car::recode(t1066_m_ds_india_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_india_w1$cog_imm_c <- car::recode(t1066_m_ds_india_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_india_w1', t1066_m_ds_india_w1)
#opal.symbol_import(o,'t1066_m_ds_india_w1', project='_Athlos_Harm_Dataset')
```





## Urban China

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanChina-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |





```{r assign UrbanChina w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanChina_w1_cog_imm','10-66.1066-UrbanChina-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_UrbanChina_w1_cog_imm <- opal.execute(o,'s1066_UrbanChina_w1_cog_imm')
```

```{r local UrbanChina w1, echo=FALSE}
vari <- s1066_UrbanChina_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanChina_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanChina w1}
##cog_imm_c
t1066_ds_UCh_w1 <- tibble(id=s1066_UrbanChina_w1_cog_imm$id)
t1066_ds_UCh_w1$cog_imm_c <- car::recode(s1066_UrbanChina_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_UCh_w1$cog_imm_c <- labelled(t1066_ds_UCh_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UCh_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UCh_w1$cog_imm <- car::recode(t1066_ds_UCh_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UCh_w1$cog_imm <- labelled(t1066_ds_UCh_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w1, echo=FALSE}
vari <- t1066_ds_UCh_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UCh_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UCh_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UCh_w1[[2]])<=Q), sum(na.omit(t1066_ds_UCh_w1[[2]])>Q & na.omit(t1066_ds_UCh_w1[[2]])<900))
Dichotomous <- table(t1066_ds_UCh_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanChina w1, echo=FALSE}
label(t1066_ds_UCh_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UCh_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UCh_w1', t1066_ds_UCh_w1)
#opal.symbol_import(o,'t1066_ds_UCh_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UCh_w1
save(cog_imm, file = "../RData/UCh_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UCh_w1 <- t1066_ds_UCh_w1
t1066_m_ds_UCh_w1$cog_imm <- car::recode(t1066_m_ds_UCh_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UCh_w1$cog_imm_c <- car::recode(t1066_m_ds_UCh_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w1', t1066_m_ds_UCh_w1)
#opal.symbol_import(o,'t1066_m_ds_UCh_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanChina-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign UrbanChina w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanChina_w2_cog_imm','10-66.1066-UrbanChina-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_UrbanChina_w2_cog_imm <- opal.execute(o,'s1066_UrbanChina_w2_cog_imm')
```

```{r local UrbanChina w2, echo=FALSE}
vari <- s1066_UrbanChina_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanChina_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanChina w2}
##cog_imm_c
t1066_ds_UCh_w2 <- tibble(id=s1066_UrbanChina_w2_cog_imm$id)
t1066_ds_UCh_w2$cog_imm_c <-  car::recode(s1066_UrbanChina_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_UCh_w2$cog_imm_c <- labelled(t1066_ds_UCh_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UCh_w2$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UCh_w2$cog_imm <- car::recode(t1066_ds_UCh_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UCh_w2$cog_imm <- labelled(t1066_ds_UCh_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w2, echo=FALSE}
vari <- t1066_ds_UCh_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UCh_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UCh_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UCh_w2[[2]])<=Q), sum(na.omit(t1066_ds_UCh_w2[[2]])>Q & na.omit(t1066_ds_UCh_w2[[2]])<900))
Dichotomous <- table(t1066_ds_UCh_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanChina w2, echo=FALSE}
label(t1066_ds_UCh_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UCh_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UCh_w2', t1066_ds_UCh_w2)
#opal.symbol_import(o,'t1066_ds_UCh_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UCh_w2
save(cog_imm, file = "../RData/UCh_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UCh_w2 <- t1066_ds_UCh_w2
t1066_m_ds_UCh_w2$cog_imm <- car::recode(t1066_m_ds_UCh_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UCh_w2$cog_imm_c <- car::recode(t1066_m_ds_UCh_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w2', t1066_m_ds_UCh_w2)
#opal.symbol_import(o,'t1066_m_ds_UCh_w2', project='_Athlos_Harm_Dataset')
```



## Rural China

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralChina-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralChina w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralChina_w1_cog_imm','10-66.1066-RuralChina-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_RuralChina_w1_cog_imm <- opal.execute(o,'s1066_RuralChina_w1_cog_imm')
```

```{r local RuralChina w1, echo=FALSE}
vari <- s1066_RuralChina_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralChina_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralChina w1}
##cog_imm_c
t1066_ds_RCh_w1 <- tibble(id=s1066_RuralChina_w1_cog_imm$id)
t1066_ds_RCh_w1$cog_imm_c <- car::recode(s1066_RuralChina_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_RCh_w1$cog_imm_c <- labelled(t1066_ds_RCh_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RCh_w1$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RCh_w1$cog_imm <- car::recode(t1066_ds_RCh_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RCh_w1$cog_imm <- labelled(t1066_ds_RCh_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w1, echo=FALSE}
vari <- t1066_ds_RCh_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RCh_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RCh_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RCh_w1[[2]])<=Q), sum(na.omit(t1066_ds_RCh_w1[[2]])>Q & na.omit(t1066_ds_RCh_w1[[2]])<900))
Dichotomous <- table(t1066_ds_RCh_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralChina w1, echo=FALSE}
label(t1066_ds_RCh_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RCh_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RCh_w1', t1066_ds_RCh_w1)
#opal.symbol_import(o,'t1066_ds_RCh_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RCh_w1
save(cog_imm, file = "../RData/RCh_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RCh_w1 <- t1066_ds_RCh_w1
t1066_m_ds_RCh_w1$cog_imm <- car::recode(t1066_m_ds_RCh_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RCh_w1$cog_imm_c <- car::recode(t1066_m_ds_RCh_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w1', t1066_m_ds_RCh_w1)
#opal.symbol_import(o,'t1066_m_ds_RCh_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralChina-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralChina w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralChina_w2_cog_imm','10-66.1066-RuralChina-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_RuralChina_w2_cog_imm <- opal.execute(o,'s1066_RuralChina_w2_cog_imm')
```

```{r local RuralChina w2, echo=FALSE}
vari <- s1066_RuralChina_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralChina_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralChina w2}
##cog_imm_c
t1066_ds_RCh_w2 <- tibble(id=s1066_RuralChina_w2_cog_imm$id)
t1066_ds_RCh_w2$cog_imm_c <-  car::recode(s1066_RuralChina_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_RCh_w2$cog_imm_c <- labelled(t1066_ds_RCh_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RCh_w2$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RCh_w2$cog_imm <- car::recode(t1066_ds_RCh_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RCh_w2$cog_imm <- labelled(t1066_ds_RCh_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w2, echo=FALSE}
vari <- t1066_ds_RCh_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RCh_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RCh_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RCh_w2[[2]])<=Q), sum(na.omit(t1066_ds_RCh_w2[[2]])>Q & na.omit(t1066_ds_RCh_w2[[2]])<900))
Dichotomous <- table(t1066_ds_RCh_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralChina w2, echo=FALSE}
label(t1066_ds_RCh_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RCh_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RCh_w2', t1066_ds_RCh_w2)
#opal.symbol_import(o,'t1066_ds_RCh_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RCh_w2
save(cog_imm, file = "../RData/RCh_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RCh_w2 <- t1066_ds_RCh_w2
t1066_m_ds_RCh_w2$cog_imm <- car::recode(t1066_m_ds_RCh_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RCh_w2$cog_imm_c <- car::recode(t1066_m_ds_RCh_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w2', t1066_m_ds_RCh_w2)
#opal.symbol_import(o,'t1066_m_ds_RCh_w2', project='_Athlos_Harm_Dataset')
```



## Dominican Republic

### Wave 1 

#### Study-specific variable description




| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-DominicanRepublic-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |





```{r assign DominicanRepublic w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w1_cog_imm','10-66.1066-DominicanRepublic-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_DominicanRepublic_w1_cog_imm <- opal.execute(o,'s1066_DominicanRepublic_w1_cog_imm')
```

```{r local DominicanRepublic w1, echo=FALSE}
vari <- s1066_DominicanRepublic_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_DominicanRepublic_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo DominicanRepublic w1}
##cog_imm_c
t1066_ds_DR_w1 <- tibble(id=s1066_DominicanRepublic_w1_cog_imm$id)
t1066_ds_DR_w1$cog_imm_c <- car::recode(s1066_DominicanRepublic_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_DR_w1$cog_imm_c <- labelled(t1066_ds_DR_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_DR_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_DR_w1$cog_imm <- car::recode(t1066_ds_DR_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_DR_w1$cog_imm <- labelled(t1066_ds_DR_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w1, echo=FALSE}
vari <- t1066_ds_DR_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_DR_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_DR_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_DR_w1[[2]])<=Q), sum(na.omit(t1066_ds_DR_w1[[2]])>Q & na.omit(t1066_ds_DR_w1[[2]])<900))
Dichotomous <- table(t1066_ds_DR_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL DominicanRepublic w1, echo=FALSE}
label(t1066_ds_DR_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_DR_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_DR_w1', t1066_ds_DR_w1)
#opal.symbol_import(o,'t1066_ds_DR_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_DR_w1
save(cog_imm, file = "../RData/DR_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_DR_w1 <- t1066_ds_DR_w1
t1066_m_ds_DR_w1$cog_imm <- car::recode(t1066_m_ds_DR_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_DR_w1$cog_imm_c <- car::recode(t1066_m_ds_DR_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w1', t1066_m_ds_DR_w1)
#opal.symbol_import(o,'t1066_m_ds_DR_w1', project='_Athlos_Harm_Dataset')
```




### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-DominicanRepublic-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign DominicanRepublic w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w2_cog_imm','10-66.1066-DominicanRepublic-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_DominicanRepublic_w2_cog_imm <- opal.execute(o,'s1066_DominicanRepublic_w2_cog_imm')
```

```{r local DominicanRepublic w2, echo=FALSE}
vari <- s1066_DominicanRepublic_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_DominicanRepublic_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo DominicanRepublic w2}
##cog_imm_c
t1066_ds_DR_w2 <- tibble(id=s1066_DominicanRepublic_w2_cog_imm$id)
t1066_ds_DR_w2$cog_imm_c <-  car::recode(s1066_DominicanRepublic_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_DR_w2$cog_imm_c <- labelled(t1066_ds_DR_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_DR_w2$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_DR_w2$cog_imm <- car::recode(t1066_ds_DR_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_DR_w2$cog_imm <- labelled(t1066_ds_DR_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w2, echo=FALSE}
vari <- t1066_ds_DR_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_DR_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_DR_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_DR_w2[[2]])<=Q), sum(na.omit(t1066_ds_DR_w2[[2]])>Q & na.omit(t1066_ds_DR_w2[[2]])<900))
Dichotomous <- table(t1066_ds_DR_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL DominicanRepublic w2, echo=FALSE}
label(t1066_ds_DR_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_DR_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_DR_w2', t1066_ds_DR_w2)
#opal.symbol_import(o,'t1066_ds_DR_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_DR_w2
save(cog_imm, file = "../RData/DR_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_DR_w2 <- t1066_ds_DR_w2
t1066_m_ds_DR_w2$cog_imm <- car::recode(t1066_m_ds_DR_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_DR_w2$cog_imm_c <- car::recode(t1066_m_ds_DR_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w2', t1066_m_ds_DR_w2)
#opal.symbol_import(o,'t1066_m_ds_DR_w2', project='_Athlos_Harm_Dataset')
```



## Venezuela

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-Venezuela-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign Venezuela w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_Venezuela_w1_cog_imm','10-66.1066-Venezuela-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_Venezuela_w1_cog_imm <- opal.execute(o,'s1066_Venezuela_w1_cog_imm')
```

```{r local Venezuela w1, echo=FALSE}
vari <- s1066_Venezuela_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_Venezuela_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo Venezuela w1}
##cog_imm_c
t1066_ds_Ven_w1 <- tibble(id=s1066_Venezuela_w1_cog_imm$id)
t1066_ds_Ven_w1$cog_imm_c <- car::recode(s1066_Venezuela_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_Ven_w1$cog_imm_c <- labelled(t1066_ds_Ven_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_Ven_w1$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_Ven_w1$cog_imm <- car::recode(t1066_ds_Ven_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_Ven_w1$cog_imm <- labelled(t1066_ds_Ven_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w1, echo=FALSE}
vari <- t1066_ds_Ven_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_Ven_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_Ven_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_Ven_w1[[2]])<=Q), sum(na.omit(t1066_ds_Ven_w1[[2]])>Q & na.omit(t1066_ds_Ven_w1[[2]])<900))
Dichotomous <- table(t1066_ds_Ven_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL Venezuela w1, echo=FALSE}
label(t1066_ds_Ven_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_Ven_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_Ven_w1', t1066_ds_Ven_w1)
#opal.symbol_import(o,'t1066_ds_Ven_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_Ven_w1
save(cog_imm, file = "../RData/Ven_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_Ven_w1 <- t1066_ds_Ven_w1
t1066_m_ds_Ven_w1$cog_imm <- car::recode(t1066_m_ds_Ven_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_Ven_w1$cog_imm_c <- car::recode(t1066_m_ds_Ven_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w1', t1066_m_ds_Ven_w1)
#opal.symbol_import(o,'t1066_m_ds_Ven_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-Venezuela-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign Venezuela w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_Venezuela_w2_cog_imm','10-66.1066-Venezuela-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_Venezuela_w2_cog_imm <- opal.execute(o,'s1066_Venezuela_w2_cog_imm')
```

```{r local Venezuela w2, echo=FALSE}
vari <- s1066_Venezuela_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_Venezuela_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo Venezuela w2}
##cog_imm_c
t1066_ds_Ven_w2 <- tibble(id=s1066_Venezuela_w2_cog_imm$id)
t1066_ds_Ven_w2$cog_imm_c <-  car::recode(s1066_Venezuela_w2_cog_imm$f_LEARN1,"NA='999'")
t1066_ds_Ven_w2$cog_imm_c <- labelled(t1066_ds_Ven_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_Ven_w2$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_Ven_w2$cog_imm <- car::recode(t1066_ds_Ven_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_Ven_w2$cog_imm <- labelled(t1066_ds_Ven_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w2, echo=FALSE}
vari <- t1066_ds_Ven_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_Ven_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_Ven_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_Ven_w2[[2]])<=Q), sum(na.omit(t1066_ds_Ven_w2[[2]])>Q & na.omit(t1066_ds_Ven_w2[[2]])<900), sum(na.omit(t1066_ds_Ven_w2[[2]])==999))
Dichotomous <- table(t1066_ds_Ven_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL Venezuela w2, echo=FALSE}
label(t1066_ds_Ven_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_Ven_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_Ven_w2', t1066_ds_Ven_w2)
#opal.symbol_import(o,'t1066_ds_Ven_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_Ven_w2
save(cog_imm, file = "../RData/Ven_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_Ven_w2 <- t1066_ds_Ven_w2
t1066_m_ds_Ven_w2$cog_imm <- car::recode(t1066_m_ds_Ven_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_Ven_w2$cog_imm_c <- car::recode(t1066_m_ds_Ven_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w2', t1066_m_ds_Ven_w2)
#opal.symbol_import(o,'t1066_m_ds_Ven_w2', project='_Athlos_Harm_Dataset')
```



## Urban Peru

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanPeru-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign UrbanPeru w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w1_cog_imm','10-66.1066-UrbanPeru-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_UrbanPeru_w1_cog_imm <- opal.execute(o,'s1066_UrbanPeru_w1_cog_imm')
```

```{r local UrbanPeru w1, echo=FALSE}
vari <- s1066_UrbanPeru_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanPeru_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanPeru w1}
##cog_imm_c
t1066_ds_UP_w1 <- tibble(id=s1066_UrbanPeru_w1_cog_imm$id)
t1066_ds_UP_w1$cog_imm_c <- car::recode(s1066_UrbanPeru_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_UP_w1$cog_imm_c <- labelled(t1066_ds_UP_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UP_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UP_w1$cog_imm <- car::recode(t1066_ds_UP_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UP_w1$cog_imm <- labelled(t1066_ds_UP_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w1, echo=FALSE}
vari <- t1066_ds_UP_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UP_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UP_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UP_w1[[2]])<=Q), sum(na.omit(t1066_ds_UP_w1[[2]])>Q & na.omit(t1066_ds_UP_w1[[2]])<900))
Dichotomous <- table(t1066_ds_UP_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanPeru w1, echo=FALSE}
label(t1066_ds_UP_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UP_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UP_w1', t1066_ds_UP_w1)
#opal.symbol_import(o,'t1066_ds_UP_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UP_w1
save(cog_imm, file = "../RData/UP_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UP_w1 <- t1066_ds_UP_w1
t1066_m_ds_UP_w1$cog_imm <- car::recode(t1066_m_ds_UP_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UP_w1$cog_imm_c <- car::recode(t1066_m_ds_UP_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w1', t1066_m_ds_UP_w1)
#opal.symbol_import(o,'t1066_m_ds_UP_w1', project='_Athlos_Harm_Dataset')
```




### Wave 2

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanPeru-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign UrbanPeru w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w2_cog_imm','10-66.1066-UrbanPeru-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_UrbanPeru_w2_cog_imm <- opal.execute(o,'s1066_UrbanPeru_w2_cog_imm')
```

```{r local UrbanPeru w2, echo=FALSE}
vari <- s1066_UrbanPeru_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanPeru_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanPeru w2}
##cog_imm_c
t1066_ds_UP_w2 <- tibble(id=s1066_UrbanPeru_w2_cog_imm$id)
t1066_ds_UP_w2$cog_imm_c <-  car::recode(s1066_UrbanPeru_w2_cog_imm$f_LEARN1,"NA='999'")
t1066_ds_UP_w2$cog_imm_c <- labelled(t1066_ds_UP_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UP_w2$cog_imm_c, "999=NA "), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UP_w2$cog_imm <- car::recode(t1066_ds_UP_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UP_w2$cog_imm <- labelled(t1066_ds_UP_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w2, echo=FALSE}
vari <- t1066_ds_UP_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UP_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UP_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UP_w2[[2]])<=Q), sum(na.omit(t1066_ds_UP_w2[[2]])>Q & na.omit(t1066_ds_UP_w2[[2]])<900))
Dichotomous <- table(t1066_ds_UP_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanPeru w2, echo=FALSE}
label(t1066_ds_UP_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UP_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UP_w2', t1066_ds_UP_w2)
#opal.symbol_import(o,'t1066_ds_UP_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UP_w2
save(cog_imm, file = "../RData/UP_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UP_w2 <- t1066_ds_UP_w2
t1066_m_ds_UP_w2$cog_imm <- car::recode(t1066_m_ds_UP_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UP_w2$cog_imm_c <- car::recode(t1066_m_ds_UP_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w2', t1066_m_ds_UP_w2)
#opal.symbol_import(o,'t1066_m_ds_UP_w2', project='_Athlos_Harm_Dataset')
```




## Rural Peru

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralPeru-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralPeru w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralPeru_w1_cog_imm','10-66.1066-RuralPeru-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_RuralPeru_w1_cog_imm <- opal.execute(o,'s1066_RuralPeru_w1_cog_imm')
```

```{r local RuralPeru w1, echo=FALSE}
vari <- s1066_RuralPeru_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralPeru_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralPeru w1}
##cog_imm_c
t1066_ds_RP_w1 <- tibble(id=s1066_RuralPeru_w1_cog_imm$id)
t1066_ds_RP_w1$cog_imm_c <- car::recode(s1066_RuralPeru_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_RP_w1$cog_imm_c <- labelled(t1066_ds_RP_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RP_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RP_w1$cog_imm <- car::recode(t1066_ds_RP_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RP_w1$cog_imm <- labelled(t1066_ds_RP_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w1, echo=FALSE}
vari <- t1066_ds_RP_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RP_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RP_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RP_w1[[2]])<=Q), sum(na.omit(t1066_ds_RP_w1[[2]])>Q & na.omit(t1066_ds_RP_w1[[2]])<900))
Dichotomous <- table(t1066_ds_RP_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralPeru w1, echo=FALSE}
label(t1066_ds_RP_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RP_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RP_w1', t1066_ds_RP_w1)
#opal.symbol_import(o,'t1066_ds_RP_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RP_w1
save(cog_imm, file = "../RData/RP_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RP_w1 <- t1066_ds_RP_w1
t1066_m_ds_RP_w1$cog_imm <- car::recode(t1066_m_ds_RP_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RP_w1$cog_imm_c <- car::recode(t1066_m_ds_RP_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w1', t1066_m_ds_RP_w1)
#opal.symbol_import(o,'t1066_m_ds_RP_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralPeru-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralPeru w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralPeru_w2_cog_imm','10-66.1066-RuralPeru-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_RuralPeru_w2_cog_imm <- opal.execute(o,'s1066_RuralPeru_w2_cog_imm')
```

```{r local RuralPeru w2, echo=FALSE}
vari <- s1066_RuralPeru_w2_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralPeru_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralPeru w2}
##cog_imm_c
t1066_ds_RP_w2 <- tibble(id=s1066_RuralPeru_w2_cog_imm$id)
t1066_ds_RP_w2$cog_imm_c <-  car::recode(s1066_RuralPeru_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_RP_w2$cog_imm_c <- labelled(t1066_ds_RP_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RP_w2$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RP_w2$cog_imm <- car::recode(t1066_ds_RP_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RP_w2$cog_imm <- labelled(t1066_ds_RP_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w2, echo=FALSE}
vari <- t1066_ds_RP_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RP_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RP_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RP_w2[[2]])<=Q), sum(na.omit(t1066_ds_RP_w2[[2]])>Q & na.omit(t1066_ds_RP_w2[[2]])<900))
Dichotomous <- table(t1066_ds_RP_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralPeru w2, echo=FALSE}
label(t1066_ds_RP_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RP_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RP_w2', t1066_ds_RP_w2)
#opal.symbol_import(o,'t1066_ds_RP_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RP_w2
save(cog_imm, file = "../RData/RP_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RP_w2 <- t1066_ds_RP_w2
t1066_m_ds_RP_w2$cog_imm <- car::recode(t1066_m_ds_RP_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RP_w2$cog_imm_c <- car::recode(t1066_m_ds_RP_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w2', t1066_m_ds_RP_w2)
#opal.symbol_import(o,'t1066_m_ds_RP_w2', project='_Athlos_Harm_Dataset')
```



## Urban Mexico

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanMexico-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |





```{r assign UrbanMexico w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w1_cog_imm','10-66.1066-UrbanMexico-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_UrbanMexico_w1_cog_imm <- opal.execute(o,'s1066_UrbanMexico_w1_cog_imm')
```

```{r local UrbanMexico w1, echo=FALSE}
vari <- s1066_UrbanMexico_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanMexico_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanMexico w1}
##cog_imm_c
t1066_ds_UM_w1 <- tibble(id=s1066_UrbanMexico_w1_cog_imm$id)
t1066_ds_UM_w1$cog_imm_c <- car::recode(s1066_UrbanMexico_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_UM_w1$cog_imm_c <- labelled(t1066_ds_UM_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UM_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UM_w1$cog_imm <- car::recode(t1066_ds_UM_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UM_w1$cog_imm <- labelled(t1066_ds_UM_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w1, echo=FALSE}
vari <- t1066_ds_UM_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UM_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UM_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UM_w1[[2]])<=Q), sum(na.omit(t1066_ds_UM_w1[[2]])>Q & na.omit(t1066_ds_UM_w1[[2]])<900))
Dichotomous <- table(t1066_ds_UM_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanMexico w1, echo=FALSE}
label(t1066_ds_UM_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UM_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UM_w1', t1066_ds_UM_w1)
#opal.symbol_import(o,'t1066_ds_UM_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UM_w1
save(cog_imm, file = "../RData/UM_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UM_w1 <- t1066_ds_UM_w1
t1066_m_ds_UM_w1$cog_imm <- car::recode(t1066_m_ds_UM_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UM_w1$cog_imm_c <- car::recode(t1066_m_ds_UM_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w1', t1066_m_ds_UM_w1)
#opal.symbol_import(o,'t1066_m_ds_UM_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-UrbanMexico-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign UrbanMexico w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w2_cog_imm','10-66.1066-UrbanMexico-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_UrbanMexico_w2_cog_imm <- opal.execute(o,'s1066_UrbanMexico_w2_cog_imm')
```

```{r local UrbanMexico w2, echo=FALSE}
vari <- s1066_UrbanMexico_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_UrbanMexico_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo UrbanMexico w2}
##cog_imm_c
t1066_ds_UM_w2 <- tibble(id=s1066_UrbanMexico_w2_cog_imm$id)
t1066_ds_UM_w2$cog_imm_c <-  car::recode(s1066_UrbanMexico_w2_cog_imm$f_LEARN1,"NA='999'")
t1066_ds_UM_w2$cog_imm_c <- labelled(t1066_ds_UM_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_UM_w2$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_UM_w2$cog_imm <- car::recode(t1066_ds_UM_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_UM_w2$cog_imm <- labelled(t1066_ds_UM_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w2, echo=FALSE}
vari <- t1066_ds_UM_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_UM_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_UM_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_UM_w2[[2]])<=Q), sum(na.omit(t1066_ds_UM_w2[[2]])>Q & na.omit(t1066_ds_UM_w2[[2]])<900), sum(na.omit(t1066_ds_UM_w2[[2]])==999))
Dichotomous <- table(t1066_ds_UM_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1","NA->999") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL UrbanMexico w2, echo=FALSE}
label(t1066_ds_UM_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_UM_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_UM_w2', t1066_ds_UM_w2)
#opal.symbol_import(o,'t1066_ds_UM_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_UM_w2
save(cog_imm, file = "../RData/UM_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_UM_w2 <- t1066_ds_UM_w2
t1066_m_ds_UM_w2$cog_imm <- car::recode(t1066_m_ds_UM_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_UM_w2$cog_imm_c <- car::recode(t1066_m_ds_UM_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w2', t1066_m_ds_UM_w2)
#opal.symbol_import(o,'t1066_m_ds_UM_w2', project='_Athlos_Harm_Dataset')
```



## Rural Mexico

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralMexico-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralMexico w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralMexico_w1_cog_imm','10-66.1066-RuralMexico-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_RuralMexico_w1_cog_imm <- opal.execute(o,'s1066_RuralMexico_w1_cog_imm')
```

```{r local RuralMexico w1, echo=FALSE}
vari <- s1066_RuralMexico_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralMexico_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralMexico w1}
##cog_imm_c
t1066_ds_RM_w1 <- tibble(id=s1066_RuralMexico_w1_cog_imm$id)
t1066_ds_RM_w1$cog_imm_c <- car::recode(s1066_RuralMexico_w1_cog_imm$LEARN1, "NA=999")
t1066_ds_RM_w1$cog_imm_c <- labelled(t1066_ds_RM_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RM_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RM_w1$cog_imm <- car::recode(t1066_ds_RM_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RM_w1$cog_imm <- labelled(t1066_ds_RM_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w1, echo=FALSE}
vari <- t1066_ds_RM_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RM_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RM_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RM_w1[[2]])<=Q), sum(na.omit(t1066_ds_RM_w1[[2]])>Q & na.omit(t1066_ds_RM_w1[[2]])<900))
Dichotomous <- table(t1066_ds_RM_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralMexico w1, echo=FALSE}
label(t1066_ds_RM_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RM_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RM_w1', t1066_ds_RM_w1)
#opal.symbol_import(o,'t1066_ds_RM_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RM_w1
save(cog_imm, file = "../RData/RM_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RM_w1 <- t1066_ds_RM_w1
t1066_m_ds_RM_w1$cog_imm <- car::recode(t1066_m_ds_RM_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RM_w1$cog_imm_c <- car::recode(t1066_m_ds_RM_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w1', t1066_m_ds_RM_w1)
#opal.symbol_import(o,'t1066_m_ds_RM_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-RuralMexico-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign RuralMexico w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_RuralMexico_w2_cog_imm','10-66.1066-RuralMexico-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_RuralMexico_w2_cog_imm <- opal.execute(o,'s1066_RuralMexico_w2_cog_imm')
```

```{r local RuralMexico w2, echo=FALSE}
vari <- s1066_RuralMexico_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_RuralMexico_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo RuralMexico w2}
##cog_imm_c
t1066_ds_RM_w2 <- tibble(id=s1066_RuralMexico_w2_cog_imm$id)
t1066_ds_RM_w2$cog_imm_c <-  car::recode(s1066_RuralMexico_w2_cog_imm$f_LEARN1,"NA=999")
t1066_ds_RM_w2$cog_imm_c <- labelled(t1066_ds_RM_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_RM_w2$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_RM_w2$cog_imm <- car::recode(t1066_ds_RM_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_RM_w2$cog_imm <- labelled(t1066_ds_RM_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w2, echo=FALSE}
vari <- t1066_ds_RM_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_RM_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_RM_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_RM_w2[[2]])<=Q), sum(na.omit(t1066_ds_RM_w2[[2]])>Q & na.omit(t1066_ds_RM_w2[[2]])<900), sum(na.omit(t1066_ds_RM_w2[[2]])==999))
Dichotomous <- table(t1066_ds_RM_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:1->0","2:10->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL RuralMexico w2, echo=FALSE}
label(t1066_ds_RM_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_RM_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_RM_w2', t1066_ds_RM_w2)
#opal.symbol_import(o,'t1066_ds_RM_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_RM_w2
save(cog_imm, file = "../RData/RM_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_RM_w2 <- t1066_ds_RM_w2
t1066_m_ds_RM_w2$cog_imm <- car::recode(t1066_m_ds_RM_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_RM_w2$cog_imm_c <- car::recode(t1066_m_ds_RM_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w2', t1066_m_ds_RM_w2)
#opal.symbol_import(o,'t1066_m_ds_RM_w2', project='_Athlos_Harm_Dataset')
```



## Puerto Rico

### Wave 1 

#### Study-specific variable description



| **Name** | `LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-PuertoRico-Baseline`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |





```{r assign PuertoRico w1, echo=FALSE}
opal.assign.table.tibble(o, 's1066_PuertoRico_w1_cog_imm','10-66.1066-PuertoRico-Baseline', variables=list('LEARN1'), missings = TRUE)
s1066_PuertoRico_w1_cog_imm <- opal.execute(o,'s1066_PuertoRico_w1_cog_imm')
```

```{r local PuertoRico w1, echo=FALSE}
vari <- s1066_PuertoRico_w1_cog_imm$LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_PuertoRico_w1_cog_imm, aes(x=factor(LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo PuertoRico w1}
##cog_imm_c
t1066_ds_PR_w1 <- tibble(id=s1066_PuertoRico_w1_cog_imm$id)
t1066_ds_PR_w1$cog_imm_c <- car::recode(s1066_PuertoRico_w1_cog_imm$LEARN1, "NA='999'")
t1066_ds_PR_w1$cog_imm_c <- labelled(t1066_ds_PR_w1$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_PR_w1$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_PR_w1$cog_imm <- car::recode(t1066_ds_PR_w1[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_PR_w1$cog_imm <- labelled(t1066_ds_PR_w1[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w1, echo=FALSE}
vari <- t1066_ds_PR_w1$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_PR_w1, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_PR_w1$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w1, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w1, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_PR_w1[[2]])<=Q), sum(na.omit(t1066_ds_PR_w1[[2]])>Q & na.omit(t1066_ds_PR_w1[[2]])<900))
Dichotomous <- table(t1066_ds_PR_w1[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:2->0","3:10->1") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL PuertoRico w1, echo=FALSE}
label(t1066_ds_PR_w1$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_PR_w1$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_PR_w1', t1066_ds_PR_w1)
#opal.symbol_import(o,'t1066_ds_PR_w1', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_PR_w1
save(cog_imm, file = "../RData/PR_w1/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_PR_w1 <- t1066_ds_PR_w1
t1066_m_ds_PR_w1$cog_imm <- car::recode(t1066_m_ds_PR_w1$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_PR_w1$cog_imm_c <- car::recode(t1066_m_ds_PR_w1$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w1', t1066_m_ds_PR_w1)
#opal.symbol_import(o,'t1066_m_ds_PR_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description



| **Name** | `f_LEARN1`|
|-|-|
| **Label** | `10 word list learning - instant recall - first trial`|
| **Table name** |`1066-PuertoRico-Followup`|
| **Categories** |`Continuous Variable 0-10`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign PuertoRico w2, echo=FALSE}
opal.assign.table.tibble(o, 's1066_PuertoRico_w2_cog_imm','10-66.1066-PuertoRico-Followup', variables=list('f_LEARN1'), missings = TRUE)
s1066_PuertoRico_w2_cog_imm <- opal.execute(o,'s1066_PuertoRico_w2_cog_imm')
```

```{r local PuertoRico w2, echo=FALSE}
vari <- s1066_PuertoRico_w2_cog_imm$f_LEARN1
kable(Continuous_summary(var = vari, missing_values = NA)[3], caption = "Immediate recall continuous")
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(s1066_PuertoRico_w2_cog_imm, aes(x=factor(f_LEARN1))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable `cog_imm_c` from the study-specific variable the missing values have to be recoded as follows:

* `NA into 999`

To compute the harmonized variable `cog_imm` from `cog_imm_c` it has to be recoded as follows:

* `cog_imm_c <=25% into 0`
* `cog_imm_c >25% into 1`

**R script**

```{r harmo PuertoRico w2}
##cog_imm_c
t1066_ds_PR_w2 <- tibble(id=s1066_PuertoRico_w2_cog_imm$id)
t1066_ds_PR_w2$cog_imm_c <-  car::recode(s1066_PuertoRico_w2_cog_imm$f_LEARN1,"NA='999'")
t1066_ds_PR_w2$cog_imm_c <- labelled(t1066_ds_PR_w2$cog_imm_c, labels = c(Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))

##cog_imm
Q <- quantile(car::recode(t1066_ds_PR_w2$cog_imm_c, "999=NA"), probs = 1/4, na.rm = TRUE, names = FALSE)

t1066_ds_PR_w2$cog_imm <- car::recode(t1066_ds_PR_w2[[2]], "0:Q=0; (Q+1):10=1")
t1066_ds_PR_w2$cog_imm <- labelled(t1066_ds_PR_w2[[3]], labels = c("<=25%"=0, ">25%"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w2, echo=FALSE}
vari <- t1066_ds_PR_w2$cog_imm_c
kable(Continuous_summary(var = vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Immediate recall continuous")
kable(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Values")
pander(Continuous_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))$summary, caption = "Summary")
ggplot(t1066_ds_PR_w2, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- t1066_ds_PR_w2$cog_imm
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "Cognition - Immediate recall")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w2, aes(x=factor(cog_imm))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Cognition - Immediate recall") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w2, echo=FALSE}
Continuous <- c(sum(na.omit(t1066_ds_PR_w2[[2]])<=Q), sum(na.omit(t1066_ds_PR_w2[[2]])>Q & na.omit(t1066_ds_PR_w2[[2]])<900), sum(na.omit(t1066_ds_PR_w2[[2]])==999))
Dichotomous <- table(t1066_ds_PR_w2[[3]], useNA = "ifany")
C <- rbind(Continuous,Dichotomous)
colnames(C) <- c("0:3->0","4:10->1","NA->999") 
kable(C, caption = "Continuous vs Dichotomous")
```

```{r importOPAL PuertoRico w2, echo=FALSE}
label(t1066_ds_PR_w2$cog_imm_c) <- ds_label_cog_imm_c
label(t1066_ds_PR_w2$cog_imm) <- ds_label_cog_imm
#opal.assign.data(o, 't1066_ds_PR_w2', t1066_ds_PR_w2)
#opal.symbol_import(o,'t1066_ds_PR_w2', project='_Athlos_Harm_Dataset')
cog_imm <- t1066_ds_PR_w2
save(cog_imm, file = "../RData/PR_w2/cog_imm.RData")
rm(cog_imm)

t1066_m_ds_PR_w2 <- t1066_ds_PR_w2
t1066_m_ds_PR_w2$cog_imm <- car::recode(t1066_m_ds_PR_w2$cog_imm, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
t1066_m_ds_PR_w2$cog_imm_c <- car::recode(t1066_m_ds_PR_w2$cog_imm_c, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w2', t1066_m_ds_PR_w2)
#opal.symbol_import(o,'t1066_m_ds_PR_w2', project='_Athlos_Harm_Dataset')
```








```{r helpfunctions, echo=F}


labelling <- function(l.hds,m.hds,vbl_name){
  
  # Labelling of the tibbles with categorical data and creating new tibbles with all missings recodified as NA

  for(name in names(l.hds)) {
    # In the aux_object we copy the old tibble to recodify all missing values as NA.
    aux_object <- l.hds[[name]]
    # Labelling of variables
    label(l.hds[[name]][[vbl_name]]) <- label(aux_object[[vbl_name]]) <- ds_label_cog_imm
    # Labelling of categories (for continues variables, only missing values)
    l.hds[[name]][[vbl_name]] <- labelled(l.hds[[name]][[vbl_name]], labels = cat_label)
    aux_object[[vbl_name]] <- car::recode(aux_object[[vbl_name]], "miss_values_vector=NA")
    # Labelling of categories (for categorical variables, only non-missing values)
    aux_object[[vbl_name]] <- labelled(aux_object[[vbl_name]], labels = cat_label[1:2])
  # Saving the recodified tibble in list m.hds
    m.hds[[name]] <- aux_object
    rm(aux_object)
  }
  return(list(l.hds,m.hds))

}


labelling_c <- function(l.hds,m.hds,vbl_name){
  
  # Labelling of the tibbles and creating new tibbles with all missings recodified as NA

  for(name in names(l.hds)) {
    # In the aux_object we copy the old tibble to recodify all missing values as NA.
    aux_object <- l.hds[[name]]
    # Labelling of variables
    label(l.hds[[name]][[vbl_name]]) <- label(aux_object[[vbl_name]]) <- ds_label_cog_imm_c
    # Labelling of categories (for continues variables, only missing values)
    l.hds[[name]][[vbl_name]] <- labelled(l.hds[[name]][[vbl_name]], labels = cont_label)
    aux_object[[vbl_name]] <- car::recode(aux_object[[vbl_name]], "miss_values_vector=NA")
    # Saving the recodified tibble in list m.hds
    m.hds[[name]] <- aux_object
    rm(aux_object)
  }
  return(list(l.hds,m.hds))

}


# Creation of summary tables for categorical data

summaries <- function(l.hds,m.hds,lnames,vbl_name){

  # Creation of columns with categories and labels
  t.hds <- frq(l.hds[[1]][vbl_name])[[1]][,c(1,2)] 
  # For each wave/population in l.hds, add the correponding values
  for (i in seq_along(l.hds)){
    t.hds[2+i] <- frq(l.hds[[i]][vbl_name])[[1]][,4] 
  }
  # Add sample size for each wave/population
  t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
  )
  # Add wave/population names
  names(t.hds)<-c("val", "label",lnames)
  return(t.hds)
  
}


# Creation of summary tables for continuous data

summaries_c <- function(l.hds,m.hds,lnames,vbl_name){

  # Creation of column with summary table categories
  t.summ <- summary(m.hds[[1]][vbl_name])[1:6]
  # Adding of missing/no-missing values categories
  t.hds <- c(substr(t.summ,1,regexpr(":", t.summ, fixed=T)-1),labels(Continuous_summary(l.hds[[1]][[vbl_name]], missing_values = miss_values_vector)$values_table)[[2]])
  # For each wave/population in l.hds, add the correponding values
  for (i in seq_along(l.hds)){
    # First, summary values
    t.summ <- summary(m.hds[[i]][vbl_name])[1:6]
    # Next, missing/no-missing values
    t.hds <- cbind(t.hds,c(as.numeric(substr(t.summ,regexpr(":", t.summ, fixed=T)+1,nchar(t.summ))),as.numeric(Continuous_summary(l.hds[[i]][[vbl_name]],missing_values = miss_values_vector)$values_table[1,])))
  }
  # Add sample size for each wave/population
  t.hds <- rbind(t.hds,c("sample size", sapply(l.hds,function(wave) length(wave[[1]]))))
  # Add wave/population names
  dimnames(t.hds)[[2]] <- c(dimnames(summary(m.hds[[1]][vbl_name]))[[2]],lnames)
  return(t.hds)
  
}


```


## Descriptive statistics of the harmonised variable `cog_imm` accross populations and waves

Percentages of categories in each harmonised variable:






```{r summ, echo=F}

# All study waves and populations with abbreviated and descriptive names

b1066.cw <- list(cuba_w1 = c("cuba_w1","Cuba w1"), india_w1 = c("india_w1","India w1"), UCh_w1 = c("UCh_w1","Urban China w1"), RCh_w1 = c("RCh_w1","Rural China w1"), DR_w1 = c("DR_w1","Dominican Republic w1"), Ven_w1 = c("Ven_w1","Venezuela w1"), UP_w1 = c("UP_w1","Urban Peru w1"), RP_w1 = c("RP_w1","Rural Peru w1"), UM_w1 = c("UM_w1","Urban Mexico w1"), RM_w1 = c("RM_w1","Rural Mexico w1"), PR_w1 = c("PR_w1","Puerto Rico w1"))

f1066.cw <- list(cuba_w2 = c("cuba_w2","Cuba w2"), UCh_w2 = c("UCh_w2","Urban China w2"), RCh_w2 = c("RCh_w2","Rural China w2"), DR_w2 = c("DR_w2","Dominican Republic w2"), Ven_w2 = c("Ven_w2","Venezuela w2"), UP_w2 = c("UP_w2","Urban Peru w2"), RP_w2 = c("RP_w2","Rural Peru w2"), UM_w2 = c("UM_w2","Urban Mexico w2"), RM_w2 = c("RM_w2","Rural Mexico w2"), PR_w2 = c("PR_w2","Puerto Rico w2"))


# Consider only harmonised waves
l.hds <- lapply(b1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)

if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl)
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_cog_imm))
}




# Consider only harmonised waves
l.hds <- lapply(f1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl)
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_cog_imm))
}


```




## Summary of descriptive statistics of the harmonised variable `cog_imm_c` accross populations and waves





```{r summ_c, echo=F}

# When there are two variables in a table, one should check if exists the variable which is wanted to be summarised. In this case it is not needed, since continuous variable exists if and only if categorical variable exists.

# Consider only harmonised waves
l.hds <- lapply(b1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)

if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c)
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_cog_imm_c))
}




# Consider only harmonised waves
l.hds <- lapply(f1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c)
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_cog_imm_c))
}


```



# Quality estimation

No comments



```{r closeRsession, echo=FALSE}
opal.logout(o)
```
