---
title: "Orientation in time"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->

```{r setup, include=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_iago.r")
```
<!-- ########################################################## --> 



# Description of DataSchema variable

The description of harmonised variable is the following:


* Short name: `orientation`
* Variable label: `Orientation in time`
* Variable description: `Difficulties for orientation in time, evaluated by a set of questions about the date and day of the week.`
* Domain: `Health status and functional limitations`
* Value type: `categorical`
* Category coding:

**Code** | **Category Label**
-------- | ------------------
0        | Yes
1        | No

* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing


# Data process


## Cuba

### Wave 1 

#### Study-specific variable description


| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign cuba w1, echo=F}
opal.assign.table.tibble(o, 's1066_cuba_w1_orientation','10-66.1066-Cuba-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local cuba w1, echo=F}
s1066_cuba_w1_orientation <- opal.execute(o,'s1066_cuba_w1_orientation')
vari <- s1066_cuba_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo cuba w1}
t1066_ds_cuba_w1 <- tibble(id=s1066_cuba_w1_orientation$id)
t1066_ds_cuba_w1$orientation <- rep(999,length(t1066_ds_cuba_w1$id))
t1066_ds_cuba_w1$orientation[((s1066_cuba_w1_orientation$DAY==1)&(s1066_cuba_w1_orientation$MONTH==1)&(s1066_cuba_w1_orientation$YEAR==1)&(s1066_cuba_w1_orientation$SEASON==1))]<-1
t1066_ds_cuba_w1$orientation[((s1066_cuba_w1_orientation$DAY==0)|(s1066_cuba_w1_orientation$MONTH==0)|(s1066_cuba_w1_orientation$YEAR==0)|(s1066_cuba_w1_orientation$SEASON==0))]<- 0
t1066_ds_cuba_w1$orientation <- labelled(t1066_ds_cuba_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript cuba w1, echo=F}
vari <- t1066_ds_cuba_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#ggplot(t1066_ds_cuba_w1$orientation, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation cuba w1, echo=F}
AfterH <- table(t1066_ds_cuba_w1$orientation)
combi<-sum(na.omit((s1066_cuba_w1_orientation$DAY==1)&(s1066_cuba_w1_orientation$MONTH==1)&(s1066_cuba_w1_orientation$YEAR==1)&(s1066_cuba_w1_orientation$SEASON==1)))

BeforeH <- c(length(s1066_cuba_w1_orientation$DAY)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL cuba w1, echo=FALSE}

label(t1066_ds_cuba_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_cuba_w1', t1066_ds_cuba_w1)
#opal.symbol_import(o,'t1066_ds_cuba_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_cuba_w1
save(orientation, file = "../RData/cuba_w1/orientation.RData")

t1066_m_ds_cuba_w1 <- t1066_ds_cuba_w1
t1066_m_ds_cuba_w1$orientation <- car::recode(t1066_m_ds_cuba_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w1', t1066_m_ds_cuba_w1)
#opal.symbol_import(o,'t1066_m_ds_cuba_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description

| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Cuba-Followup`|`1066-Cuba-Followup`|`1066-Cuba-Followup`|`1066-Cuba-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign cuba w2, echo=F}
opal.assign.table.tibble(o, 's1066_cuba_w2_orientation','10-66.1066-Cuba-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local cuba w2, echo=F}
s1066_cuba_w2_orientation <- opal.execute(o,'s1066_cuba_w2_orientation')
vari <- s1066_cuba_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo cuba w2}
t1066_ds_cuba_w2 <- tibble(id=s1066_cuba_w2_orientation$id)
t1066_ds_cuba_w2$orientation <- rep( 999,length(t1066_ds_cuba_w2$id))
t1066_ds_cuba_w2$orientation[((s1066_cuba_w2_orientation$f_DAY==1)&(s1066_cuba_w2_orientation$f_MONTH==1)&(s1066_cuba_w2_orientation$f_YEAR==1)&(s1066_cuba_w2_orientation$f_SEASON==1))]<-1
t1066_ds_cuba_w2$orientation[((s1066_cuba_w2_orientation$f_DAY==0)|(s1066_cuba_w2_orientation$f_MONTH==0)|(s1066_cuba_w2_orientation$f_YEAR==0)|(s1066_cuba_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_cuba_w2$orientation <- labelled(t1066_ds_cuba_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript cuba w2, echo=F}
vari <- t1066_ds_cuba_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation cuba w2, echo=F}
AfterH <- table(t1066_ds_cuba_w2$orientation)
combi<-sum(na.omit((s1066_cuba_w2_orientation$f_DAY==1)&(s1066_cuba_w2_orientation$f_MONTH==1)&(s1066_cuba_w2_orientation$f_YEAR==1)&(s1066_cuba_w2_orientation$f_SEASON==1)))
nas<-length(s1066_cuba_w2_orientation$f_YEAR)-length(na.omit(s1066_cuba_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_cuba_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```






```{r importOPAL cuba w2, echo=FALSE}

label(t1066_ds_cuba_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_cuba_w2', t1066_ds_cuba_w2)
#opal.symbol_import(o,'t1066_ds_cuba_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_cuba_w2
save(orientation, file = "../RData/cuba_w2/orientation.RData")

t1066_m_ds_cuba_w2 <- t1066_ds_cuba_w2
t1066_m_ds_cuba_w2$orientation <- car::recode(t1066_m_ds_cuba_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w2', t1066_m_ds_cuba_w2)
#opal.symbol_import(o,'t1066_m_ds_cuba_w2', project='_Athlos_Harm_Dataset')
```



## India

### Wave 1 

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-India-Baseline`|`1066-India-Baseline`|`1066-India-Baseline`|`1066-India-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign India w1, echo=F}
opal.assign.table.tibble(o, 's1066_India_w1_orientation','10-66.1066-India-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local India w1, echo=F}
s1066_India_w1_orientation <-opal.execute(o,'s1066_India_w1_orientation')
vari <- s1066_India_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_India_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_India_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_India_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo India w1}
t1066_ds_india_w1 <- tibble(id=s1066_India_w1_orientation$id)
t1066_ds_india_w1$orientation <- rep( 999,length(t1066_ds_india_w1$id))
t1066_ds_india_w1$orientation[((s1066_India_w1_orientation$DAY==1)&(s1066_India_w1_orientation$MONTH==1)&(s1066_India_w1_orientation$YEAR==1)&(s1066_India_w1_orientation$SEASON==1))]<-1
t1066_ds_india_w1$orientation[((s1066_India_w1_orientation$DAY==0)|(s1066_India_w1_orientation$MONTH==0)|(s1066_India_w1_orientation$YEAR==0)|(s1066_India_w1_orientation$SEASON==0))]<- 0
t1066_ds_india_w1$orientation <- labelled(t1066_ds_india_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript India w1, echo=F}
vari <- t1066_ds_india_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_india_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation India w1, echo=F}
AfterH <- table(t1066_ds_india_w1$orientation)
combi<-sum(na.omit((s1066_India_w1_orientation$DAY==1)&(s1066_India_w1_orientation$MONTH==1)&(s1066_India_w1_orientation$YEAR==1)&(s1066_India_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_India_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL India w1, echo=FALSE}

label(t1066_ds_india_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_india_w1', t1066_ds_india_w1)
#opal.symbol_import(o,'t1066_ds_india_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_india_w1
save(orientation, file = "../RData/india_w1/orientation.RData")

t1066_m_ds_india_w1 <- t1066_ds_india_w1
t1066_m_ds_india_w1$orientation <- car::recode(t1066_m_ds_india_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_india_w1', t1066_m_ds_india_w1)
#opal.symbol_import(o,'t1066_m_ds_india_w1', project='_Athlos_Harm_Dataset')
```



## UrbanChina

### Wave 1 

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign UrbanChina w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanChina_w1_orientation','10-66.1066-UrbanChina-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanChina w1, echo=F}
s1066_UrbanChina_w1_orientation <-opal.execute(o,'s1066_UrbanChina_w1_orientation')
vari <- s1066_UrbanChina_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanChina w1}
t1066_ds_UCh_w1 <- tibble(id=s1066_UrbanChina_w1_orientation$id)
t1066_ds_UCh_w1$orientation <- rep( 999,length(t1066_ds_UCh_w1$id))
t1066_ds_UCh_w1$orientation[((s1066_UrbanChina_w1_orientation$DAY==1)&(s1066_UrbanChina_w1_orientation$MONTH==1)&(s1066_UrbanChina_w1_orientation$YEAR==1)&(s1066_UrbanChina_w1_orientation$SEASON==1))]<-1
t1066_ds_UCh_w1$orientation[((s1066_UrbanChina_w1_orientation$DAY==0)|(s1066_UrbanChina_w1_orientation$MONTH==0)|(s1066_UrbanChina_w1_orientation$YEAR==0)|(s1066_UrbanChina_w1_orientation$SEASON==0))]<- 0
t1066_ds_UCh_w1$orientation <- labelled(t1066_ds_UCh_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w1, echo=F}
vari <- t1066_ds_UCh_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w1, echo=F}
AfterH <- table(t1066_ds_UCh_w1$orientation)
combi<-sum(na.omit((s1066_UrbanChina_w1_orientation$DAY==1)&(s1066_UrbanChina_w1_orientation$MONTH==1)&(s1066_UrbanChina_w1_orientation$YEAR==1)&(s1066_UrbanChina_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanChina_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanChina w1, echo=FALSE}

label(t1066_ds_UCh_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UCh_w1', t1066_ds_UCh_w1)
#opal.symbol_import(o,'t1066_ds_UCh_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UCh_w1
save(orientation, file = "../RData/UCh_w1/orientation.RData")

t1066_m_ds_UCh_w1 <- t1066_ds_UCh_w1
t1066_m_ds_UCh_w1$orientation <- car::recode(t1066_m_ds_UCh_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w1', t1066_m_ds_UCh_w1)
#opal.symbol_import(o,'t1066_m_ds_UCh_w1', project='_Athlos_Harm_Dataset')
```




### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign UrbanChina w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanChina_w2_orientation','10-66.1066-UrbanChina-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanChina w2, echo=F}
s1066_UrbanChina_w2_orientation <-opal.execute(o,'s1066_UrbanChina_w2_orientation')
vari <- s1066_UrbanChina_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanChina w2}
t1066_ds_UCh_w2 <- tibble(id=s1066_UrbanChina_w2_orientation$id)
t1066_ds_UCh_w2$orientation <- rep( 999,length(t1066_ds_UCh_w2$id))
t1066_ds_UCh_w2$orientation[((s1066_UrbanChina_w2_orientation$f_DAY==1)&(s1066_UrbanChina_w2_orientation$f_MONTH==1)&(s1066_UrbanChina_w2_orientation$f_YEAR==1)&(s1066_UrbanChina_w2_orientation$f_SEASON==1))]<-1
t1066_ds_UCh_w2$orientation[((s1066_UrbanChina_w2_orientation$f_DAY==0)|(s1066_UrbanChina_w2_orientation$f_MONTH==0)|(s1066_UrbanChina_w2_orientation$f_YEAR==0)|(s1066_UrbanChina_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_UCh_w2$orientation <- labelled(t1066_ds_UCh_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w2, echo=F}
vari <- t1066_ds_UCh_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w2, echo=F}
AfterH <- table(t1066_ds_UCh_w2$orientation)
combi<-sum(na.omit((s1066_UrbanChina_w2_orientation$f_DAY==1)&(s1066_UrbanChina_w2_orientation$f_MONTH==1)&(s1066_UrbanChina_w2_orientation$f_YEAR==1)&(s1066_UrbanChina_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_UrbanChina_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanChina w2, echo=FALSE}

label(t1066_ds_UCh_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UCh_w2', t1066_ds_UCh_w2)
#opal.symbol_import(o,'t1066_ds_UCh_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UCh_w2
save(orientation, file = "../RData/UCh_w2/orientation.RData")

t1066_m_ds_UCh_w2 <- t1066_ds_UCh_w2
t1066_m_ds_UCh_w2$orientation <- car::recode(t1066_m_ds_UCh_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w2', t1066_m_ds_UCh_w2)
#opal.symbol_import(o,'t1066_m_ds_UCh_w2', project='_Athlos_Harm_Dataset')
```


## RuralChina

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralChina w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralChina_w1_orientation','10-66.1066-RuralChina-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralChina w1, echo=F}
s1066_RuralChina_w1_orientation <-opal.execute(o,'s1066_RuralChina_w1_orientation')
vari <- s1066_RuralChina_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralChina w1}
t1066_ds_RCh_w1 <- tibble(id=s1066_RuralChina_w1_orientation$id)
t1066_ds_RCh_w1$orientation <- rep( 999,length(t1066_ds_RCh_w1$id))
t1066_ds_RCh_w1$orientation[((s1066_RuralChina_w1_orientation$DAY==1)&(s1066_RuralChina_w1_orientation$MONTH==1)&(s1066_RuralChina_w1_orientation$YEAR==1)&(s1066_RuralChina_w1_orientation$SEASON==1))]<-1
t1066_ds_RCh_w1$orientation[((s1066_RuralChina_w1_orientation$DAY==0)|(s1066_RuralChina_w1_orientation$MONTH==0)|(s1066_RuralChina_w1_orientation$YEAR==0)|(s1066_RuralChina_w1_orientation$SEASON==0))]<- 0
t1066_ds_RCh_w1$orientation <- labelled(t1066_ds_RCh_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w1, echo=F}
vari <- t1066_ds_RCh_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w1, echo=F}
AfterH <- table(t1066_ds_RCh_w1$orientation)
combi<-sum(na.omit((s1066_RuralChina_w1_orientation$DAY==1)&(s1066_RuralChina_w1_orientation$MONTH==1)&(s1066_RuralChina_w1_orientation$YEAR==1)&(s1066_RuralChina_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralChina_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL RuralChina w1, echo=FALSE}

label(t1066_ds_RCh_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RCh_w1', t1066_ds_RCh_w1)
#opal.symbol_import(o,'t1066_ds_RCh_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RCh_w1
save(orientation, file = "../RData/RCh_w1/orientation.RData")

t1066_m_ds_RCh_w1 <- t1066_ds_RCh_w1
t1066_m_ds_RCh_w1$orientation <- car::recode(t1066_m_ds_RCh_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w1', t1066_m_ds_RCh_w1)
#opal.symbol_import(o,'t1066_m_ds_RCh_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign RuralChina w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralChina_w2_orientation','10-66.1066-RuralChina-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralChina w2, echo=F}
s1066_RuralChina_w2_orientation <-opal.execute(o,'s1066_RuralChina_w2_orientation')
vari <- s1066_RuralChina_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralChina w2}
t1066_ds_RCh_w2 <- tibble(id=s1066_RuralChina_w2_orientation$id)
t1066_ds_RCh_w2$orientation <- rep( 999,length(t1066_ds_RCh_w2$id))
t1066_ds_RCh_w2$orientation[((s1066_RuralChina_w2_orientation$f_DAY==1)&(s1066_RuralChina_w2_orientation$f_MONTH==1)&(s1066_RuralChina_w2_orientation$f_YEAR==1)&(s1066_RuralChina_w2_orientation$f_SEASON==1))]<-1
t1066_ds_RCh_w2$orientation[((s1066_RuralChina_w2_orientation$f_DAY==0)|(s1066_RuralChina_w2_orientation$f_MONTH==0)|(s1066_RuralChina_w2_orientation$f_YEAR==0)|(s1066_RuralChina_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_RCh_w2$orientation <- labelled(t1066_ds_RCh_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w2, echo=F}
vari <- t1066_ds_RCh_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w2, echo=F}
AfterH <- table(t1066_ds_RCh_w2$orientation)
combi<-sum(na.omit((s1066_RuralChina_w2_orientation$f_DAY==1)&(s1066_RuralChina_w2_orientation$f_MONTH==1)&(s1066_RuralChina_w2_orientation$f_YEAR==1)&(s1066_RuralChina_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_RuralChina_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralChina w2, echo=FALSE}

label(t1066_ds_RCh_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RCh_w2', t1066_ds_RCh_w2)
#opal.symbol_import(o,'t1066_ds_RCh_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RCh_w2
save(orientation, file = "../RData/RCh_w2/orientation.RData")

t1066_m_ds_RCh_w2 <- t1066_ds_RCh_w2
t1066_m_ds_RCh_w2$orientation <- car::recode(t1066_m_ds_RCh_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w2', t1066_m_ds_RCh_w2)
#opal.symbol_import(o,'t1066_m_ds_RCh_w2', project='_Athlos_Harm_Dataset')
```


## DominicanRepublic

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign DominicanRepublic w1, echo=F}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w1_orientation','10-66.1066-DominicanRepublic-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local DominicanRepublic w1, echo=F}
s1066_DominicanRepublic_w1_orientation <-opal.execute(o,'s1066_DominicanRepublic_w1_orientation')
vari <- s1066_DominicanRepublic_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo DominicanRepublic w1}
t1066_ds_DR_w1 <- tibble(id=s1066_DominicanRepublic_w1_orientation$id)
t1066_ds_DR_w1$orientation <- rep( 999,length(t1066_ds_DR_w1$id))
t1066_ds_DR_w1$orientation[((s1066_DominicanRepublic_w1_orientation$DAY==1)&(s1066_DominicanRepublic_w1_orientation$MONTH==1)&(s1066_DominicanRepublic_w1_orientation$YEAR==1)&(s1066_DominicanRepublic_w1_orientation$SEASON==1))]<-1
t1066_ds_DR_w1$orientation[((s1066_DominicanRepublic_w1_orientation$DAY==0)|(s1066_DominicanRepublic_w1_orientation$MONTH==0)|(s1066_DominicanRepublic_w1_orientation$YEAR==0)|(s1066_DominicanRepublic_w1_orientation$SEASON==0))]<- 0
t1066_ds_DR_w1$orientation <- labelled(t1066_ds_DR_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w1, echo=F}
vari <- t1066_ds_DR_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w1, echo=F}
AfterH <- table(t1066_ds_DR_w1$orientation)
combi<-sum(na.omit((s1066_DominicanRepublic_w1_orientation$DAY==1)&(s1066_DominicanRepublic_w1_orientation$MONTH==1)&(s1066_DominicanRepublic_w1_orientation$YEAR==1)&(s1066_DominicanRepublic_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_DominicanRepublic_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL DominicanRepublic w1, echo=FALSE}

label(t1066_ds_DR_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_DR_w1', t1066_ds_DR_w1)
#opal.symbol_import(o,'t1066_ds_DR_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_DR_w1
save(orientation, file = "../RData/DR_w1/orientation.RData")

t1066_m_ds_DR_w1 <- t1066_ds_DR_w1
t1066_m_ds_DR_w1$orientation <- car::recode(t1066_m_ds_DR_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w1', t1066_m_ds_DR_w1)
#opal.symbol_import(o,'t1066_m_ds_DR_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign DominicanRepublic w2, echo=F}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w2_orientation','10-66.1066-DominicanRepublic-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local DominicanRepublic w2, echo=F}
s1066_DominicanRepublic_w2_orientation <-opal.execute(o,'s1066_DominicanRepublic_w2_orientation')
vari <- s1066_DominicanRepublic_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo DominicanRepublic w2}
t1066_ds_DR_w2 <- tibble(id=s1066_DominicanRepublic_w2_orientation$id)
t1066_ds_DR_w2$orientation <- rep( 999,length(t1066_ds_DR_w2$id))
t1066_ds_DR_w2$orientation[((s1066_DominicanRepublic_w2_orientation$f_DAY==1)&(s1066_DominicanRepublic_w2_orientation$f_MONTH==1)&(s1066_DominicanRepublic_w2_orientation$f_YEAR==1)&(s1066_DominicanRepublic_w2_orientation$f_SEASON==1))]<-1
t1066_ds_DR_w2$orientation[((s1066_DominicanRepublic_w2_orientation$f_DAY==0)|(s1066_DominicanRepublic_w2_orientation$f_MONTH==0)|(s1066_DominicanRepublic_w2_orientation$f_YEAR==0)|(s1066_DominicanRepublic_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_DR_w2$orientation <- labelled(t1066_ds_DR_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w2, echo=F}
vari <- t1066_ds_DR_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w2, echo=F}
AfterH <- table(t1066_ds_DR_w2$orientation)
combi<-sum(na.omit((s1066_DominicanRepublic_w2_orientation$f_DAY==1)&(s1066_DominicanRepublic_w2_orientation$f_MONTH==1)&(s1066_DominicanRepublic_w2_orientation$f_YEAR==1)&(s1066_DominicanRepublic_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_DominicanRepublic_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL DominicanRepublic w2, echo=FALSE}

label(t1066_ds_DR_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_DR_w2', t1066_ds_DR_w2)
#opal.symbol_import(o,'t1066_ds_DR_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_DR_w2
save(orientation, file = "../RData/DR_w2/orientation.RData")

t1066_m_ds_DR_w2 <- t1066_ds_DR_w2
t1066_m_ds_DR_w2$orientation <- car::recode(t1066_m_ds_DR_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w2', t1066_m_ds_DR_w2)
#opal.symbol_import(o,'t1066_m_ds_DR_w2', project='_Athlos_Harm_Dataset')
```


## Venezuela

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign Venezuela w1, echo=F}
opal.assign.table.tibble(o, 's1066_Venezuela_w1_orientation','10-66.1066-Venezuela-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local Venezuela w1, echo=F}
s1066_Venezuela_w1_orientation <-opal.execute(o,'s1066_Venezuela_w1_orientation')
vari <- s1066_Venezuela_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo Venezuela w1}
t1066_ds_Ven_w1 <- tibble(id=s1066_Venezuela_w1_orientation$id)
t1066_ds_Ven_w1$orientation <- rep( 999,length(t1066_ds_Ven_w1$id))
t1066_ds_Ven_w1$orientation[((s1066_Venezuela_w1_orientation$DAY==1)&(s1066_Venezuela_w1_orientation$MONTH==1)&(s1066_Venezuela_w1_orientation$YEAR==1)&(s1066_Venezuela_w1_orientation$SEASON==1))]<-1
t1066_ds_Ven_w1$orientation[((s1066_Venezuela_w1_orientation$DAY==0)|(s1066_Venezuela_w1_orientation$MONTH==0)|(s1066_Venezuela_w1_orientation$YEAR==0)|(s1066_Venezuela_w1_orientation$SEASON==0))]<- 0
t1066_ds_Ven_w1$orientation <- labelled(t1066_ds_Ven_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w1, echo=F}
vari <- t1066_ds_Ven_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w1, echo=F}
AfterH <- table(t1066_ds_Ven_w1$orientation)
combi<-sum(na.omit((s1066_Venezuela_w1_orientation$DAY==1)&(s1066_Venezuela_w1_orientation$MONTH==1)&(s1066_Venezuela_w1_orientation$YEAR==1)&(s1066_Venezuela_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_Venezuela_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```







```{r importOPAL Venezuela w1, echo=FALSE}

label(t1066_ds_Ven_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_Ven_w1', t1066_ds_Ven_w1)
#opal.symbol_import(o,'t1066_ds_Ven_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_Ven_w1
save(orientation, file = "../RData/Ven_w1/orientation.RData")

t1066_m_ds_Ven_w1 <- t1066_ds_Ven_w1
t1066_m_ds_Ven_w1$orientation <- car::recode(t1066_m_ds_Ven_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w1', t1066_m_ds_Ven_w1)
#opal.symbol_import(o,'t1066_m_ds_Ven_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign Venezuela w2, echo=F}
opal.assign.table.tibble(o, 's1066_Venezuela_w2_orientation','10-66.1066-Venezuela-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local Venezuela w2, echo=F}
s1066_Venezuela_w2_orientation <-opal.execute(o,'s1066_Venezuela_w2_orientation')
vari <- s1066_Venezuela_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo Venezuela w2}
t1066_ds_Ven_w2 <- tibble(id=s1066_Venezuela_w2_orientation$id)
t1066_ds_Ven_w2$orientation <- rep( 999,length(t1066_ds_Ven_w2$id))
t1066_ds_Ven_w2$orientation[((s1066_Venezuela_w2_orientation$f_DAY==1)&(s1066_Venezuela_w2_orientation$f_MONTH==1)&(s1066_Venezuela_w2_orientation$f_YEAR==1)&(s1066_Venezuela_w2_orientation$f_SEASON==1))]<-1
t1066_ds_Ven_w2$orientation[((s1066_Venezuela_w2_orientation$f_DAY==0)|(s1066_Venezuela_w2_orientation$f_MONTH==0)|(s1066_Venezuela_w2_orientation$f_YEAR==0)|(s1066_Venezuela_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_Ven_w2$orientation <- labelled(t1066_ds_Ven_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w2, echo=F}
vari <- t1066_ds_Ven_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w2, echo=F}
AfterH <- table(t1066_ds_Ven_w2$orientation)
combi<-sum(na.omit((s1066_Venezuela_w2_orientation$f_DAY==1)&(s1066_Venezuela_w2_orientation$f_MONTH==1)&(s1066_Venezuela_w2_orientation$f_YEAR==1)&(s1066_Venezuela_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_Venezuela_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL Venezuela w2, echo=FALSE}

label(t1066_ds_Ven_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_Ven_w2', t1066_ds_Ven_w2)
#opal.symbol_import(o,'t1066_ds_Ven_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_Ven_w2
save(orientation, file = "../RData/Ven_w2/orientation.RData")

t1066_m_ds_Ven_w2 <- t1066_ds_Ven_w2
t1066_m_ds_Ven_w2$orientation <- car::recode(t1066_m_ds_Ven_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w2', t1066_m_ds_Ven_w2)
#opal.symbol_import(o,'t1066_m_ds_Ven_w2', project='_Athlos_Harm_Dataset')
```


## UrbanPeru

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign UrbanPeru w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w1_orientation','10-66.1066-UrbanPeru-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanPeru w1, echo=F}
s1066_UrbanPeru_w1_orientation <-opal.execute(o,'s1066_UrbanPeru_w1_orientation')
vari <- s1066_UrbanPeru_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanPeru w1}
t1066_ds_UP_w1 <- tibble(id=s1066_UrbanPeru_w1_orientation$id)
t1066_ds_UP_w1$orientation <- rep( 999,length(t1066_ds_UP_w1$id))
t1066_ds_UP_w1$orientation[((s1066_UrbanPeru_w1_orientation$DAY==1)&(s1066_UrbanPeru_w1_orientation$MONTH==1)&(s1066_UrbanPeru_w1_orientation$YEAR==1)&(s1066_UrbanPeru_w1_orientation$SEASON==1))]<-1
t1066_ds_UP_w1$orientation[((s1066_UrbanPeru_w1_orientation$DAY==0)|(s1066_UrbanPeru_w1_orientation$MONTH==0)|(s1066_UrbanPeru_w1_orientation$YEAR==0)|(s1066_UrbanPeru_w1_orientation$SEASON==0))]<- 0
t1066_ds_UP_w1$orientation <- labelled(t1066_ds_UP_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w1, echo=F}
vari <- t1066_ds_UP_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w1, echo=F}
AfterH <- table(t1066_ds_UP_w1$orientation)
combi<-sum(na.omit((s1066_UrbanPeru_w1_orientation$DAY==1)&(s1066_UrbanPeru_w1_orientation$MONTH==1)&(s1066_UrbanPeru_w1_orientation$YEAR==1)&(s1066_UrbanPeru_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanPeru_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```







```{r importOPAL UrbanPeru w1, echo=FALSE}

label(t1066_ds_UP_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UP_w1', t1066_ds_UP_w1)
#opal.symbol_import(o,'t1066_ds_UP_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UP_w1
save(orientation, file = "../RData/UP_w1/orientation.RData")

t1066_m_ds_UP_w1 <- t1066_ds_UP_w1
t1066_m_ds_UP_w1$orientation <- car::recode(t1066_m_ds_UP_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w1', t1066_m_ds_UP_w1)
#opal.symbol_import(o,'t1066_m_ds_UP_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description


| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign UrbanPeru w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w2_orientation','10-66.1066-UrbanPeru-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanPeru w2, echo=F}
s1066_UrbanPeru_w2_orientation <-opal.execute(o,'s1066_UrbanPeru_w2_orientation')
vari <- s1066_UrbanPeru_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanPeru w2}
t1066_ds_UP_w2 <- tibble(id=s1066_UrbanPeru_w2_orientation$id)
t1066_ds_UP_w2$orientation <- rep( 999,length(t1066_ds_UP_w2$id))
t1066_ds_UP_w2$orientation[((s1066_UrbanPeru_w2_orientation$f_DAY==1)&(s1066_UrbanPeru_w2_orientation$f_MONTH==1)&(s1066_UrbanPeru_w2_orientation$f_YEAR==1)&(s1066_UrbanPeru_w2_orientation$f_SEASON==1))]<-1
t1066_ds_UP_w2$orientation[((s1066_UrbanPeru_w2_orientation$f_DAY==0)|(s1066_UrbanPeru_w2_orientation$f_MONTH==0)|(s1066_UrbanPeru_w2_orientation$f_YEAR==0)|(s1066_UrbanPeru_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_UP_w2$orientation <- labelled(t1066_ds_UP_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w2, echo=F}
vari <- t1066_ds_UP_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w2, echo=F}
AfterH <- table(t1066_ds_UP_w2$orientation)
combi<-sum(na.omit((s1066_UrbanPeru_w2_orientation$f_DAY==1)&(s1066_UrbanPeru_w2_orientation$f_MONTH==1)&(s1066_UrbanPeru_w2_orientation$f_YEAR==1)&(s1066_UrbanPeru_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_UrbanPeru_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL UrbanPeru w2, echo=FALSE}

label(t1066_ds_UP_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UP_w2', t1066_ds_UP_w2)
#opal.symbol_import(o,'t1066_ds_UP_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UP_w2
save(orientation, file = "../RData/UP_w2/orientation.RData")

t1066_m_ds_UP_w2 <- t1066_ds_UP_w2
t1066_m_ds_UP_w2$orientation <- car::recode(t1066_m_ds_UP_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w2', t1066_m_ds_UP_w2)
#opal.symbol_import(o,'t1066_m_ds_UP_w2', project='_Athlos_Harm_Dataset')
```


## RuralPeru

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign RuralPeru w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralPeru_w1_orientation','10-66.1066-RuralPeru-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralPeru w1, echo=F}
s1066_RuralPeru_w1_orientation <-opal.execute(o,'s1066_RuralPeru_w1_orientation')
vari <- s1066_RuralPeru_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralPeru w1}
t1066_ds_RP_w1 <- tibble(id=s1066_RuralPeru_w1_orientation$id)
t1066_ds_RP_w1$orientation <- rep( 999,length(t1066_ds_RP_w1$id))
t1066_ds_RP_w1$orientation[((s1066_RuralPeru_w1_orientation$DAY==1)&(s1066_RuralPeru_w1_orientation$MONTH==1)&(s1066_RuralPeru_w1_orientation$YEAR==1)&(s1066_RuralPeru_w1_orientation$SEASON==1))]<-1
t1066_ds_RP_w1$orientation[((s1066_RuralPeru_w1_orientation$DAY==0)|(s1066_RuralPeru_w1_orientation$MONTH==0)|(s1066_RuralPeru_w1_orientation$YEAR==0)|(s1066_RuralPeru_w1_orientation$SEASON==0))]<- 0
t1066_ds_RP_w1$orientation <- labelled(t1066_ds_RP_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w1, echo=F}
vari <- t1066_ds_RP_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w1, echo=F}
AfterH <- table(t1066_ds_RP_w1$orientation)
combi<-sum(na.omit((s1066_RuralPeru_w1_orientation$DAY==1)&(s1066_RuralPeru_w1_orientation$MONTH==1)&(s1066_RuralPeru_w1_orientation$YEAR==1)&(s1066_RuralPeru_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralPeru_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralPeru w1, echo=FALSE}

label(t1066_ds_RP_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RP_w1', t1066_ds_RP_w1)
#opal.symbol_import(o,'t1066_ds_RP_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RP_w1
save(orientation, file = "../RData/RP_w1/orientation.RData")

t1066_m_ds_RP_w1 <- t1066_ds_RP_w1
t1066_m_ds_RP_w1$orientation <- car::recode(t1066_m_ds_RP_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w1', t1066_m_ds_RP_w1)
#opal.symbol_import(o,'t1066_m_ds_RP_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralPeru w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralPeru_w2_orientation','10-66.1066-RuralPeru-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralPeru w2, echo=F}
s1066_RuralPeru_w2_orientation <-opal.execute(o,'s1066_RuralPeru_w2_orientation')
vari <- s1066_RuralPeru_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralPeru w2}
t1066_ds_RP_w2 <- tibble(id=s1066_RuralPeru_w2_orientation$id)
t1066_ds_RP_w2$orientation <- rep( 999,length(t1066_ds_RP_w2$id))
t1066_ds_RP_w2$orientation[((s1066_RuralPeru_w2_orientation$f_DAY==1)&(s1066_RuralPeru_w2_orientation$f_MONTH==1)&(s1066_RuralPeru_w2_orientation$f_YEAR==1)&(s1066_RuralPeru_w2_orientation$f_SEASON==1))]<-1
t1066_ds_RP_w2$orientation[((s1066_RuralPeru_w2_orientation$f_DAY==0)|(s1066_RuralPeru_w2_orientation$f_MONTH==0)|(s1066_RuralPeru_w2_orientation$f_YEAR==0)|(s1066_RuralPeru_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_RP_w2$orientation <- labelled(t1066_ds_RP_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w2, echo=F}
vari <- t1066_ds_RP_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w2, echo=F}
AfterH <- table(t1066_ds_RP_w2$orientation)
combi<-sum(na.omit((s1066_RuralPeru_w2_orientation$f_DAY==1)&(s1066_RuralPeru_w2_orientation$f_MONTH==1)&(s1066_RuralPeru_w2_orientation$f_YEAR==1)&(s1066_RuralPeru_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_RuralPeru_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL RuralPeru w2, echo=FALSE}

label(t1066_ds_RP_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RP_w2', t1066_ds_RP_w2)
#opal.symbol_import(o,'t1066_ds_RP_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RP_w2
save(orientation, file = "../RData/RP_w2/orientation.RData")

t1066_m_ds_RP_w2 <- t1066_ds_RP_w2
t1066_m_ds_RP_w2$orientation <- car::recode(t1066_m_ds_RP_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w2', t1066_m_ds_RP_w2)
#opal.symbol_import(o,'t1066_m_ds_RP_w2', project='_Athlos_Harm_Dataset')
```


## UrbanMexico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign UrbanMexico w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w1_orientation','10-66.1066-UrbanMexico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanMexico w1, echo=F}
s1066_UrbanMexico_w1_orientation <-opal.execute(o,'s1066_UrbanMexico_w1_orientation')
vari <- s1066_UrbanMexico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanMexico w1}
t1066_ds_UM_w1 <- tibble(id=s1066_UrbanMexico_w1_orientation$id)
t1066_ds_UM_w1$orientation <- rep( 999,length(t1066_ds_UM_w1$id))
t1066_ds_UM_w1$orientation[((s1066_UrbanMexico_w1_orientation$DAY==1)&(s1066_UrbanMexico_w1_orientation$MONTH==1)&(s1066_UrbanMexico_w1_orientation$YEAR==1)&(s1066_UrbanMexico_w1_orientation$SEASON==1))]<-1
t1066_ds_UM_w1$orientation[((s1066_UrbanMexico_w1_orientation$DAY==0)|(s1066_UrbanMexico_w1_orientation$MONTH==0)|(s1066_UrbanMexico_w1_orientation$YEAR==0)|(s1066_UrbanMexico_w1_orientation$SEASON==0))]<- 0
t1066_ds_UM_w1$orientation <- labelled(t1066_ds_UM_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w1, echo=F}
vari <- t1066_ds_UM_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w1, echo=F}
AfterH <- table(t1066_ds_UM_w1$orientation)
combi<-sum(na.omit((s1066_UrbanMexico_w1_orientation$DAY==1)&(s1066_UrbanMexico_w1_orientation$MONTH==1)&(s1066_UrbanMexico_w1_orientation$YEAR==1)&(s1066_UrbanMexico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanMexico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanMexico w1, echo=FALSE}

label(t1066_ds_UM_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UM_w1', t1066_ds_UM_w1)
#opal.symbol_import(o,'t1066_ds_UM_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UM_w1
save(orientation, file = "../RData/UM_w1/orientation.RData")

t1066_m_ds_UM_w1 <- t1066_ds_UM_w1
t1066_m_ds_UM_w1$orientation <- car::recode(t1066_m_ds_UM_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w1', t1066_m_ds_UM_w1)
#opal.symbol_import(o,'t1066_m_ds_UM_w1', project='_Athlos_Harm_Dataset')
```


### Wave 2

#### Study-specific variable description


| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |

```{r assign UrbanMexico w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w2_orientation','10-66.1066-UrbanMexico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanMexico w2, echo=F}
s1066_UrbanMexico_w2_orientation <-opal.execute(o,'s1066_UrbanMexico_w2_orientation')
vari <- s1066_UrbanMexico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanMexico w2}
t1066_ds_UM_w2 <- tibble(id=s1066_UrbanMexico_w2_orientation$id)
t1066_ds_UM_w2$orientation <- rep( 999,length(t1066_ds_UM_w2$id))
t1066_ds_UM_w2$orientation[((s1066_UrbanMexico_w2_orientation$f_DAY==1)&(s1066_UrbanMexico_w2_orientation$f_MONTH==1)&(s1066_UrbanMexico_w2_orientation$f_YEAR==1)&(s1066_UrbanMexico_w2_orientation$f_SEASON==1))]<-1
t1066_ds_UM_w2$orientation[((s1066_UrbanMexico_w2_orientation$f_DAY==0)|(s1066_UrbanMexico_w2_orientation$f_MONTH==0)|(s1066_UrbanMexico_w2_orientation$f_YEAR==0)|(s1066_UrbanMexico_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_UM_w2$orientation <- labelled(t1066_ds_UM_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w2, echo=F}
vari <- t1066_ds_UM_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w2, echo=F}
AfterH <- table(t1066_ds_UM_w2$orientation)
combi<-sum(na.omit((s1066_UrbanMexico_w2_orientation$f_DAY==1)&(s1066_UrbanMexico_w2_orientation$f_MONTH==1)&(s1066_UrbanMexico_w2_orientation$f_YEAR==1)&(s1066_UrbanMexico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_UrbanMexico_w2_orientation$f_YEAR)-length(na.omit(s1066_UrbanMexico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_UrbanMexico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```






```{r importOPAL UrbanMexico w2, echo=FALSE}

label(t1066_ds_UM_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UM_w2', t1066_ds_UM_w2)
#opal.symbol_import(o,'t1066_ds_UM_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UM_w2
save(orientation, file = "../RData/UM_w2/orientation.RData")

t1066_m_ds_UM_w2 <- t1066_ds_UM_w2
t1066_m_ds_UM_w2$orientation <- car::recode(t1066_m_ds_UM_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w2', t1066_m_ds_UM_w2)
#opal.symbol_import(o,'t1066_m_ds_UM_w2', project='_Athlos_Harm_Dataset')
```


## RuralMexico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralMexico w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralMexico_w1_orientation','10-66.1066-RuralMexico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralMexico w1, echo=F}
s1066_RuralMexico_w1_orientation <-opal.execute(o,'s1066_RuralMexico_w1_orientation')
vari <- s1066_RuralMexico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralMexico w1}
t1066_ds_RM_w1 <- tibble(id=s1066_RuralMexico_w1_orientation$id)
t1066_ds_RM_w1$orientation <- rep( 999,length(t1066_ds_RM_w1$id))
t1066_ds_RM_w1$orientation[((s1066_RuralMexico_w1_orientation$DAY==1)&(s1066_RuralMexico_w1_orientation$MONTH==1)&(s1066_RuralMexico_w1_orientation$YEAR==1)&(s1066_RuralMexico_w1_orientation$SEASON==1))]<-1
t1066_ds_RM_w1$orientation[((s1066_RuralMexico_w1_orientation$DAY==0)|(s1066_RuralMexico_w1_orientation$MONTH==0)|(s1066_RuralMexico_w1_orientation$YEAR==0)|(s1066_RuralMexico_w1_orientation$SEASON==0))]<- 0
t1066_ds_RM_w1$orientation <- labelled(t1066_ds_RM_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w1, echo=F}
vari <- t1066_ds_RM_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w1, echo=F}
AfterH <- table(t1066_ds_RM_w1$orientation)
combi<-sum(na.omit((s1066_RuralMexico_w1_orientation$DAY==1)&(s1066_RuralMexico_w1_orientation$MONTH==1)&(s1066_RuralMexico_w1_orientation$YEAR==1)&(s1066_RuralMexico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralMexico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralMexico w1, echo=FALSE}

label(t1066_ds_RM_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RM_w1', t1066_ds_RM_w1)
#opal.symbol_import(o,'t1066_ds_RM_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RM_w1
save(orientation, file = "../RData/RM_w1/orientation.RData")

t1066_m_ds_RM_w1 <- t1066_ds_RM_w1
t1066_m_ds_RM_w1$orientation <- car::recode(t1066_m_ds_RM_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w1', t1066_m_ds_RM_w1)
#opal.symbol_import(o,'t1066_m_ds_RM_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralMexico w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralMexico_w2_orientation','10-66.1066-RuralMexico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralMexico w2, echo=F}
s1066_RuralMexico_w2_orientation <-opal.execute(o,'s1066_RuralMexico_w2_orientation')
vari <- s1066_RuralMexico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralMexico w2}
t1066_ds_RM_w2 <- tibble(id=s1066_RuralMexico_w2_orientation$id)
t1066_ds_RM_w2$orientation <- rep( 999,length(t1066_ds_RM_w2$id))
t1066_ds_RM_w2$orientation[((s1066_RuralMexico_w2_orientation$f_DAY==1)&(s1066_RuralMexico_w2_orientation$f_MONTH==1)&(s1066_RuralMexico_w2_orientation$f_YEAR==1)&(s1066_RuralMexico_w2_orientation$f_SEASON==1))]<-1
t1066_ds_RM_w2$orientation[((s1066_RuralMexico_w2_orientation$f_DAY==0)|(s1066_RuralMexico_w2_orientation$f_MONTH==0)|(s1066_RuralMexico_w2_orientation$f_YEAR==0)|(s1066_RuralMexico_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_RM_w2$orientation <- labelled(t1066_ds_RM_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w2, echo=F}
vari <- t1066_ds_RM_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w2, echo=F}
AfterH <- table(t1066_ds_RM_w2$orientation)
combi<-sum(na.omit((s1066_RuralMexico_w2_orientation$f_DAY==1)&(s1066_RuralMexico_w2_orientation$f_MONTH==1)&(s1066_RuralMexico_w2_orientation$f_YEAR==1)&(s1066_RuralMexico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_RuralMexico_w2_orientation$f_YEAR)-length(na.omit(s1066_RuralMexico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_RuralMexico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```





```{r importOPAL RuralMexico w2, echo=FALSE}

label(t1066_ds_RM_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RM_w2', t1066_ds_RM_w2)
#opal.symbol_import(o,'t1066_ds_RM_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RM_w2
save(orientation, file = "../RData/RM_w2/orientation.RData")

t1066_m_ds_RM_w2 <- t1066_ds_RM_w2
t1066_m_ds_RM_w2$orientation <- car::recode(t1066_m_ds_RM_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w2', t1066_m_ds_RM_w2)
#opal.symbol_import(o,'t1066_m_ds_RM_w2', project='_Athlos_Harm_Dataset')
```



## PuertoRico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign PuertoRico w1, echo=F}
opal.assign.table.tibble(o, 's1066_PuertoRico_w1_orientation','10-66.1066-PuertoRico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local PuertoRico w1, echo=F}
s1066_PuertoRico_w1_orientation <-opal.execute(o,'s1066_PuertoRico_w1_orientation')
vari <- s1066_PuertoRico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo PuertoRico w1}
t1066_ds_PR_w1 <- tibble(id=s1066_PuertoRico_w1_orientation$id)
t1066_ds_PR_w1$orientation <- rep( 999,length(t1066_ds_PR_w1$id))
t1066_ds_PR_w1$orientation[((s1066_PuertoRico_w1_orientation$DAY==1)&(s1066_PuertoRico_w1_orientation$MONTH==1)&(s1066_PuertoRico_w1_orientation$YEAR==1)&(s1066_PuertoRico_w1_orientation$SEASON==1))]<-1
t1066_ds_PR_w1$orientation[((s1066_PuertoRico_w1_orientation$DAY==0)|(s1066_PuertoRico_w1_orientation$MONTH==0)|(s1066_PuertoRico_w1_orientation$YEAR==0)|(s1066_PuertoRico_w1_orientation$SEASON==0))]<- 0
t1066_ds_PR_w1$orientation <- labelled(t1066_ds_PR_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w1, echo=F}
vari <- t1066_ds_PR_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w1, echo=F}
AfterH <- table(t1066_ds_PR_w1$orientation)
combi<-sum(na.omit((s1066_PuertoRico_w1_orientation$DAY==1)&(s1066_PuertoRico_w1_orientation$MONTH==1)&(s1066_PuertoRico_w1_orientation$YEAR==1)&(s1066_PuertoRico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_PuertoRico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL PuertoRico w1, echo=FALSE}

label(t1066_ds_PR_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_PR_w1', t1066_ds_PR_w1)
#opal.symbol_import(o,'t1066_ds_PR_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_PR_w1
save(orientation, file = "../RData/PR_w1/orientation.RData")

t1066_m_ds_PR_w1 <- t1066_ds_PR_w1
t1066_m_ds_PR_w1$orientation <- car::recode(t1066_m_ds_PR_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w1', t1066_m_ds_PR_w1)
#opal.symbol_import(o,'t1066_m_ds_PR_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign PuertoRico w2, echo=F}
opal.assign.table.tibble(o, 's1066_PuertoRico_w2_orientation','10-66.1066-PuertoRico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local PuertoRico w2, echo=F}
s1066_PuertoRico_w2_orientation <-opal.execute(o,'s1066_PuertoRico_w2_orientation')
vari <- s1066_PuertoRico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo PuertoRico w2}
t1066_ds_PR_w2 <- tibble(id=s1066_PuertoRico_w2_orientation$id)
t1066_ds_PR_w2$orientation <- rep( 999,length(t1066_ds_PR_w2$id))
t1066_ds_PR_w2$orientation[((s1066_PuertoRico_w2_orientation$f_DAY==1)&(s1066_PuertoRico_w2_orientation$f_MONTH==1)&(s1066_PuertoRico_w2_orientation$f_YEAR==1)&(s1066_PuertoRico_w2_orientation$f_SEASON==1))]<-1
t1066_ds_PR_w2$orientation[((s1066_PuertoRico_w2_orientation$f_DAY==0)|(s1066_PuertoRico_w2_orientation$f_MONTH==0)|(s1066_PuertoRico_w2_orientation$f_YEAR==0)|(s1066_PuertoRico_w2_orientation$f_SEASON==0))]<- 0
t1066_ds_PR_w2$orientation <- labelled(t1066_ds_PR_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w2, echo=F}
vari <- t1066_ds_PR_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w2, echo=F}
AfterH <- table(t1066_ds_PR_w2$orientation)
combi<-sum(na.omit((s1066_PuertoRico_w2_orientation$f_DAY==1)&(s1066_PuertoRico_w2_orientation$f_MONTH==1)&(s1066_PuertoRico_w2_orientation$f_YEAR==1)&(s1066_PuertoRico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_PuertoRico_w2_orientation$f_YEAR)-length(na.omit(s1066_PuertoRico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_PuertoRico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1","NA->999") 
kable(C)
```






```{r importOPAL PuertoRico w2, echo=FALSE}

label(t1066_ds_PR_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_PR_w2', t1066_ds_PR_w2)
#opal.symbol_import(o,'t1066_ds_PR_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_PR_w2
save(orientation, file = "../RData/PR_w2/orientation.RData")

t1066_m_ds_PR_w2 <- t1066_ds_PR_w2
t1066_m_ds_PR_w2$orientation <- car::recode(t1066_m_ds_PR_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w2', t1066_m_ds_PR_w2)
#opal.symbol_import(o,'t1066_m_ds_PR_w2', project='_Athlos_Harm_Dataset')
```



# Quality estimation

For this study, the variable is a composed combining day, month, year and season 
which is different from the calculation performed in other studies where day of the month,
day of the week, month and year are available. 
The presence of a mistake in some of the components determines the presence of difficulties with orientation in time.
The India database seems to show higher mean errors in time orientation, this is
more remarkable in "year" where incorrect answers are more frequent than correct 
in contrast with the results in the rest of time orientation variables. 



```{r closeRsession, echo=FALSE}
opal.logout(o)
```

