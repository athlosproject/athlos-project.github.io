---
title: "Orientation in time"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/orientationDS.Rmd'}
```
```{r global, echo=F}
source('../../_DS_Rmd/orientationDS.R')
```

# Data process


## Cuba

### Wave 1 

#### Study-specific variable description


| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|`1066-Cuba-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign cuba w1, echo=F}
opal.assign.table.tibble(o, 's1066_cuba_w1_orientation','10-66.1066-Cuba-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local cuba w1, echo=F}
s1066_cuba_w1_orientation <- opal.execute(o,'s1066_cuba_w1_orientation')
vari <- s1066_cuba_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_cuba_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo cuba w1}

t1066_ds_cuba_w1 <- tibble(id=s1066_cuba_w1_orientation$id)
t1066_ds_cuba_w1$orientation <- rep(999,length(t1066_ds_cuba_w1$id))
t1066_ds_cuba_w1$orientation[which(((s1066_cuba_w1_orientation$DAY==1)&(s1066_cuba_w1_orientation$MONTH==1)&(s1066_cuba_w1_orientation$YEAR==1)&(s1066_cuba_w1_orientation$SEASON==1)))]<-1
t1066_ds_cuba_w1$orientation[which(((s1066_cuba_w1_orientation$DAY==0)|(s1066_cuba_w1_orientation$MONTH==0)|(s1066_cuba_w1_orientation$YEAR==0)|(s1066_cuba_w1_orientation$SEASON==0)))]<- 0
t1066_ds_cuba_w1$orientation <- labelled(t1066_ds_cuba_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript cuba w1, echo=F}
vari <- t1066_ds_cuba_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation cuba w1, echo=F}
AfterH <- table(t1066_ds_cuba_w1$orientation)
combi<-sum(na.omit((s1066_cuba_w1_orientation$DAY==1)&(s1066_cuba_w1_orientation$MONTH==1)&(s1066_cuba_w1_orientation$YEAR==1)&(s1066_cuba_w1_orientation$SEASON==1)))

BeforeH <- c(length(s1066_cuba_w1_orientation$DAY)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL cuba w1, echo=FALSE}

label(t1066_ds_cuba_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_cuba_w1', t1066_ds_cuba_w1)
#opal.symbol_import(o,'t1066_ds_cuba_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_cuba_w1
save(orientation, file = "../RData/cuba_w1/orientation.RData")

t1066_m_ds_cuba_w1 <- t1066_ds_cuba_w1
t1066_m_ds_cuba_w1$orientation <- car::recode(t1066_m_ds_cuba_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w1', t1066_m_ds_cuba_w1)
#opal.symbol_import(o,'t1066_m_ds_cuba_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2 

#### Study-specific variable description

| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Cuba-Followup`|`1066-Cuba-Followup`|`1066-Cuba-Followup`|`1066-Cuba-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign cuba w2, echo=F}
opal.assign.table.tibble(o, 's1066_cuba_w2_orientation','10-66.1066-Cuba-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local cuba w2, echo=F}
s1066_cuba_w2_orientation <- opal.execute(o,'s1066_cuba_w2_orientation')
vari <- s1066_cuba_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_cuba_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_cuba_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo cuba w2}
t1066_ds_cuba_w2 <- tibble(id=s1066_cuba_w2_orientation$id)
t1066_ds_cuba_w2$orientation <- rep( 999,length(t1066_ds_cuba_w2$id))
t1066_ds_cuba_w2$orientation[which(((s1066_cuba_w2_orientation$f_DAY==1)&(s1066_cuba_w2_orientation$f_MONTH==1)&(s1066_cuba_w2_orientation$f_YEAR==1)&(s1066_cuba_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_cuba_w2$orientation[which(((s1066_cuba_w2_orientation$f_DAY==0)|(s1066_cuba_w2_orientation$f_MONTH==0)|(s1066_cuba_w2_orientation$f_YEAR==0)|(s1066_cuba_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_cuba_w2$orientation <- labelled(t1066_ds_cuba_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript cuba w2, echo=F}
vari <- t1066_ds_cuba_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_cuba_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation cuba w2, echo=F}
AfterH <- table(t1066_ds_cuba_w2$orientation)
combi<-sum(na.omit((s1066_cuba_w2_orientation$f_DAY==1)&(s1066_cuba_w2_orientation$f_MONTH==1)&(s1066_cuba_w2_orientation$f_YEAR==1)&(s1066_cuba_w2_orientation$f_SEASON==1)))
nas<-length(s1066_cuba_w2_orientation$f_YEAR)-length(na.omit(s1066_cuba_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_cuba_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```






```{r importOPAL cuba w2, echo=FALSE}

label(t1066_ds_cuba_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_cuba_w2', t1066_ds_cuba_w2)
#opal.symbol_import(o,'t1066_ds_cuba_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_cuba_w2
save(orientation, file = "../RData/cuba_w2/orientation.RData")

t1066_m_ds_cuba_w2 <- t1066_ds_cuba_w2
t1066_m_ds_cuba_w2$orientation <- car::recode(t1066_m_ds_cuba_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_cuba_w2', t1066_m_ds_cuba_w2)
#opal.symbol_import(o,'t1066_m_ds_cuba_w2', project='_Athlos_Harm_Dataset')
```



## India

### Wave 1 

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-India-Baseline`|`1066-India-Baseline`|`1066-India-Baseline`|`1066-India-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign India w1, echo=F}
opal.assign.table.tibble(o, 's1066_India_w1_orientation','10-66.1066-India-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local India w1, echo=F}
s1066_India_w1_orientation <-opal.execute(o,'s1066_India_w1_orientation')
vari <- s1066_India_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_India_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_India_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_India_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_India_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo India w1}
t1066_ds_india_w1 <- tibble(id=s1066_India_w1_orientation$id)
t1066_ds_india_w1$orientation <- rep( 999,length(t1066_ds_india_w1$id))
t1066_ds_india_w1$orientation[which(((s1066_India_w1_orientation$DAY==1)&(s1066_India_w1_orientation$MONTH==1)&(s1066_India_w1_orientation$YEAR==1)&(s1066_India_w1_orientation$SEASON==1)))]<-1
t1066_ds_india_w1$orientation[which(((s1066_India_w1_orientation$DAY==0)|(s1066_India_w1_orientation$MONTH==0)|(s1066_India_w1_orientation$YEAR==0)|(s1066_India_w1_orientation$SEASON==0)))]<- 0
t1066_ds_india_w1$orientation <- labelled(t1066_ds_india_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript India w1, echo=F}
vari <- t1066_ds_india_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_india_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation India w1, echo=F}
AfterH <- table(t1066_ds_india_w1$orientation)
combi<-sum(na.omit((s1066_India_w1_orientation$DAY==1)&(s1066_India_w1_orientation$MONTH==1)&(s1066_India_w1_orientation$YEAR==1)&(s1066_India_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_India_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL India w1, echo=FALSE}

label(t1066_ds_india_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_india_w1', t1066_ds_india_w1)
#opal.symbol_import(o,'t1066_ds_india_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_india_w1
save(orientation, file = "../RData/india_w1/orientation.RData")

t1066_m_ds_india_w1 <- t1066_ds_india_w1
t1066_m_ds_india_w1$orientation <- car::recode(t1066_m_ds_india_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_india_w1', t1066_m_ds_india_w1)
#opal.symbol_import(o,'t1066_m_ds_india_w1', project='_Athlos_Harm_Dataset')
```



## UrbanChina

### Wave 1 

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|`1066-UrbanChina-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign UrbanChina w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanChina_w1_orientation','10-66.1066-UrbanChina-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanChina w1, echo=F}
s1066_UrbanChina_w1_orientation <-opal.execute(o,'s1066_UrbanChina_w1_orientation')
vari <- s1066_UrbanChina_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanChina_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanChina w1}
t1066_ds_UCh_w1 <- tibble(id=s1066_UrbanChina_w1_orientation$id)
t1066_ds_UCh_w1$orientation <- rep( 999,length(t1066_ds_UCh_w1$id))
t1066_ds_UCh_w1$orientation[which(((s1066_UrbanChina_w1_orientation$DAY==1)&(s1066_UrbanChina_w1_orientation$MONTH==1)&(s1066_UrbanChina_w1_orientation$YEAR==1)&(s1066_UrbanChina_w1_orientation$SEASON==1)))]<-1
t1066_ds_UCh_w1$orientation[which(((s1066_UrbanChina_w1_orientation$DAY==0)|(s1066_UrbanChina_w1_orientation$MONTH==0)|(s1066_UrbanChina_w1_orientation$YEAR==0)|(s1066_UrbanChina_w1_orientation$SEASON==0)))]<- 0
t1066_ds_UCh_w1$orientation <- labelled(t1066_ds_UCh_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w1, echo=F}
vari <- t1066_ds_UCh_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w1, echo=F}
AfterH <- table(t1066_ds_UCh_w1$orientation)
combi<-sum(na.omit((s1066_UrbanChina_w1_orientation$DAY==1)&(s1066_UrbanChina_w1_orientation$MONTH==1)&(s1066_UrbanChina_w1_orientation$YEAR==1)&(s1066_UrbanChina_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanChina_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanChina w1, echo=FALSE}

label(t1066_ds_UCh_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UCh_w1', t1066_ds_UCh_w1)
#opal.symbol_import(o,'t1066_ds_UCh_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UCh_w1
save(orientation, file = "../RData/UCh_w1/orientation.RData")

t1066_m_ds_UCh_w1 <- t1066_ds_UCh_w1
t1066_m_ds_UCh_w1$orientation <- car::recode(t1066_m_ds_UCh_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w1', t1066_m_ds_UCh_w1)
#opal.symbol_import(o,'t1066_m_ds_UCh_w1', project='_Athlos_Harm_Dataset')
```




### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|`1066-UrbanChina-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign UrbanChina w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanChina_w2_orientation','10-66.1066-UrbanChina-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanChina w2, echo=F}
s1066_UrbanChina_w2_orientation <-opal.execute(o,'s1066_UrbanChina_w2_orientation')
vari <- s1066_UrbanChina_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanChina_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanChina_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanChina w2}
t1066_ds_UCh_w2 <- tibble(id=s1066_UrbanChina_w2_orientation$id)
t1066_ds_UCh_w2$orientation <- rep( 999,length(t1066_ds_UCh_w2$id))
t1066_ds_UCh_w2$orientation[which(((s1066_UrbanChina_w2_orientation$f_DAY==1)&(s1066_UrbanChina_w2_orientation$f_MONTH==1)&(s1066_UrbanChina_w2_orientation$f_YEAR==1)&(s1066_UrbanChina_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_UCh_w2$orientation[which(((s1066_UrbanChina_w2_orientation$f_DAY==0)|(s1066_UrbanChina_w2_orientation$f_MONTH==0)|(s1066_UrbanChina_w2_orientation$f_YEAR==0)|(s1066_UrbanChina_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_UCh_w2$orientation <- labelled(t1066_ds_UCh_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanChina w2, echo=F}
vari <- t1066_ds_UCh_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UCh_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanChina w2, echo=F}
AfterH <- table(t1066_ds_UCh_w2$orientation)
combi<-sum(na.omit((s1066_UrbanChina_w2_orientation$f_DAY==1)&(s1066_UrbanChina_w2_orientation$f_MONTH==1)&(s1066_UrbanChina_w2_orientation$f_YEAR==1)&(s1066_UrbanChina_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_UrbanChina_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanChina w2, echo=FALSE}

label(t1066_ds_UCh_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UCh_w2', t1066_ds_UCh_w2)
#opal.symbol_import(o,'t1066_ds_UCh_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UCh_w2
save(orientation, file = "../RData/UCh_w2/orientation.RData")

t1066_m_ds_UCh_w2 <- t1066_ds_UCh_w2
t1066_m_ds_UCh_w2$orientation <- car::recode(t1066_m_ds_UCh_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UCh_w2', t1066_m_ds_UCh_w2)
#opal.symbol_import(o,'t1066_m_ds_UCh_w2', project='_Athlos_Harm_Dataset')
```


## RuralChina

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|`1066-RuralChina-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralChina w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralChina_w1_orientation','10-66.1066-RuralChina-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralChina w1, echo=F}
s1066_RuralChina_w1_orientation <-opal.execute(o,'s1066_RuralChina_w1_orientation')
vari <- s1066_RuralChina_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralChina_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralChina w1}
t1066_ds_RCh_w1 <- tibble(id=s1066_RuralChina_w1_orientation$id)
t1066_ds_RCh_w1$orientation <- rep( 999,length(t1066_ds_RCh_w1$id))
t1066_ds_RCh_w1$orientation[which(((s1066_RuralChina_w1_orientation$DAY==1)&(s1066_RuralChina_w1_orientation$MONTH==1)&(s1066_RuralChina_w1_orientation$YEAR==1)&(s1066_RuralChina_w1_orientation$SEASON==1)))]<-1
t1066_ds_RCh_w1$orientation[which(((s1066_RuralChina_w1_orientation$DAY==0)|(s1066_RuralChina_w1_orientation$MONTH==0)|(s1066_RuralChina_w1_orientation$YEAR==0)|(s1066_RuralChina_w1_orientation$SEASON==0)))]<- 0
t1066_ds_RCh_w1$orientation <- labelled(t1066_ds_RCh_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w1, echo=F}
vari <- t1066_ds_RCh_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w1, echo=F}
AfterH <- table(t1066_ds_RCh_w1$orientation)
combi<-sum(na.omit((s1066_RuralChina_w1_orientation$DAY==1)&(s1066_RuralChina_w1_orientation$MONTH==1)&(s1066_RuralChina_w1_orientation$YEAR==1)&(s1066_RuralChina_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralChina_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL RuralChina w1, echo=FALSE}

label(t1066_ds_RCh_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RCh_w1', t1066_ds_RCh_w1)
#opal.symbol_import(o,'t1066_ds_RCh_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RCh_w1
save(orientation, file = "../RData/RCh_w1/orientation.RData")

t1066_m_ds_RCh_w1 <- t1066_ds_RCh_w1
t1066_m_ds_RCh_w1$orientation <- car::recode(t1066_m_ds_RCh_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w1', t1066_m_ds_RCh_w1)
#opal.symbol_import(o,'t1066_m_ds_RCh_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|`1066-RuralChina-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign RuralChina w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralChina_w2_orientation','10-66.1066-RuralChina-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralChina w2, echo=F}
s1066_RuralChina_w2_orientation <-opal.execute(o,'s1066_RuralChina_w2_orientation')
vari <- s1066_RuralChina_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralChina_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralChina_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralChina w2}
t1066_ds_RCh_w2 <- tibble(id=s1066_RuralChina_w2_orientation$id)
t1066_ds_RCh_w2$orientation <- rep( 999,length(t1066_ds_RCh_w2$id))
t1066_ds_RCh_w2$orientation[which(((s1066_RuralChina_w2_orientation$f_DAY==1)&(s1066_RuralChina_w2_orientation$f_MONTH==1)&(s1066_RuralChina_w2_orientation$f_YEAR==1)&(s1066_RuralChina_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_RCh_w2$orientation[which(((s1066_RuralChina_w2_orientation$f_DAY==0)|(s1066_RuralChina_w2_orientation$f_MONTH==0)|(s1066_RuralChina_w2_orientation$f_YEAR==0)|(s1066_RuralChina_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_RCh_w2$orientation <- labelled(t1066_ds_RCh_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralChina w2, echo=F}
vari <- t1066_ds_RCh_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RCh_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralChina w2, echo=F}
AfterH <- table(t1066_ds_RCh_w2$orientation)
combi<-sum(na.omit((s1066_RuralChina_w2_orientation$f_DAY==1)&(s1066_RuralChina_w2_orientation$f_MONTH==1)&(s1066_RuralChina_w2_orientation$f_YEAR==1)&(s1066_RuralChina_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_RuralChina_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralChina w2, echo=FALSE}

label(t1066_ds_RCh_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RCh_w2', t1066_ds_RCh_w2)
#opal.symbol_import(o,'t1066_ds_RCh_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RCh_w2
save(orientation, file = "../RData/RCh_w2/orientation.RData")

t1066_m_ds_RCh_w2 <- t1066_ds_RCh_w2
t1066_m_ds_RCh_w2$orientation <- car::recode(t1066_m_ds_RCh_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RCh_w2', t1066_m_ds_RCh_w2)
#opal.symbol_import(o,'t1066_m_ds_RCh_w2', project='_Athlos_Harm_Dataset')
```


## DominicanRepublic

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|`1066-DominicanRepublic-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign DominicanRepublic w1, echo=F}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w1_orientation','10-66.1066-DominicanRepublic-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local DominicanRepublic w1, echo=F}
s1066_DominicanRepublic_w1_orientation <-opal.execute(o,'s1066_DominicanRepublic_w1_orientation')
vari <- s1066_DominicanRepublic_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo DominicanRepublic w1}
t1066_ds_DR_w1 <- tibble(id=s1066_DominicanRepublic_w1_orientation$id)
t1066_ds_DR_w1$orientation <- rep( 999,length(t1066_ds_DR_w1$id))
t1066_ds_DR_w1$orientation[which(((s1066_DominicanRepublic_w1_orientation$DAY==1)&(s1066_DominicanRepublic_w1_orientation$MONTH==1)&(s1066_DominicanRepublic_w1_orientation$YEAR==1)&(s1066_DominicanRepublic_w1_orientation$SEASON==1)))]<-1
t1066_ds_DR_w1$orientation[which(((s1066_DominicanRepublic_w1_orientation$DAY==0)|(s1066_DominicanRepublic_w1_orientation$MONTH==0)|(s1066_DominicanRepublic_w1_orientation$YEAR==0)|(s1066_DominicanRepublic_w1_orientation$SEASON==0)))]<- 0
t1066_ds_DR_w1$orientation <- labelled(t1066_ds_DR_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w1, echo=F}
vari <- t1066_ds_DR_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w1, echo=F}
AfterH <- table(t1066_ds_DR_w1$orientation)
combi<-sum(na.omit((s1066_DominicanRepublic_w1_orientation$DAY==1)&(s1066_DominicanRepublic_w1_orientation$MONTH==1)&(s1066_DominicanRepublic_w1_orientation$YEAR==1)&(s1066_DominicanRepublic_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_DominicanRepublic_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL DominicanRepublic w1, echo=FALSE}

label(t1066_ds_DR_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_DR_w1', t1066_ds_DR_w1)
#opal.symbol_import(o,'t1066_ds_DR_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_DR_w1
save(orientation, file = "../RData/DR_w1/orientation.RData")

t1066_m_ds_DR_w1 <- t1066_ds_DR_w1
t1066_m_ds_DR_w1$orientation <- car::recode(t1066_m_ds_DR_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w1', t1066_m_ds_DR_w1)
#opal.symbol_import(o,'t1066_m_ds_DR_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|`1066-DominicanRepublic-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign DominicanRepublic w2, echo=F}
opal.assign.table.tibble(o, 's1066_DominicanRepublic_w2_orientation','10-66.1066-DominicanRepublic-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local DominicanRepublic w2, echo=F}
s1066_DominicanRepublic_w2_orientation <-opal.execute(o,'s1066_DominicanRepublic_w2_orientation')
vari <- s1066_DominicanRepublic_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_DominicanRepublic_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_DominicanRepublic_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo DominicanRepublic w2}
t1066_ds_DR_w2 <- tibble(id=s1066_DominicanRepublic_w2_orientation$id)
t1066_ds_DR_w2$orientation <- rep( 999,length(t1066_ds_DR_w2$id))
t1066_ds_DR_w2$orientation[which(((s1066_DominicanRepublic_w2_orientation$f_DAY==1)&(s1066_DominicanRepublic_w2_orientation$f_MONTH==1)&(s1066_DominicanRepublic_w2_orientation$f_YEAR==1)&(s1066_DominicanRepublic_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_DR_w2$orientation[which(((s1066_DominicanRepublic_w2_orientation$f_DAY==0)|(s1066_DominicanRepublic_w2_orientation$f_MONTH==0)|(s1066_DominicanRepublic_w2_orientation$f_YEAR==0)|(s1066_DominicanRepublic_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_DR_w2$orientation <- labelled(t1066_ds_DR_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript DominicanRepublic w2, echo=F}
vari <- t1066_ds_DR_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_DR_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation DominicanRepublic w2, echo=F}
AfterH <- table(t1066_ds_DR_w2$orientation)
combi<-sum(na.omit((s1066_DominicanRepublic_w2_orientation$f_DAY==1)&(s1066_DominicanRepublic_w2_orientation$f_MONTH==1)&(s1066_DominicanRepublic_w2_orientation$f_YEAR==1)&(s1066_DominicanRepublic_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_DominicanRepublic_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL DominicanRepublic w2, echo=FALSE}

label(t1066_ds_DR_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_DR_w2', t1066_ds_DR_w2)
#opal.symbol_import(o,'t1066_ds_DR_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_DR_w2
save(orientation, file = "../RData/DR_w2/orientation.RData")

t1066_m_ds_DR_w2 <- t1066_ds_DR_w2
t1066_m_ds_DR_w2$orientation <- car::recode(t1066_m_ds_DR_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_DR_w2', t1066_m_ds_DR_w2)
#opal.symbol_import(o,'t1066_m_ds_DR_w2', project='_Athlos_Harm_Dataset')
```


## Venezuela

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|`1066-Venezuela-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign Venezuela w1, echo=F}
opal.assign.table.tibble(o, 's1066_Venezuela_w1_orientation','10-66.1066-Venezuela-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local Venezuela w1, echo=F}
s1066_Venezuela_w1_orientation <-opal.execute(o,'s1066_Venezuela_w1_orientation')
vari <- s1066_Venezuela_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_Venezuela_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo Venezuela w1}
t1066_ds_Ven_w1 <- tibble(id=s1066_Venezuela_w1_orientation$id)
t1066_ds_Ven_w1$orientation <- rep( 999,length(t1066_ds_Ven_w1$id))
t1066_ds_Ven_w1$orientation[which(((s1066_Venezuela_w1_orientation$DAY==1)&(s1066_Venezuela_w1_orientation$MONTH==1)&(s1066_Venezuela_w1_orientation$YEAR==1)&(s1066_Venezuela_w1_orientation$SEASON==1)))]<-1
t1066_ds_Ven_w1$orientation[which(((s1066_Venezuela_w1_orientation$DAY==0)|(s1066_Venezuela_w1_orientation$MONTH==0)|(s1066_Venezuela_w1_orientation$YEAR==0)|(s1066_Venezuela_w1_orientation$SEASON==0)))]<- 0
t1066_ds_Ven_w1$orientation <- labelled(t1066_ds_Ven_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w1, echo=F}
vari <- t1066_ds_Ven_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w1, echo=F}
AfterH <- table(t1066_ds_Ven_w1$orientation)
combi<-sum(na.omit((s1066_Venezuela_w1_orientation$DAY==1)&(s1066_Venezuela_w1_orientation$MONTH==1)&(s1066_Venezuela_w1_orientation$YEAR==1)&(s1066_Venezuela_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_Venezuela_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```







```{r importOPAL Venezuela w1, echo=FALSE}

label(t1066_ds_Ven_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_Ven_w1', t1066_ds_Ven_w1)
#opal.symbol_import(o,'t1066_ds_Ven_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_Ven_w1
save(orientation, file = "../RData/Ven_w1/orientation.RData")

t1066_m_ds_Ven_w1 <- t1066_ds_Ven_w1
t1066_m_ds_Ven_w1$orientation <- car::recode(t1066_m_ds_Ven_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w1', t1066_m_ds_Ven_w1)
#opal.symbol_import(o,'t1066_m_ds_Ven_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|`1066-Venezuela-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign Venezuela w2, echo=F}
opal.assign.table.tibble(o, 's1066_Venezuela_w2_orientation','10-66.1066-Venezuela-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local Venezuela w2, echo=F}
s1066_Venezuela_w2_orientation <-opal.execute(o,'s1066_Venezuela_w2_orientation')
vari <- s1066_Venezuela_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_Venezuela_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_Venezuela_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo Venezuela w2}
t1066_ds_Ven_w2 <- tibble(id=s1066_Venezuela_w2_orientation$id)
t1066_ds_Ven_w2$orientation <- rep( 999,length(t1066_ds_Ven_w2$id))
t1066_ds_Ven_w2$orientation[which(((s1066_Venezuela_w2_orientation$f_DAY==1)&(s1066_Venezuela_w2_orientation$f_MONTH==1)&(s1066_Venezuela_w2_orientation$f_YEAR==1)&(s1066_Venezuela_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_Ven_w2$orientation[which(((s1066_Venezuela_w2_orientation$f_DAY==0)|(s1066_Venezuela_w2_orientation$f_MONTH==0)|(s1066_Venezuela_w2_orientation$f_YEAR==0)|(s1066_Venezuela_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_Ven_w2$orientation <- labelled(t1066_ds_Ven_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript Venezuela w2, echo=F}
vari <- t1066_ds_Ven_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_Ven_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation Venezuela w2, echo=F}
AfterH <- table(t1066_ds_Ven_w2$orientation)
combi<-sum(na.omit((s1066_Venezuela_w2_orientation$f_DAY==1)&(s1066_Venezuela_w2_orientation$f_MONTH==1)&(s1066_Venezuela_w2_orientation$f_YEAR==1)&(s1066_Venezuela_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_Venezuela_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL Venezuela w2, echo=FALSE}

label(t1066_ds_Ven_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_Ven_w2', t1066_ds_Ven_w2)
#opal.symbol_import(o,'t1066_ds_Ven_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_Ven_w2
save(orientation, file = "../RData/Ven_w2/orientation.RData")

t1066_m_ds_Ven_w2 <- t1066_ds_Ven_w2
t1066_m_ds_Ven_w2$orientation <- car::recode(t1066_m_ds_Ven_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_Ven_w2', t1066_m_ds_Ven_w2)
#opal.symbol_import(o,'t1066_m_ds_Ven_w2', project='_Athlos_Harm_Dataset')
```


## UrbanPeru

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|`1066-UrbanPeru-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign UrbanPeru w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w1_orientation','10-66.1066-UrbanPeru-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanPeru w1, echo=F}
s1066_UrbanPeru_w1_orientation <-opal.execute(o,'s1066_UrbanPeru_w1_orientation')
vari <- s1066_UrbanPeru_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanPeru_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanPeru w1}
t1066_ds_UP_w1 <- tibble(id=s1066_UrbanPeru_w1_orientation$id)
t1066_ds_UP_w1$orientation <- rep( 999,length(t1066_ds_UP_w1$id))
t1066_ds_UP_w1$orientation[which(((s1066_UrbanPeru_w1_orientation$DAY==1)&(s1066_UrbanPeru_w1_orientation$MONTH==1)&(s1066_UrbanPeru_w1_orientation$YEAR==1)&(s1066_UrbanPeru_w1_orientation$SEASON==1)))]<-1
t1066_ds_UP_w1$orientation[which(((s1066_UrbanPeru_w1_orientation$DAY==0)|(s1066_UrbanPeru_w1_orientation$MONTH==0)|(s1066_UrbanPeru_w1_orientation$YEAR==0)|(s1066_UrbanPeru_w1_orientation$SEASON==0)))]<- 0
t1066_ds_UP_w1$orientation <- labelled(t1066_ds_UP_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w1, echo=F}
vari <- t1066_ds_UP_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w1, echo=F}
AfterH <- table(t1066_ds_UP_w1$orientation)
combi<-sum(na.omit((s1066_UrbanPeru_w1_orientation$DAY==1)&(s1066_UrbanPeru_w1_orientation$MONTH==1)&(s1066_UrbanPeru_w1_orientation$YEAR==1)&(s1066_UrbanPeru_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanPeru_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```







```{r importOPAL UrbanPeru w1, echo=FALSE}

label(t1066_ds_UP_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UP_w1', t1066_ds_UP_w1)
#opal.symbol_import(o,'t1066_ds_UP_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UP_w1
save(orientation, file = "../RData/UP_w1/orientation.RData")

t1066_m_ds_UP_w1 <- t1066_ds_UP_w1
t1066_m_ds_UP_w1$orientation <- car::recode(t1066_m_ds_UP_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w1', t1066_m_ds_UP_w1)
#opal.symbol_import(o,'t1066_m_ds_UP_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description


| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|`1066-UrbanPeru-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign UrbanPeru w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanPeru_w2_orientation','10-66.1066-UrbanPeru-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanPeru w2, echo=F}
s1066_UrbanPeru_w2_orientation <-opal.execute(o,'s1066_UrbanPeru_w2_orientation')
vari <- s1066_UrbanPeru_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanPeru_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanPeru_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanPeru w2}
t1066_ds_UP_w2 <- tibble(id=s1066_UrbanPeru_w2_orientation$id)
t1066_ds_UP_w2$orientation <- rep( 999,length(t1066_ds_UP_w2$id))
t1066_ds_UP_w2$orientation[which(((s1066_UrbanPeru_w2_orientation$f_DAY==1)&(s1066_UrbanPeru_w2_orientation$f_MONTH==1)&(s1066_UrbanPeru_w2_orientation$f_YEAR==1)&(s1066_UrbanPeru_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_UP_w2$orientation[which(((s1066_UrbanPeru_w2_orientation$f_DAY==0)|(s1066_UrbanPeru_w2_orientation$f_MONTH==0)|(s1066_UrbanPeru_w2_orientation$f_YEAR==0)|(s1066_UrbanPeru_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_UP_w2$orientation <- labelled(t1066_ds_UP_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanPeru w2, echo=F}
vari <- t1066_ds_UP_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UP_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanPeru w2, echo=F}
AfterH <- table(t1066_ds_UP_w2$orientation)
combi<-sum(na.omit((s1066_UrbanPeru_w2_orientation$f_DAY==1)&(s1066_UrbanPeru_w2_orientation$f_MONTH==1)&(s1066_UrbanPeru_w2_orientation$f_YEAR==1)&(s1066_UrbanPeru_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_UrbanPeru_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL UrbanPeru w2, echo=FALSE}

label(t1066_ds_UP_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UP_w2', t1066_ds_UP_w2)
#opal.symbol_import(o,'t1066_ds_UP_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UP_w2
save(orientation, file = "../RData/UP_w2/orientation.RData")

t1066_m_ds_UP_w2 <- t1066_ds_UP_w2
t1066_m_ds_UP_w2$orientation <- car::recode(t1066_m_ds_UP_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UP_w2', t1066_m_ds_UP_w2)
#opal.symbol_import(o,'t1066_m_ds_UP_w2', project='_Athlos_Harm_Dataset')
```


## RuralPeru

### Wave 1

#### Study-specific variable description



| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|`1066-RuralPeru-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign RuralPeru w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralPeru_w1_orientation','10-66.1066-RuralPeru-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralPeru w1, echo=F}
s1066_RuralPeru_w1_orientation <-opal.execute(o,'s1066_RuralPeru_w1_orientation')
vari <- s1066_RuralPeru_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralPeru_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralPeru w1}
t1066_ds_RP_w1 <- tibble(id=s1066_RuralPeru_w1_orientation$id)
t1066_ds_RP_w1$orientation <- rep( 999,length(t1066_ds_RP_w1$id))
t1066_ds_RP_w1$orientation[which(((s1066_RuralPeru_w1_orientation$DAY==1)&(s1066_RuralPeru_w1_orientation$MONTH==1)&(s1066_RuralPeru_w1_orientation$YEAR==1)&(s1066_RuralPeru_w1_orientation$SEASON==1)))]<-1
t1066_ds_RP_w1$orientation[which(((s1066_RuralPeru_w1_orientation$DAY==0)|(s1066_RuralPeru_w1_orientation$MONTH==0)|(s1066_RuralPeru_w1_orientation$YEAR==0)|(s1066_RuralPeru_w1_orientation$SEASON==0)))]<- 0
t1066_ds_RP_w1$orientation <- labelled(t1066_ds_RP_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w1, echo=F}
vari <- t1066_ds_RP_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w1, echo=F}
AfterH <- table(t1066_ds_RP_w1$orientation)
combi<-sum(na.omit((s1066_RuralPeru_w1_orientation$DAY==1)&(s1066_RuralPeru_w1_orientation$MONTH==1)&(s1066_RuralPeru_w1_orientation$YEAR==1)&(s1066_RuralPeru_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralPeru_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralPeru w1, echo=FALSE}

label(t1066_ds_RP_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RP_w1', t1066_ds_RP_w1)
#opal.symbol_import(o,'t1066_ds_RP_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RP_w1
save(orientation, file = "../RData/RP_w1/orientation.RData")

t1066_m_ds_RP_w1 <- t1066_ds_RP_w1
t1066_m_ds_RP_w1$orientation <- car::recode(t1066_m_ds_RP_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w1', t1066_m_ds_RP_w1)
#opal.symbol_import(o,'t1066_m_ds_RP_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|`1066-RuralPeru-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralPeru w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralPeru_w2_orientation','10-66.1066-RuralPeru-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralPeru w2, echo=F}
s1066_RuralPeru_w2_orientation <-opal.execute(o,'s1066_RuralPeru_w2_orientation')
vari <- s1066_RuralPeru_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralPeru_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralPeru_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralPeru w2}
t1066_ds_RP_w2 <- tibble(id=s1066_RuralPeru_w2_orientation$id)
t1066_ds_RP_w2$orientation <- rep( 999,length(t1066_ds_RP_w2$id))
t1066_ds_RP_w2$orientation[which(((s1066_RuralPeru_w2_orientation$f_DAY==1)&(s1066_RuralPeru_w2_orientation$f_MONTH==1)&(s1066_RuralPeru_w2_orientation$f_YEAR==1)&(s1066_RuralPeru_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_RP_w2$orientation[which(((s1066_RuralPeru_w2_orientation$f_DAY==0)|(s1066_RuralPeru_w2_orientation$f_MONTH==0)|(s1066_RuralPeru_w2_orientation$f_YEAR==0)|(s1066_RuralPeru_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_RP_w2$orientation <- labelled(t1066_ds_RP_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralPeru w2, echo=F}
vari <- t1066_ds_RP_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RP_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralPeru w2, echo=F}
AfterH <- table(t1066_ds_RP_w2$orientation)
combi<-sum(na.omit((s1066_RuralPeru_w2_orientation$f_DAY==1)&(s1066_RuralPeru_w2_orientation$f_MONTH==1)&(s1066_RuralPeru_w2_orientation$f_YEAR==1)&(s1066_RuralPeru_w2_orientation$f_SEASON==1)))
BeforeH <- c(length(s1066_RuralPeru_w2_orientation$f_YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```






```{r importOPAL RuralPeru w2, echo=FALSE}

label(t1066_ds_RP_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RP_w2', t1066_ds_RP_w2)
#opal.symbol_import(o,'t1066_ds_RP_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RP_w2
save(orientation, file = "../RData/RP_w2/orientation.RData")

t1066_m_ds_RP_w2 <- t1066_ds_RP_w2
t1066_m_ds_RP_w2$orientation <- car::recode(t1066_m_ds_RP_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RP_w2', t1066_m_ds_RP_w2)
#opal.symbol_import(o,'t1066_m_ds_RP_w2', project='_Athlos_Harm_Dataset')
```


## UrbanMexico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|`1066-UrbanMexico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign UrbanMexico w1, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w1_orientation','10-66.1066-UrbanMexico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local UrbanMexico w1, echo=F}
s1066_UrbanMexico_w1_orientation <-opal.execute(o,'s1066_UrbanMexico_w1_orientation')
vari <- s1066_UrbanMexico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanMexico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanMexico w1}
t1066_ds_UM_w1 <- tibble(id=s1066_UrbanMexico_w1_orientation$id)
t1066_ds_UM_w1$orientation <- rep( 999,length(t1066_ds_UM_w1$id))
t1066_ds_UM_w1$orientation[which(((s1066_UrbanMexico_w1_orientation$DAY==1)&(s1066_UrbanMexico_w1_orientation$MONTH==1)&(s1066_UrbanMexico_w1_orientation$YEAR==1)&(s1066_UrbanMexico_w1_orientation$SEASON==1)))]<-1
t1066_ds_UM_w1$orientation[which(((s1066_UrbanMexico_w1_orientation$DAY==0)|(s1066_UrbanMexico_w1_orientation$MONTH==0)|(s1066_UrbanMexico_w1_orientation$YEAR==0)|(s1066_UrbanMexico_w1_orientation$SEASON==0)))]<- 0
t1066_ds_UM_w1$orientation <- labelled(t1066_ds_UM_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w1, echo=F}
vari <- t1066_ds_UM_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w1, echo=F}
AfterH <- table(t1066_ds_UM_w1$orientation)
combi<-sum(na.omit((s1066_UrbanMexico_w1_orientation$DAY==1)&(s1066_UrbanMexico_w1_orientation$MONTH==1)&(s1066_UrbanMexico_w1_orientation$YEAR==1)&(s1066_UrbanMexico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_UrbanMexico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL UrbanMexico w1, echo=FALSE}

label(t1066_ds_UM_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UM_w1', t1066_ds_UM_w1)
#opal.symbol_import(o,'t1066_ds_UM_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UM_w1
save(orientation, file = "../RData/UM_w1/orientation.RData")

t1066_m_ds_UM_w1 <- t1066_ds_UM_w1
t1066_m_ds_UM_w1$orientation <- car::recode(t1066_m_ds_UM_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w1', t1066_m_ds_UM_w1)
#opal.symbol_import(o,'t1066_m_ds_UM_w1', project='_Athlos_Harm_Dataset')
```


### Wave 2

#### Study-specific variable description


| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|`1066-UrbanMexico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |

```{r assign UrbanMexico w2, echo=F}
opal.assign.table.tibble(o, 's1066_UrbanMexico_w2_orientation','10-66.1066-UrbanMexico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local UrbanMexico w2, echo=F}
s1066_UrbanMexico_w2_orientation <-opal.execute(o,'s1066_UrbanMexico_w2_orientation')
vari <- s1066_UrbanMexico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_UrbanMexico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_UrbanMexico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo UrbanMexico w2}
t1066_ds_UM_w2 <- tibble(id=s1066_UrbanMexico_w2_orientation$id)
t1066_ds_UM_w2$orientation <- rep( 999,length(t1066_ds_UM_w2$id))
t1066_ds_UM_w2$orientation[which(((s1066_UrbanMexico_w2_orientation$f_DAY==1)&(s1066_UrbanMexico_w2_orientation$f_MONTH==1)&(s1066_UrbanMexico_w2_orientation$f_YEAR==1)&(s1066_UrbanMexico_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_UM_w2$orientation[which(((s1066_UrbanMexico_w2_orientation$f_DAY==0)|(s1066_UrbanMexico_w2_orientation$f_MONTH==0)|(s1066_UrbanMexico_w2_orientation$f_YEAR==0)|(s1066_UrbanMexico_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_UM_w2$orientation <- labelled(t1066_ds_UM_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript UrbanMexico w2, echo=F}
vari <- t1066_ds_UM_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_UM_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation UrbanMexico w2, echo=F}
AfterH <- table(t1066_ds_UM_w2$orientation)
combi<-sum(na.omit((s1066_UrbanMexico_w2_orientation$f_DAY==1)&(s1066_UrbanMexico_w2_orientation$f_MONTH==1)&(s1066_UrbanMexico_w2_orientation$f_YEAR==1)&(s1066_UrbanMexico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_UrbanMexico_w2_orientation$f_YEAR)-length(na.omit(s1066_UrbanMexico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_UrbanMexico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```






```{r importOPAL UrbanMexico w2, echo=FALSE}

label(t1066_ds_UM_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_UM_w2', t1066_ds_UM_w2)
#opal.symbol_import(o,'t1066_ds_UM_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_UM_w2
save(orientation, file = "../RData/UM_w2/orientation.RData")

t1066_m_ds_UM_w2 <- t1066_ds_UM_w2
t1066_m_ds_UM_w2$orientation <- car::recode(t1066_m_ds_UM_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_UM_w2', t1066_m_ds_UM_w2)
#opal.symbol_import(o,'t1066_m_ds_UM_w2', project='_Athlos_Harm_Dataset')
```


## RuralMexico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|`1066-RuralMexico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralMexico w1, echo=F}
opal.assign.table.tibble(o, 's1066_RuralMexico_w1_orientation','10-66.1066-RuralMexico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local RuralMexico w1, echo=F}
s1066_RuralMexico_w1_orientation <-opal.execute(o,'s1066_RuralMexico_w1_orientation')
vari <- s1066_RuralMexico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralMexico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralMexico w1}
t1066_ds_RM_w1 <- tibble(id=s1066_RuralMexico_w1_orientation$id)
t1066_ds_RM_w1$orientation <- rep( 999,length(t1066_ds_RM_w1$id))
t1066_ds_RM_w1$orientation[which(((s1066_RuralMexico_w1_orientation$DAY==1)&(s1066_RuralMexico_w1_orientation$MONTH==1)&(s1066_RuralMexico_w1_orientation$YEAR==1)&(s1066_RuralMexico_w1_orientation$SEASON==1)))]<-1
t1066_ds_RM_w1$orientation[which(((s1066_RuralMexico_w1_orientation$DAY==0)|(s1066_RuralMexico_w1_orientation$MONTH==0)|(s1066_RuralMexico_w1_orientation$YEAR==0)|(s1066_RuralMexico_w1_orientation$SEASON==0)))]<- 0
t1066_ds_RM_w1$orientation <- labelled(t1066_ds_RM_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w1, echo=F}
vari <- t1066_ds_RM_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w1, echo=F}
AfterH <- table(t1066_ds_RM_w1$orientation)
combi<-sum(na.omit((s1066_RuralMexico_w1_orientation$DAY==1)&(s1066_RuralMexico_w1_orientation$MONTH==1)&(s1066_RuralMexico_w1_orientation$YEAR==1)&(s1066_RuralMexico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_RuralMexico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL RuralMexico w1, echo=FALSE}

label(t1066_ds_RM_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RM_w1', t1066_ds_RM_w1)
#opal.symbol_import(o,'t1066_ds_RM_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RM_w1
save(orientation, file = "../RData/RM_w1/orientation.RData")

t1066_m_ds_RM_w1 <- t1066_ds_RM_w1
t1066_m_ds_RM_w1$orientation <- car::recode(t1066_m_ds_RM_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w1', t1066_m_ds_RM_w1)
#opal.symbol_import(o,'t1066_m_ds_RM_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|`1066-RuralMexico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |



```{r assign RuralMexico w2, echo=F}
opal.assign.table.tibble(o, 's1066_RuralMexico_w2_orientation','10-66.1066-RuralMexico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local RuralMexico w2, echo=F}
s1066_RuralMexico_w2_orientation <-opal.execute(o,'s1066_RuralMexico_w2_orientation')
vari <- s1066_RuralMexico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_RuralMexico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_RuralMexico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo RuralMexico w2}
t1066_ds_RM_w2 <- tibble(id=s1066_RuralMexico_w2_orientation$id)
t1066_ds_RM_w2$orientation <- rep( 999,length(t1066_ds_RM_w2$id))
t1066_ds_RM_w2$orientation[which(((s1066_RuralMexico_w2_orientation$f_DAY==1)&(s1066_RuralMexico_w2_orientation$f_MONTH==1)&(s1066_RuralMexico_w2_orientation$f_YEAR==1)&(s1066_RuralMexico_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_RM_w2$orientation[which(((s1066_RuralMexico_w2_orientation$f_DAY==0)|(s1066_RuralMexico_w2_orientation$f_MONTH==0)|(s1066_RuralMexico_w2_orientation$f_YEAR==0)|(s1066_RuralMexico_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_RM_w2$orientation <- labelled(t1066_ds_RM_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript RuralMexico w2, echo=F}
vari <- t1066_ds_RM_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_RM_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation RuralMexico w2, echo=F}
AfterH <- table(t1066_ds_RM_w2$orientation)
combi<-sum(na.omit((s1066_RuralMexico_w2_orientation$f_DAY==1)&(s1066_RuralMexico_w2_orientation$f_MONTH==1)&(s1066_RuralMexico_w2_orientation$f_YEAR==1)&(s1066_RuralMexico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_RuralMexico_w2_orientation$f_YEAR)-length(na.omit(s1066_RuralMexico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_RuralMexico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1", "NA->999") 
kable(C)
```





```{r importOPAL RuralMexico w2, echo=FALSE}

label(t1066_ds_RM_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_RM_w2', t1066_ds_RM_w2)
#opal.symbol_import(o,'t1066_ds_RM_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_RM_w2
save(orientation, file = "../RData/RM_w2/orientation.RData")

t1066_m_ds_RM_w2 <- t1066_ds_RM_w2
t1066_m_ds_RM_w2$orientation <- car::recode(t1066_m_ds_RM_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_RM_w2', t1066_m_ds_RM_w2)
#opal.symbol_import(o,'t1066_m_ds_RM_w2', project='_Athlos_Harm_Dataset')
```



## PuertoRico

### Wave 1

#### Study-specific variable description




| **Name** |`DAY`|`MONTH`|`YEAR`|`SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|`1066-PuertoRico-Baseline`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |


```{r assign PuertoRico w1, echo=F}
opal.assign.table.tibble(o, 's1066_PuertoRico_w1_orientation','10-66.1066-PuertoRico-Baseline', variables=list('DAY','MONTH','YEAR','SEASON'), missings = TRUE)
```

```{r local PuertoRico w1, echo=F}
s1066_PuertoRico_w1_orientation <-opal.execute(o,'s1066_PuertoRico_w1_orientation')
vari <- s1066_PuertoRico_w1_orientation$DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_PuertoRico_w1_orientation$SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w1_orientation, aes(x=factor(SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo PuertoRico w1}
t1066_ds_PR_w1 <- tibble(id=s1066_PuertoRico_w1_orientation$id)
t1066_ds_PR_w1$orientation <- rep( 999,length(t1066_ds_PR_w1$id))
t1066_ds_PR_w1$orientation[which(((s1066_PuertoRico_w1_orientation$DAY==1)&(s1066_PuertoRico_w1_orientation$MONTH==1)&(s1066_PuertoRico_w1_orientation$YEAR==1)&(s1066_PuertoRico_w1_orientation$SEASON==1)))]<-1
t1066_ds_PR_w1$orientation[which(((s1066_PuertoRico_w1_orientation$DAY==0)|(s1066_PuertoRico_w1_orientation$MONTH==0)|(s1066_PuertoRico_w1_orientation$YEAR==0)|(s1066_PuertoRico_w1_orientation$SEASON==0)))]<- 0
t1066_ds_PR_w1$orientation <- labelled(t1066_ds_PR_w1$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w1, echo=F}
vari <- t1066_ds_PR_w1$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w1, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w1, echo=F}
AfterH <- table(t1066_ds_PR_w1$orientation)
combi<-sum(na.omit((s1066_PuertoRico_w1_orientation$DAY==1)&(s1066_PuertoRico_w1_orientation$MONTH==1)&(s1066_PuertoRico_w1_orientation$YEAR==1)&(s1066_PuertoRico_w1_orientation$SEASON==1)))
BeforeH <- c(length(s1066_PuertoRico_w1_orientation$YEAR)-combi,combi)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1") 
kable(C)
```





```{r importOPAL PuertoRico w1, echo=FALSE}

label(t1066_ds_PR_w1$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_PR_w1', t1066_ds_PR_w1)
#opal.symbol_import(o,'t1066_ds_PR_w1', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_PR_w1
save(orientation, file = "../RData/PR_w1/orientation.RData")

t1066_m_ds_PR_w1 <- t1066_ds_PR_w1
t1066_m_ds_PR_w1$orientation <- car::recode(t1066_m_ds_PR_w1$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w1', t1066_m_ds_PR_w1)
#opal.symbol_import(o,'t1066_m_ds_PR_w1', project='_Athlos_Harm_Dataset')
```



### Wave 2

#### Study-specific variable description



| **Name** |`f_DAY`|`f_MONTH`|`f_YEAR`|`f_SEASON`|
|-|-|-|-|-|
| **Label** |`Cognition Date naming-Day of month`|`Cognition Date naming-Month`|`Cognition Date naming-Year`|`temporal orientation - season`|
| **Table name** |`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|`1066-PuertoRico-Followup`|
| **Categories** |`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|`0 = Incorrect; 1 = Correct`|
| **Missings** |`NA`|`NA`|`NA`|`NA`|
| **Description** |  |  |  |  |




```{r assign PuertoRico w2, echo=F}
opal.assign.table.tibble(o, 's1066_PuertoRico_w2_orientation','10-66.1066-PuertoRico-Followup', variables=list('f_DAY','f_MONTH','f_YEAR','f_SEASON'), missings = TRUE)
```

```{r local PuertoRico w2, echo=F}
s1066_PuertoRico_w2_orientation <-opal.execute(o,'s1066_PuertoRico_w2_orientation')
vari <- s1066_PuertoRico_w2_orientation$f_DAY
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_DAY")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_DAY))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Day") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_MONTH
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_MONTH")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_MONTH))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Month") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_YEAR
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_YEAR")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_YEAR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Year") + ylab("Frequency")
vari <- s1066_PuertoRico_w2_orientation$f_SEASON
kable(Categorical_summary(vari, missing_values = NA)[2], caption = "f_SEASON")
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(s1066_PuertoRico_w2_orientation, aes(x=factor(f_SEASON))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time-Season") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `all 1 into 1` 
* `some 0 into 0`
* `NA into 999`

**R script:**
```{r harmo PuertoRico w2}
t1066_ds_PR_w2 <- tibble(id=s1066_PuertoRico_w2_orientation$id)
t1066_ds_PR_w2$orientation <- rep( 999,length(t1066_ds_PR_w2$id))
t1066_ds_PR_w2$orientation[which(((s1066_PuertoRico_w2_orientation$f_DAY==1)&(s1066_PuertoRico_w2_orientation$f_MONTH==1)&(s1066_PuertoRico_w2_orientation$f_YEAR==1)&(s1066_PuertoRico_w2_orientation$f_SEASON==1)))]<-1
t1066_ds_PR_w2$orientation[which(((s1066_PuertoRico_w2_orientation$f_DAY==0)|(s1066_PuertoRico_w2_orientation$f_MONTH==0)|(s1066_PuertoRico_w2_orientation$f_YEAR==0)|(s1066_PuertoRico_w2_orientation$f_SEASON==0)))]<- 0
t1066_ds_PR_w2$orientation <- labelled(t1066_ds_PR_w2$orientation, labels = c(Yes=0, No=1,Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript PuertoRico w2, echo=F}
vari <- t1066_ds_PR_w2$orientation
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = "orientation")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(t1066_ds_PR_w2, aes(x=factor(orientation))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("orientation in time") + ylab("Frequency")
```

#### Validation
```{r crosstabulation PuertoRico w2, echo=F}
AfterH <- table(t1066_ds_PR_w2$orientation)
combi<-sum(na.omit((s1066_PuertoRico_w2_orientation$f_DAY==1)&(s1066_PuertoRico_w2_orientation$f_MONTH==1)&(s1066_PuertoRico_w2_orientation$f_YEAR==1)&(s1066_PuertoRico_w2_orientation$f_SEASON==1)))
nas<-length(s1066_PuertoRico_w2_orientation$f_YEAR)-length(na.omit(s1066_PuertoRico_w2_orientation$f_YEAR))
BeforeH <- c(length(s1066_PuertoRico_w2_orientation$f_YEAR)-combi-nas,combi,nas)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("some 0->0","all 1->1","NA->999") 
kable(C)
```






```{r importOPAL PuertoRico w2, echo=FALSE}

label(t1066_ds_PR_w2$orientation) <- "Difficulties for orientation in time"
#opal.assign.data(o, 't1066_ds_PR_w2', t1066_ds_PR_w2)
#opal.symbol_import(o,'t1066_ds_PR_w2', project='_Athlos_Harm_Dataset')
orientation <- t1066_ds_PR_w2
save(orientation, file = "../RData/PR_w2/orientation.RData")

t1066_m_ds_PR_w2 <- t1066_ds_PR_w2
t1066_m_ds_PR_w2$orientation <- car::recode(t1066_m_ds_PR_w2$orientation, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 't1066_m_ds_PR_w2', t1066_m_ds_PR_w2)
#opal.symbol_import(o,'t1066_m_ds_PR_w2', project='_Athlos_Harm_Dataset')
```





## Descriptive statistics of the harmonised variable accross populations and waves

Percentages of categories in each harmonised variable:




```{r helpfunctions, echo=F}


labelling <- function(l.hds,m.hds){
  
  # Labelling of the tibbles with categorical data and creating new tibbles with all missings recodified as NA

  for(name in names(l.hds)) {
    # In the aux_object we copy the old tibble to recodify all missing values as NA.
    aux_object <- l.hds[[name]]
    # Labelling of variables
    label(l.hds[[name]][[2]]) <- label(aux_object[[2]]) <- ds_label
    # Labelling of categories (for continues variables, only missing values)
    l.hds[[name]][[2]] <- labelled(l.hds[[name]][[2]], labels = cat_label)
    aux_object[[2]] <- car::recode(aux_object[[2]], "miss_values_vector=NA")
    # Labelling of categories (for categorical variables, only non-missing values)
    aux_object[[2]] <- labelled(aux_object[[2]], labels = cat_label[1:2])
  # Saving the recodified tibble in list m.hds
    m.hds[[name]] <- aux_object
    rm(aux_object)
  }
  return(list(l.hds,m.hds))

}

# Creation of summary tables for categorical data

summaries <- function(l.hds,m.hds,lnames){

  # Creation of columns with categories and labels
  t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
  # For each wave/population in l.hds, add the correponding values
  for (i in seq_along(l.hds)){
    t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
  }
  # Add sample size for each wave/population
  t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
  )
  # Add wave/population names
  names(t.hds)<-c("val", "label",lnames)
  return(t.hds)
  
}


```




```{r summ, echo=F}

# All study waves and populations with abbreviated and descriptive names

b1066.cw <- list(cuba_w1 = c("cuba_w1","Cuba w1"), india_w1 = c("india_w1","India w1"), UCh_w1 = c("UCh_w1","Urban China w1"), RCh_w1 = c("RCh_w1","Rural China w1"), DR_w1 = c("DR_w1","Dominican Republic w1"), Ven_w1 = c("Ven_w1","Venezuela w1"), UP_w1 = c("UP_w1","Urban Peru w1"), RP_w1 = c("RP_w1","Rural Peru w1"), UM_w1 = c("UM_w1","Urban Mexico w1"), RM_w1 = c("RM_w1","Rural Mexico w1"), PR_w1 = c("PR_w1","Puerto Rico w1"))

f1066.cw <- list(cuba_w2 = c("cuba_w2","Cuba w2"), UCh_w2 = c("UCh_w2","Urban China w2"), RCh_w2 = c("RCh_w2","Rural China w2"), DR_w2 = c("DR_w2","Dominican Republic w2"), Ven_w2 = c("Ven_w2","Venezuela w2"), UP_w2 = c("UP_w2","Urban Peru w2"), RP_w2 = c("RP_w2","Rural Peru w2"), UM_w2 = c("UM_w2","Urban Mexico w2"), RM_w2 = c("RM_w2","Rural Mexico w2"), PR_w2 = c("PR_w2","Puerto Rico w2"))


# Consider only harmonised waves
l.hds <- lapply(b1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)

if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]])
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]])),caption=ds_label))
}




# Consider only harmonised waves
l.hds <- lapply(f1066.cw, function(wname) if(exists(paste0("t1066_ds_",wname[1]))){wname = list(get(paste0("t1066_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]])
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]])),caption=ds_label))
}


```



# Quality estimation

For this study, the variable is a composed combining day, month, year and season 
which is different from the calculation performed in other studies where day of the month,
day of the week, month and year are available. 
The presence of a mistake in some of the components determines the presence of difficulties with orientation in time.
The India database seems to show higher mean errors in time orientation, this is
more remarkable in "year" where incorrect answers are more frequent than correct 
in contrast with the results in the rest of time orientation variables. 



```{r closeRsession, echo=FALSE}
opal.logout(o)
```

