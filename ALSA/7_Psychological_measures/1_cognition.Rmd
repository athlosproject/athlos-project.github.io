---
title: "Cognition"
output: 
  html_document:
    theme: united
    highlight: tango
    toc: true
    toc_depth: 6
    toc_float:
      collapsed: true
      smooth_scroll: true
    number_sections: true
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->



```{r setup, include=FALSE,  echo=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_laia.r")
```

<!-- ########################################################## --> 

# Description of DataSchema variable 

* Short name: `cog_stat`
* Variable label: `Cognitive status of the participant, assessed by the Mini Mental State Examination`
* Domain: `Psycological measures`
* Value type: `categorical`
* Category coding:
* Comments: `The test used is the Mini Mental State Examination (MMSE). Two values have been created for the potential variable: 0=no cognitive impairment (when the score is greater or equal to 23) and 1=cognitive impairment (when the score is lower to 23).`

**Code** | **Category Label**
-------- | ------------------------
0        | no cognitive impairment
1        | cognitive impairment

* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing


```{r lab, echo=FALSE}
ds_label <- "Cognitive status"
ds_label_all <- "Cognitive status of the participant, assessed by the Mini Mental State Examination"
```

<!-- ########################################################## --> 

<!-- ########################################################## --> 

# Data process

## ALSA (Australian population)

### Wave 1

There is no variable.



### Wave 2 

There is no variable. 
 
 

 


### Wave 3 

#### Study-specific variable description



| **Name** | `YEARW3`| `SEASONW3` | `TIMEW3` | `WEEKW3` | `MONTHW3` | `STATEW3` | `COUNTW3` | `CITYW3` | `SUBURBW3` | `FLOORW3` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `DAY - YEAR`| `SEASON` | `TIME` | `DATE - WEEK` | `DAY - MONTH` | `STATE` | `COUNTRY` | `CITY` | `SUBURB` | `FLOOR` | 
| **Table name** | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`9 = no answer`| `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | 


| **Name** | `THRTHGW3`| `PENNYW3` | `TBLEW3` | `MATHSW3` | `EIGHSXW3` | `SEVNINW3` | `SEVTWOW3` | `SIXFIVW3` | `DW3` | `LW3` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT REMEMBERS APPLE?`| `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | `NOW, SPEAKING ALOUD, SUBTRACT 7 FROM 100` | `93 - 7 = 86?` | `86 - 7 = 79?` | `79 - 7 = 72?` | `72 - 7 = 65?` | `FIRST LETTER - D?` | `SECOND LETTER - L?` | 
| **Table name** | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`9 = no answer`| `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | 


| **Name** | `RW3`| `OW3` | `WW3` | `REMEMW3` | `PENNW3` | `TABLW3` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `THIRD LETTER - R?`| `FOURTH LETTER - O?` | `FIFTH LETTER - W?` | `RESPONDENT REMEMBERS APPLE` | `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | 
| **Table name** | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` |
| **Missing** |`9 = no answer`| `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | 


| **Name** | `WATCHW3`| `PENW3` | `PHRASEW3` | `PAPTSTW3` | `PAPHLFW3` | `PAPLAPW3` | `RDPAGEW3` | `WRITSNW3` | `DESIGNW3` |
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT IDENTIFIES WATCH`| `RESPONDENT IDENTIFIES PEN` | `NO IFS ANDS OR BUTS` | `PAPER TEST` | `FOLDS PAPER IN HALF WITH BOTH HANDS?` | `PUTS PAPER ON LAP?` | `CLOSE YOUR EYES` | `COMPLETE SENTENCE?` | `CONVEX FIGURES COPIED CORRECTLY?` | 
| **Table name** | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | `ALSA-Wave3` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` |  
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| | `3 = Incapable of response` | `3 = Incapable of response`| `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` |
| **Missing** |`9 = no answer`| `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` | `9 = no answer` |  
| **Description** |  | | | | | | | | | | 

```{r assign3, echo=FALSE}
opal.assign.table.tibble(o, 'ALSA_cog','ALSA.ALSA-Wave3',
                         variables=list('YEARW3', 'SEASONW3', 'TIMEW3', 'WEEKW3', 'MONTHW3', 'STATEW3', 'COUNTW3', 'CITYW3', 'SUBURBW3', 'FLOORW3', 'THRTHGW3', 'PENNYW3', 'TBLEW3', 'MATHSW3', 'EIGHSXW3', 'SEVNINW3', 'SEVTWOW3', 'SIXFIVW3', 'DW3',  'LW3', 'RW3',  'OW3', 'WW3', 'REMEMW3', 'PENNW3', 'TABLW3', 'WATCHW3', 'PENW3', 'PHRASEW3', 'PAPTSTW3', 'PAPHLFW3', 'PAPLAPW3', 'RDPAGEW3', 'WRITSNW3', 'DESIGNW3'), missings = TRUE)
ALSA_cog <- opal.execute(o,'ALSA_cog')
```


```{r local3, echo=FALSE}
vari <- ALSA_cog$YEARW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEASONW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TIMEW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WEEKW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MONTHW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$STATEW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$COUNTW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$CITYW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SUBURBW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$FLOORW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$THRTHGW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNYW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TBLEW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MATHSW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$EIGHSXW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVNINW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVTWOW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SIXFIVW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$LW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$OW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$REMEMW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TABLW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WATCHW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PHRASEW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPTSTW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPHLFW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPLAPW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RDPAGEW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WRITSNW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DESIGNW3
kable(Categorical_summary(vari, missing_values = c(9))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(9))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(9))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variables they have to be recoded as follows:

* The variables yearw3, seasonw3, timew3, weekw3, monthw3, statew3, countw3, cityw3, suburbw3, floorw3, thrthgw3, pennyw3, tblew3, rememw3, pennw3, tablw3:
    + 'keep 'Correct' into 1'
    + 'recode 2 'incorrect' into 0'
    + 'recode 9 'no answer' into 0'
* The variables watchw3, penw3, phrasew3, paptstw3, paphlfw3, paplapw3, rdpagew3, writsnw3, designw3:
    + 'keep 'correct' into 1'
    + 'recode 2 'incorrect' into 0'
    + 'recode 3 'incapable of response' into 996'
    + 'recode 9 'no answer' into 0'
* The variables (MATHS) mathsw3, eighsxw3, sevninw3, sevtwow3, sixfivw3:
    + 'keep 'Correct' into 1'
    + 'recode 2 'incorrect' into 0'
    + 'recode 9 'no answer' into 0'
* The variables (SPELLING) dw3, lw3, rw3, ow3, ww3:
    + 'keep 'Correct' into 1'
    + 'recode 2 'incorrect' into 0'
    + 'recode 9 'no answer' into 0'

Afterwards, sum all the first two sets of items and sum the maximum score between maths items or spelling ones but there are some specific cases that has to be recoded as follows:

* The individuals with at most 6 missing values, their final score is divided by the number of answered items and multiplied by 30
* The individuals with more than 6 missing values are recoded as 999
* There are some sets of items that some individuals could not do them because were sensible to literacy or functional limitations (i.e. blindness). That sets of items are the next ones:'
    + `d1 = MATHSW3, EIGHSXW3, SEVNINW3, SEVTWOW3, SIXFIVW3`
    + `d3 = PAPTSTW3, PAPHLFW3, PAPLAPW3`
    + `d4 = RDPAGEW3`
    + `d5 = WRITSNW3`
    + `d6 = DESIGNW3`
If the individual has at least one of the item as not applicable of these sets, all the set is considered as not applicable and the final score is recoded multiplied by 30 their final score and dividing by (30-d1-d3-d4-d5-d6) where d1 = -5 if some items of d1 is not applicable and in the same way d3 = -3 and (d4, d5, d6)=-1.

Finally, the final score is recoded as follows:

* `final_score < 24 into 1` 
* `final_score >= 24 into 0`

**R script:**

```{r harmo3, echo=TRUE}
ALSA_cog$i1 <- car::recode(ALSA_cog$YEARW3, "2=0; 9=0")
ALSA_cog$i2 <- car::recode(ALSA_cog$SEASONW3, "2=0; 9=0")
ALSA_cog$i3 <- car::recode(ALSA_cog$TIMEW3, "2=0; 9=0")
ALSA_cog$i4 <- car::recode(ALSA_cog$WEEKW3, "2=0; 9=0")
ALSA_cog$i5 <- car::recode(ALSA_cog$MONTHW3, "2=0; 9=0")
ALSA_cog$i6 <- car::recode(ALSA_cog$STATEW3, "2=0; 9=0")
ALSA_cog$i7 <- car::recode(ALSA_cog$COUNTW3, "2=0; 9=0")
ALSA_cog$i8 <- car::recode(ALSA_cog$CITYW3, "2=0; 9=0")
ALSA_cog$i9 <- car::recode(ALSA_cog$SUBURBW3, "2=0; 9=0")
ALSA_cog$i10 <- car::recode(ALSA_cog$FLOORW3, "2=0; 9=0")
ALSA_cog$i11 <- car::recode(ALSA_cog$THRTHGW3, "2=0; 9=0")
ALSA_cog$i12 <- car::recode(ALSA_cog$PENNYW3, "2=0; 9=0")
ALSA_cog$i13 <- car::recode(ALSA_cog$TBLEW3, "2=0; 9=0")
ALSA_cog$i14 <- car::recode(ALSA_cog$REMEMW3, "2=0; 9=0")
ALSA_cog$i15 <- car::recode(ALSA_cog$PENNW3, "2=0; 9=0")
ALSA_cog$i16 <- car::recode(ALSA_cog$TABLW3, "2=0; 9=0")

ALSA_cog$i17 <- car::recode(ALSA_cog$WATCHW3, "2=0; 3=NA; 9=0")
ALSA_cog$i18 <- car::recode(ALSA_cog$PENW3, "2=0; 3=NA; 9=0")
ALSA_cog$i19 <- car::recode(ALSA_cog$PHRASEW3, "2=0; 3=NA; 9=0")
ALSA_cog$i20 <- car::recode(ALSA_cog$PAPTSTW3, "2=0; 3=NA; 9=0")
ALSA_cog$i21 <- car::recode(ALSA_cog$PAPHLFW3, "2=0; 3=NA; 9=0")
ALSA_cog$i22 <- car::recode(ALSA_cog$PAPLAPW3, "2=0; 3=NA; 9=0")
ALSA_cog$i23 <- car::recode(ALSA_cog$RDPAGEW3, "2=0; 3=NA; 9=0")
ALSA_cog$i24 <- car::recode(ALSA_cog$WRITSNW3, "2=0; 3=NA; 9=0")
ALSA_cog$i25 <- car::recode(ALSA_cog$DESIGNW3, "2=0; 3=NA; 9=0")

ALSA_cog$m1 <- car::recode(ALSA_cog$MATHSW3, "2=0; 9=0")
ALSA_cog$m2 <- car::recode(ALSA_cog$EIGHSXW3, "2=0; 9=0")
ALSA_cog$m3 <- car::recode(ALSA_cog$SEVNINW3, "2=0; 9=0")
ALSA_cog$m4 <- car::recode(ALSA_cog$SEVTWOW3, "2=0; 9=0")
ALSA_cog$m5 <- car::recode(ALSA_cog$SIXFIVW3, "2=0; 9=0")

ALSA_cog$s1 <- car::recode(ALSA_cog$DW3, "2=0; 9=0")
ALSA_cog$s2 <- car::recode(ALSA_cog$LW3, "2=0; 9=0")
ALSA_cog$s3 <- car::recode(ALSA_cog$RW3, "2=0; 9=0")
ALSA_cog$s4 <- car::recode(ALSA_cog$OW3, "2=0; 9=0")
ALSA_cog$s5 <- car::recode(ALSA_cog$WW3, "2=0; 9=0")

ALSA_cog$nmiss1 <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmissm <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmisss <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$first_score <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$maths_score <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$spelling_score <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))


ALSA_cog$max_maths_spelling <- apply(ALSA_cog[,76:77], MARGIN = 1, FUN = function(x) which.max(x))

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 1] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 1] + ALSA_cog$maths_score[ALSA_cog$max_maths_spelling == 1]

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 2] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 2] + ALSA_cog$spelling_score[ALSA_cog$max_maths_spelling == 2]


#ALSA_cog$n9 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==9, na.rm = TRUE))
#ALSA_cog$n3 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d1 <- apply(ALSA_cog[,15:19], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d3 <- apply(ALSA_cog[,32:34], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d4 <- apply(ALSA_cog[,31], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d5 <- apply(ALSA_cog[,35], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d6 <- apply(ALSA_cog[,36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))

ALSA_cog$denom <- 30
ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] <- ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] - 5
ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] <- ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] - 3
ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] - 1


ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] <- ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] - car::recode(ALSA_cog$i20[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i21[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i22[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0")


ALSA_cog$nNA <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$final_score[which(ALSA_cog$nNA %in% c(30,35))] <- 999
ALSA_cog$final_score[which(ALSA_cog$nNA==2)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==2)]/28)*30
ALSA_cog$final_score[which(ALSA_cog$denom != 30)] <- (ALSA_cog$final_score[which(ALSA_cog$denom != 30)]*30)/ALSA_cog$denom[which(ALSA_cog$denom != 30)]

ALSA_ds_w3 <- tibble(id=ALSA_cog$id)
ALSA_ds_w3$cog_stat <- car::recode(ALSA_cog$final_score, "lo:23.999999999999=1; 24:900=0")
ALSA_ds_w3$cog_stat <- labelled(ALSA_ds_w3$cog_stat, labels = c("no cognitive impairment"=0, "cognitive impairment"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript3, echo=FALSE}
vari <- ALSA_ds_w3$cog_stat
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(ALSA_ds_w3, aes(x=factor(cog_stat))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("marital status") + ylab("Frequency")
```

#### Validation
```{r crosstabulation3, echo=FALSE}
BeforeH <- c(sum(na.omit(ALSA_cog$final_score)>=24 & na.omit(ALSA_cog$final_score)<900),sum(na.omit(ALSA_cog$final_score)<=23.9999999), sum(na.omit(ALSA_cog$final_score)==999))
AfterH <- table(ALSA_ds_w3$cog_stat)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(24-30)->0","(0-24)->1" ,"NA->999")
kable(C)
```

 
```{r save3, echo=FALSE}
label(ALSA_ds_w3$cog_stat) <- ds_label_all
cog_stat <- ALSA_ds_w3
save(cog_stat, file = "../RData/w3/cog_stat.RData")
rm(cog_stat, ALSA_cog)
```
 

 




### Wave 4 

There is no variable.
 
 

 





### Wave 5 

There is no variable.
 
 

 





### Wave 6 

#### Study-specific variable description

| **Name** | `YEARW6`| `SEASONW6` | `TIMEW6` | `WEEKW6` | `MONTHW6` | `STATEW6` | `COUNTW6` | `CITYW6` | `SUBURBW6` | `FLOORW6` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `DAY - YEAR`| `SEASON` | `TIME` | `DATE - WEEK` | `DAY - MONTH` | `STATE` | `COUNTRY` | `CITY` | `SUBURB` | `FLOOR` | 
| **Table name** | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`2=refused`| `2=refused` | `2=refused` | `2=refused` | `2=refused` | `2=refused` | `2=refused` | `2=refused` | `2=refused` | `2=refused` | 


| **Name** | `THRTHGW6`| `PENNYW6` | `TBLEW6` | `MATHSW6` | `EIGHSXW6` | `SEVNINW6` | `SEVTWOW6` | `SIXFIVW6` | `DW6` | `LW6` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT REMEMBERS APPLE?`| `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | `NOW, SPEAKING ALOUD, SUBTRACT 7 FROM 100` | `93 - 7 = 86?` | `86 - 7 = 79?` | `79 - 7 = 72?` | `72 - 7 = 65?` | `FIRST LETTER - D?` | `SECOND LETTER - L?` | 
| **Table name** | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 


| **Name** | `RW6`| `OW6` | `WW6` | `REMEMW6` | `PENNW6` | `TABLW6` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `THIRD LETTER - R?`| `FOURTH LETTER - O?` | `FIFTH LETTER - W?` | `RESPONDENT REMEMBERS APPLE` | `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | 
| **Table name** | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 



| **Name** | `WATCHW6`| `PENW6` | `PHRASEW6` | `PAPTSTW6` | `PAPHLFW6` | `PAPLAPW6` | `RDPAGEW6` | `WRITSNW6` | `DESIGNW6` |
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT IDENTIFIES WATCH`| `RESPONDENT IDENTIFIES PEN` | `NO IFS ANDS OR BUTS` | `PAPER TEST` | `FOLDS PAPER IN HALF WITH BOTH HANDS?` | `PUTS PAPER ON LAP?` | `CLOSE YOUR EYES` | `COMPLETE SENTENCE?` | `CONVEX FIGURES COPIED CORRECTLY?` | 
| **Table name** | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | `ALSA-Wave6` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` |  
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| | `3 = Incapable of response` | `3 = Incapable of response`| `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` |  
| **Description** |  | | | | | | | | | | 


```{r assign6, echo=FALSE}
opal.assign.table.tibble(o, 'ALSA_cog','ALSA.ALSA-Wave6',
                         variables=list('YEARW6', 'SEASONW6', 'TIMEW6', 'WEEKW6', 'MONTHW6', 'STATEW6', 'COUNTW6', 'CITYW6', 'SUBURBW6', 'FLOORW6', 'THRTHGW6', 'PENNYW6', 'TBLEW6', 'MATHSW6', 'EIGHSWW6', 'SEVNINW6', 'SEVTWOW6', 'SIXFIVW6', 'DW6',  'LW6', 'RW6',  'OW6', 'WW6', 'REMEMW6', 'PENNW6', 'TABLW6', 'WATCHW6', 'PENW6', 'PHRASEW6', 'PAPTSTW6', 'PAPHLFW6', 'PAPLAPW6', 'RDPAGEW6', 'WRITSNW6', 'DESIGNW6'), missings = TRUE)
ALSA_cog <- opal.execute(o,'ALSA_cog')
```

```{r local6, echo=FALSE}
vari <- ALSA_cog$YEARW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEASONW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TIMEW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WEEKW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MONTHW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$STATEW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$COUNTW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$CITYW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SUBURBW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$FLOORW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$THRTHGW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNYW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TBLEW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MATHSW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$EIGHSWW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVNINW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVTWOW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SIXFIVW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$LW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$OW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$REMEMW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TABLW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WATCHW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PHRASEW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPTSTW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPHLFW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPLAPW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RDPAGEW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WRITSNW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DESIGNW6
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variables they have to be recoded as follows:

* The variables YEARW6, SEASONW6, TIMEW6, WEEKW6, MONTHW6, STATEW6, COUNTW6, CITYW6, SUBURBW6, FLOORW6, THRTHGW6, PENNYW6, TBLEW6, REMEMW6, PENNW6, TABLW6: 
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 0 'no answer' into 0`
* The variables WATCHW6, PENW6, PHRASEW6, PAPTSTW6, PAPHLFW6, PAPLAPW6, RDPAGEW6, WRITSNW6, DESIGNW6:
    + `keep 'correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 3 'incapable of response' into 996`
    + `recode 0 'no answer' into 0`
* The variables (MATHS) MATHSW6, EIGHSWW6, SEVNINW6, SEVTWOW6, SIXFIVW6:
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 0 'no answer' into 0`
* The variables (SPELLING) DW6, LW6, RW6, OW6, WW6:
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 0 'no answer' into 0`


Afterwards, sum all the first two sets of items and sum the maximum score between maths items or spelling ones but there are some specific cases that has to be recoded as follows:

* The individuals with at most 6 missing values, their final score is divided by the number of answered items and multiplied by 30
* The individuals with more than 6 missing values are recoded as 999
* There are some sets of items that some individuals could not do them because were sensible to literacy or functional limitations (i.e. blindness). That sets of items are the next ones:'
    + `d1 = MATHSW6, EIGHSWW6, SEVNINW6, SEVTWOW6, SIXFIVW6`
    + `d3 = PAPTSTW6, PAPHLFW6, PAPLAPW6`
    + `d4 = RDPAGEW6`
    + `d5 = WRITSNW6`
    + `d6 = DESIGNW6`
If the individual has at least one of the item as not applicable of these sets, all the set is considered as not applicable and the final score is recoded multiplied by 30 their final score and dividing by (30-d1-d3-d4-d5-d6) where d1 = -5 if some items of d1 is not applicable and in the same way d3 = -3 and (d4, d5, d6)=-1.

Finally, the final score is recoded as follows:

* `final_score < 24 into 1` 
* `final_score >= 24 into 0`

**R script:**


```{r harmo6, echo=TRUE}
ALSA_cog$i1 <- car::recode(ALSA_cog$YEARW6, "2=0")
ALSA_cog$i2 <- car::recode(ALSA_cog$SEASONW6, "2=0")
ALSA_cog$i3 <- car::recode(ALSA_cog$TIMEW6, "2=0")
ALSA_cog$i4 <- car::recode(ALSA_cog$WEEKW6, "2=0")
ALSA_cog$i5 <- car::recode(ALSA_cog$MONTHW6, "2=0")
ALSA_cog$i6 <- car::recode(ALSA_cog$STATEW6, "2=0")
ALSA_cog$i7 <- car::recode(ALSA_cog$COUNTW6, "2=0")
ALSA_cog$i8 <- car::recode(ALSA_cog$CITYW6, "2=0")
ALSA_cog$i9 <- car::recode(ALSA_cog$SUBURBW6, "2=0")
ALSA_cog$i10 <- car::recode(ALSA_cog$FLOORW6, "2=0")
ALSA_cog$i11 <- car::recode(ALSA_cog$THRTHGW6, "2=0")
ALSA_cog$i12 <- car::recode(ALSA_cog$PENNYW6, "2=0")
ALSA_cog$i13 <- car::recode(ALSA_cog$TBLEW6, "2=0")
ALSA_cog$i14 <- car::recode(ALSA_cog$REMEMW6, "2=0")
ALSA_cog$i15 <- car::recode(ALSA_cog$PENNW6, "2=0")
ALSA_cog$i16 <- car::recode(ALSA_cog$TABLW6, "2=0")

ALSA_cog$i17 <- car::recode(ALSA_cog$WATCHW6, "2=0; 3=NA")
ALSA_cog$i18 <- car::recode(ALSA_cog$PENW6, "2=0; 3=NA")
ALSA_cog$i19 <- car::recode(ALSA_cog$PHRASEW6, "2=0; 3=NA")
ALSA_cog$i20 <- car::recode(ALSA_cog$PAPTSTW6, "2=0; 3=NA")
ALSA_cog$i21 <- car::recode(ALSA_cog$PAPHLFW6, "2=0; 3=NA")
ALSA_cog$i22 <- car::recode(ALSA_cog$PAPLAPW6, "2=0; 3=NA")
ALSA_cog$i23 <- car::recode(ALSA_cog$RDPAGEW6, "2=0; 3=NA")
ALSA_cog$i24 <- car::recode(ALSA_cog$WRITSNW6, "2=0; 3=NA")
ALSA_cog$i25 <- car::recode(ALSA_cog$DESIGNW6, "2=0; 3=NA")

ALSA_cog$m1 <- car::recode(ALSA_cog$MATHSW6, "2=0")
ALSA_cog$m2 <- car::recode(ALSA_cog$EIGHSWW6, "2=0")
ALSA_cog$m3 <- car::recode(ALSA_cog$SEVNINW6, "2=0")
ALSA_cog$m4 <- car::recode(ALSA_cog$SEVTWOW6, "2=0")
ALSA_cog$m5 <- car::recode(ALSA_cog$SIXFIVW6, "2=0")

ALSA_cog$s1 <- car::recode(ALSA_cog$DW6, "2=0")
ALSA_cog$s2 <- car::recode(ALSA_cog$LW6, "2=0")
ALSA_cog$s3 <- car::recode(ALSA_cog$RW6, "2=0")
ALSA_cog$s4 <- car::recode(ALSA_cog$OW6, "2=0")
ALSA_cog$s5 <- car::recode(ALSA_cog$WW6, "2=0")

ALSA_cog$nmiss1 <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmissm <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmisss <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$first_score <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$maths_score <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$spelling_score <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))

ALSA_cog$max_maths_spelling <- apply(ALSA_cog[,76:77], MARGIN = 1, FUN = function(x) which.max(x))

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 1] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 1] + ALSA_cog$maths_score[ALSA_cog$max_maths_spelling == 1]

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 2] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 2] + ALSA_cog$spelling_score[ALSA_cog$max_maths_spelling == 2]


#ALSA_cog$n0 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==0, na.rm = TRUE))
#ALSA_cog$n3 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d1 <- apply(ALSA_cog[,15:19], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d3 <- apply(ALSA_cog[,32:34], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d4 <- apply(ALSA_cog[,31], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d5 <- apply(ALSA_cog[,35], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d6 <- apply(ALSA_cog[,36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))

ALSA_cog$nNA <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$final_score[which(ALSA_cog$nNA %in% c(30,35))] <- 999

ALSA_cog$denom <- 30
ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] <- ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] - 5
ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] <- ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] - 3
ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] - 1

ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] <- ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] - car::recode(ALSA_cog$i20[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i21[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i22[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0")
  

ALSA_cog$final_score[which(ALSA_cog$denom != 30)] <- (ALSA_cog$final_score[which(ALSA_cog$denom != 30)]*30)/ALSA_cog$denom[which(ALSA_cog$denom != 30)]



ALSA_ds_w6 <- tibble(id=ALSA_cog$id)
ALSA_ds_w6$cog_stat <- car::recode(ALSA_cog$final_score, "lo:23.999999999999=1; 24:900=0")
ALSA_ds_w6$cog_stat <- labelled(ALSA_ds_w6$cog_stat, labels = c("no cognitive impairment"=0, "cognitive impairment"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript6, echo=FALSE}
vari <- ALSA_ds_w6$cog_stat
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(ALSA_ds_w6, aes(x=factor(cog_stat))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation6, echo=FALSE}
BeforeH <- c(sum(na.omit(ALSA_cog$final_score)>=24 & na.omit(ALSA_cog$final_score)<900),sum(na.omit(ALSA_cog$final_score)<=23.9999999), sum(na.omit(ALSA_cog$final_score)==999))
AfterH <- table(ALSA_ds_w6$cog_stat)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(24-30)->0","(0-24)->1" ,"NA->999")
kable(C)
```

```{r importOPAL6, echo=FALSE}
label(ALSA_ds_w6$cog_stat) <- ds_label_all
cog_stat <- ALSA_ds_w6
save(cog_stat, file = "../RData/w6/cog_stat.RData")
rm(cog_stat, ALSA_cog)
```


 



### Wave 7 

#### Study-specific variable description

| **Name** | `YEARW7`| `SEASONW7` | `TIMEW7` | `WEEKW7` | `MONTHW7` | `STATEW7` | `COUNTW7` | `CITYW7` | `SUBURBW7` | `FLOORW7` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `DAY - YEAR`| `SEASON` | `TIME` | `DATE - WEEK` | `DAY - MONTH` | `STATE` | `COUNTRY` | `CITY` | `SUBURB` | `FLOOR` | 
| **Table name** | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 


| **Name** | `THRTHGW7`| `PENNYW7` | `TBLEW7` | `MATHSW7` | `EIGHSXW7` | `SEVNINW7` | `SEVTWOW7` | `SIXFIVW7` | `DW7` | `LW7` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT REMEMBERS APPLE?`| `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | `NOW, SPEAKING ALOUD, SUBTRACT 7 FROM 100` | `93 - 7 = 86?` | `86 - 7 = 79?` | `79 - 7 = 72?` | `72 - 7 = 65?` | `FIRST LETTER - D?` | `SECOND LETTER - L?` | 
| **Table name** | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 


| **Name** | `RW7`| `OW7` | `WW7` | `REMEMW7` | `PENNW7` | `TABLW7` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `THIRD LETTER - R?`| `FOURTH LETTER - O?` | `FIFTH LETTER - W?` | `RESPONDENT REMEMBERS APPLE` | `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | 
| **Table name** | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 



| **Name** | `WATCHW7`| `PENW7` | `PHRASEW7` | `PAPTSTW7` | `PAPHLFW7` | `PAPLAPW7` | `RDPAGEW7` | `WRITSNW7` | `DESIGNW7` |
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT IDENTIFIES WATCH`| `RESPONDENT IDENTIFIES PEN` | `NO IFS ANDS OR BUTS` | `PAPER TEST` | `FOLDS PAPER IN HALF WITH BOTH HANDS?` | `PUTS PAPER ON LAP?` | `CLOSE YOUR EYES` | `COMPLETE SENTENCE?` | `CONVEX FIGURES COPIED CORRECTLY?` | 
| **Table name** | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | `ALSA-Wave7` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` |  
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| | `3 = Incapable of response` | `3 = Incapable of response`| `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` |  
| **Description** |  | | | | | | | | | | 

```{r assign7, echo=FALSE}
opal.assign.table.tibble(o, 'ALSA_cog','ALSA.ALSA-Wave7',
                         variables=list('yearw7', 'seasonw7', 'timew7', 'weekw7', 'monthw7', 'statew7', 'countw7', 'cityw7', 'suburbw7', 'floorw7', 'thrthgw7', 'pennyw7', 'tblew7', 'mathsw7', 'eighsww7', 'sevninw7', 'sevtwow7', 'sixfivw7', 'dw7',  'lw7', 'rw7',  'ow7', 'ww7', 'rememw7', 'pennw7', 'tablw7', 'watchw7', 'penw7', 'phrasew7', 'paptstw7', 'paphlfw7', 'paplapw7', 'rdpagew7', 'writsnw7', 'designw7'), missings = TRUE)
ALSA_cog <- opal.execute(o,'ALSA_cog')
```

```{r local7, echo=FALSE}
vari <- ALSA_cog$yearw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$seasonw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$timew7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$weekw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$monthw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$statew7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$countw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$cityw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$suburbw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$floorw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$thrthgw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$pennyw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$tblew7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$mathsw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$eighsww7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$sevninw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$sevtwow7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$dw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$lw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$rw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$ow7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$ww7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$rememw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$pennw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$tablw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$watchw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$penw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$phrasew7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$paptstw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$paphlfw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$paplapw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$rdpagew7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$writsnw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$designw7
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variables they have to be recoded as follows:

* The variables yearw7, seasonw7, timew7, weekw7, monthw7, statew7, countw7, cityw7, suburbw7, floorw7, thrthgw7, pennyw7, tblew7, rememw7, pennw7, tablw7:
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables watchw7, penw7, phrasew7, paptstw7, paphlfw7, paplapw7, rdpagew7, writsnw7, designw7:
    + `keep 'correct' into 1`
    + `recode 2 'incorrect'` into 0`
    + `recode 3 'incapable of response' into 996`
    + `recode 9 'no answer' into 0`
* The variables (MATHS) mathsw7, eighsxw7, sevninw7, sevtwow7, sixfivw7:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables (SPELLING) dw7, lw7, rw7, ow7, ww7:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`

Afterwards, sum all the first two sets of items and sum the maximum score between maths items or spelling ones but there are some specific cases that has to be recoded as follows:

* The individuals with at most 6 missing values, their final score is divided by the number of answered items and multiplied by 30
* The individuals with more than 6 missing values are recoded as 999
* There are some sets of items that some individuals could not do them because were sensible to literacy or functional limitations (i.e. blindness). That sets of items are the next ones:'
    + `d1 = MATHSW7, EIGHSXW7, SEVNINW7, SEVTWOW7, SIXFIVW7`
    + `d3 = PAPTSTW7, PAPHLFW7, PAPLAPW7`
    + `d4 = RDPAGEW7`
    + `d5 = WRITSNW7`
    + `d6 = DESIGNW7`
If the individual has at least one of the item as not applicable of these sets, all the set is considered as not applicable and the final score is recoded multiplied by 30 their final score and dividing by (30-d1-d3-d4-d5-d6) where d1 = -5 if some items of d1 is not applicable and in the same way d3 = -3 and (d4, d5, d6)=-1.

Finally, the final score is recoded as follows:

* `final_score < 24 into 1` 
* `final_score >= 24 into 0`

**R script:**

```{r harmo7, echo=TRUE}
ALSA_cog$i1 <- car::recode(ALSA_cog$yearw7, "2=0")
ALSA_cog$i2 <- car::recode(ALSA_cog$seasonw7, "2=0")
ALSA_cog$i3 <- car::recode(ALSA_cog$timew7, "2=0")
ALSA_cog$i4 <- car::recode(ALSA_cog$weekw7, "2=0")
ALSA_cog$i5 <- car::recode(ALSA_cog$monthw7, "2=0")
ALSA_cog$i6 <- car::recode(ALSA_cog$statew7, "2=0")
ALSA_cog$i7 <- car::recode(ALSA_cog$countw7, "2=0")
ALSA_cog$i8 <- car::recode(ALSA_cog$cityw7, "2=0")
ALSA_cog$i9 <- car::recode(ALSA_cog$suburbw7, "2=0")
ALSA_cog$i10 <- car::recode(ALSA_cog$floorw7, "2=0")
ALSA_cog$i11 <- car::recode(ALSA_cog$thrthgw7, "2=0")
ALSA_cog$i12 <- car::recode(ALSA_cog$pennyw7, "2=0")
ALSA_cog$i13 <- car::recode(ALSA_cog$tblew7, "2=0")
ALSA_cog$i14 <- car::recode(ALSA_cog$rememw7, "2=0")
ALSA_cog$i15 <- car::recode(ALSA_cog$pennw7, "2=0")
ALSA_cog$i16 <- car::recode(ALSA_cog$tablw7, "2=0")

ALSA_cog$i17 <- car::recode(ALSA_cog$watchw7, "2=0; 3=NA")
ALSA_cog$i18 <- car::recode(ALSA_cog$penw7, "2=0; 3=NA")
ALSA_cog$i19 <- car::recode(ALSA_cog$phrasew7, "2=0; 3=NA")
ALSA_cog$i20 <- car::recode(ALSA_cog$paptstw7, "2=0; 3=NA")
ALSA_cog$i21 <- car::recode(ALSA_cog$paphlfw7, "2=0; 3=NA")
ALSA_cog$i22 <- car::recode(ALSA_cog$paplapw7, "2=0; 3=NA")
ALSA_cog$i23 <- car::recode(ALSA_cog$rdpagew7, "2=0; 3=NA")
ALSA_cog$i24 <- car::recode(ALSA_cog$writsnw7, "2=0; 3=NA")
ALSA_cog$i25 <- car::recode(ALSA_cog$designw7, "2=0; 3=NA")

ALSA_cog$m1 <- car::recode(ALSA_cog$mathsw7, "2=0")
ALSA_cog$m2 <- car::recode(ALSA_cog$eighsww7, "2=0")
ALSA_cog$m3 <- car::recode(ALSA_cog$sevninw7, "2=0")
ALSA_cog$m4 <- car::recode(ALSA_cog$sevtwow7, "2=0")
ALSA_cog$m5 <- car::recode(ALSA_cog$sixfivw7, "2=0")

ALSA_cog$s1 <- car::recode(ALSA_cog$dw7, "2=0")
ALSA_cog$s2 <- car::recode(ALSA_cog$lw7, "2=0")
ALSA_cog$s3 <- car::recode(ALSA_cog$rw7, "2=0")
ALSA_cog$s4 <- car::recode(ALSA_cog$ow7, "2=0")
ALSA_cog$s5 <- car::recode(ALSA_cog$ww7, "2=0")

ALSA_cog$nmiss1 <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmissm <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmisss <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$first_score <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$maths_score <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$spelling_score <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))

ALSA_cog$max_maths_spelling <- apply(ALSA_cog[,76:77], MARGIN = 1, FUN = function(x) which.max(x))

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 1] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 1] + ALSA_cog$maths_score[ALSA_cog$max_maths_spelling == 1]

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 2] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 2] + ALSA_cog$spelling_score[ALSA_cog$max_maths_spelling == 2]


#ALSA_cog$n0 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==0, na.rm = TRUE))
#ALSA_cog$n3 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d1 <- apply(ALSA_cog[,15:19], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d3 <- apply(ALSA_cog[,32:34], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d4 <- apply(ALSA_cog[,31], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d5 <- apply(ALSA_cog[,35], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d6 <- apply(ALSA_cog[,36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))

ALSA_cog$nNA <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$final_score[which(ALSA_cog$nNA %in% c(30,35))] <- 999

ALSA_cog$denom <- 30
ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] <- ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] - 5
ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] <- ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] - 3
ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] - 1

ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] <- ALSA_cog$final_score[which(ALSA_cog$n3_d3 %in% c(1,2))] - car::recode(ALSA_cog$i20[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i21[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0") - car::recode(ALSA_cog$i22[which(ALSA_cog$n3_d3 %in% c(1,2))], "NA=0")

ALSA_cog$final_score[which(ALSA_cog$denom != 30)] <- (ALSA_cog$final_score[which(ALSA_cog$denom != 30)]*30)/ALSA_cog$denom[which(ALSA_cog$denom != 30)]



ALSA_ds_w7 <- tibble(id=ALSA_cog$id)
ALSA_ds_w7$cog_stat <- car::recode(ALSA_cog$final_score, "lo:23.999999999999=1; 24:900=0")
ALSA_ds_w7$cog_stat <- labelled(ALSA_ds_w7$cog_stat, labels = c("no cognitive impairment"=0, "cognitive impairment"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7, echo=FALSE}
vari <- ALSA_ds_w7$cog_stat
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(ALSA_ds_w7, aes(x=factor(cog_stat))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation7, echo=FALSE}
BeforeH <- c(sum(na.omit(ALSA_cog$final_score)>=24 & na.omit(ALSA_cog$final_score)<900),sum(na.omit(ALSA_cog$final_score)<=23.9999999), sum(na.omit(ALSA_cog$final_score)==999))
AfterH <- table(ALSA_ds_w7$cog_stat)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(24-30)->0","(0-24)->1" ,"NA->999")
kable(C)
```

 
```{r save7, echo=FALSE}
label(ALSA_ds_w7$cog_stat) <- ds_label_all
cog_stat <- ALSA_ds_w7
save(cog_stat, file = "../RData/w7/cog_stat.RData")
rm(cog_stat, ALSA_cog)
```

 

 


### Wave 8 

There is no variable.

 




### Wave 9 

#### Study-specific variable description

| **Name** | `YEARW9`| `SEASONW9` | `TIMEW9` | `WEEKW9` | `MONTHW9` | `STATEW9` | `COUNTW9` | `CITYW9` | `SUBURBW9` | `FLOORW9` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `DAY - YEAR`| `SEASON` | `TIME` | `DATE - WEEK` | `DAY - MONTH` | `STATE` | `COUNTRY` | `CITY` | `SUBURB` | `FLOOR` | 
| **Table name** | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 


| **Name** | `THRTHGW9`| `PENNYW9` | `TBLEW9` | `MATHSW9` | `EIGHSXW9` | `SEVNINW9` | `SEVTWOW9` | `SIXFIVW9` | `DW9` | `LW9` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT REMEMBERS APPLE?`| `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | `NOW, SPEAKING ALOUD, SUBTRACT 7 FROM 100` | `93 - 7 = 86?` | `86 - 7 = 79?` | `79 - 7 = 72?` | `72 - 7 = 65?` | `FIRST LETTER - D?` | `SECOND LETTER - L?` | 
| **Table name** | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` |
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 


| **Name** | `RW9`| `OW9` | `WW9` | `REMEMW9` | `PENNW9` | `TABLW9` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `THIRD LETTER - R?`| `FOURTH LETTER - O?` | `FIFTH LETTER - W?` | `RESPONDENT REMEMBERS APPLE` | `RESPONDENT REMEMBERS PENNY?` | `RESPONDENT REMEMBERS TABLE?` | 
| **Table name** | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | 



| **Name** | `WATCHW9`| `PENW9` | `PHRASEW9` | `PAPTSTW9` | `PAPHLFW9` | `PAPLAPW9` | `RDPAGEW9` | `WRITSNW9` | `DESIGNW9` |
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT IDENTIFIES WATCH`| `RESPONDENT IDENTIFIES PEN` | `NO IFS ANDS OR BUTS` | `PAPER TEST` | `FOLDS PAPER IN HALF WITH BOTH HANDS?` | `PUTS PAPER ON LAP?` | `CLOSE YOUR EYES` | `COMPLETE SENTENCE?` | `CONVEX FIGURES COPIED CORRECTLY?` | 
| **Table name** | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | `ALSA-Wave9` | 
| **Categories** |`1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` |  
| | `2 = Incorrect` | `2 = Incorrect`| `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | `2 = Incorrect` | 
| | `3 = Incapable of response` | `3 = Incapable of response`| `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` | `3 = Incapable of response` |
| **Missing** |`0 = no answer`| `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` | `0 = no answer` |  
| **Description** |  | | | | | | | | | | 


```{r assign9, echo=FALSE}
opal.assign.table.tibble(o, 'ALSA_cog','ALSA.ALSA-Wave9',
                         variables=list('YEARW9', 'SEASONW9', 'TIMEW9', 'WEEKW9', 'MONTHW9', 'STATEW9', 'COUNTW9', 'CITYW9', 'SUBURBW9', 'FLOORW9', 'THRTHGW9', 'PENNYW9', 'TBLEW9', 'MATHSW9', 'EIGHSWW9', 'SEVNINW9', 'SEVTWOW9', 'SIXFIVW9', 'DW9',  'LW9', 'RW9',  'OW9', 'WW9', 'REMEMW9', 'PENNW9', 'TABLW9', 'WATCHW9', 'PENW9', 'PHRASEW9', 'PAPTSTW9', 'PAPHLFW9', 'PAPLAPW9', 'RDPAGEW9', 'WRITSNW9', 'DESIGNW9'), missings = TRUE)
ALSA_cog <- opal.execute(o,'ALSA_cog')
```

```{r local9, echo=FALSE}
vari <- ALSA_cog$YEARW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEASONW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TIMEW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WEEKW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MONTHW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$STATEW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$COUNTW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$CITYW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SUBURBW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$FLOORW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$THRTHGW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNYW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TBLEW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MATHSW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$EIGHSWW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVNINW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVTWOW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SIXFIVW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$LW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$OW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$REMEMW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TABLW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WATCHW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PHRASEW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPTSTW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPHLFW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPLAPW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RDPAGEW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WRITSNW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DESIGNW9
kable(Categorical_summary(vari, missing_values = c(0))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(0))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(0))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variables they have to be recoded as follows:

* The variables yearw9, seasonw9, timew9, weekw9, monthw9, statew9, countw9, cityw9, suburbw9, floorw9, thrthgw9, pennyw9, tblew9, rememw9, pennw9, tablw9:
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables watchw9, penw9, phrasew9, paptstw9, paphlfw9, paplapw9, rdpagew9, writsnw9, designw9:
    + `keep 'correct' into 1`
    + `recode 2 'incorrect'` into 0`
    + `recode 3 'incapable of response' into 996`
    + `recode 9 'no answer' into 0`
* The variables (MATHS) mathsw9, eighsxw9, sevninw9, sevtwow9, sixfivw9:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables (SPELLING) dw9, lw9, rw9, ow9, ww9:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`

Afterwards, sum all the first two sets of items and sum the maximum score between maths items or spelling ones but there are some specific cases that has to be recoded as follows:

* The individuals with at most 6 missing values, their final score is divided by the number of answered items and multiplied by 30
* The individuals with more than 6 missing values are recoded as 999
* There are some sets of items that some individuals could not do them because were sensible to literacy or functional limitations (i.e. blindness). That sets of items are the next ones:'
    + `d1 = MATHSW9, EIGHSXW9, SEVNINW9, SEVTWOW9, SIXFIVW9`
    + `d3 = PAPTSTW9, PAPHLFW9, PAPLAPW9`
    + `d4 = RDPAGEW9`
    + `d5 = WRITSNW9`
    + `d6 = DESIGNW9`
If the individual has at least one of the item as not applicable of these sets, all the set is considered as not applicable and the final score is recoded multiplied by 30 their final score and dividing by (30-d1-d3-d4-d5-d6) where d1 = -5 if some items of d1 is not applicable and in the same way d3 = -3 and (d4, d5, d6)=-1.

Finally, the final score is recoded as follows:

* `final_score < 24 into 1` 
* `final_score >= 24 into 0`



**R script:**


```{r harmo9, echo=TRUE}
ALSA_cog$i1 <- car::recode(ALSA_cog$YEARW9, "2=0")
ALSA_cog$i2 <- car::recode(ALSA_cog$SEASONW9, "2=0")
ALSA_cog$i3 <- car::recode(ALSA_cog$TIMEW9, "2=0")
ALSA_cog$i4 <- car::recode(ALSA_cog$WEEKW9, "2=0")
ALSA_cog$i5 <- car::recode(ALSA_cog$MONTHW9, "2=0")
ALSA_cog$i6 <- car::recode(ALSA_cog$STATEW9, "2=0")
ALSA_cog$i7 <- car::recode(ALSA_cog$COUNTW9, "2=0")
ALSA_cog$i8 <- car::recode(ALSA_cog$CITYW9, "2=0")
ALSA_cog$i9 <- car::recode(ALSA_cog$SUBURBW9, "2=0")
ALSA_cog$i10 <- car::recode(ALSA_cog$FLOORW9, "2=0")
ALSA_cog$i11 <- car::recode(ALSA_cog$THRTHGW9, "2=0")
ALSA_cog$i12 <- car::recode(ALSA_cog$PENNYW9, "2=0")
ALSA_cog$i13 <- car::recode(ALSA_cog$TBLEW9, "2=0")
ALSA_cog$i14 <- car::recode(ALSA_cog$REMEMW9, "2=0")
ALSA_cog$i15 <- car::recode(ALSA_cog$PENNW9, "2=0")
ALSA_cog$i16 <- car::recode(ALSA_cog$TABLW9, "2=0")

ALSA_cog$i17 <- car::recode(ALSA_cog$WATCHW9, "2=0; 3=NA")
ALSA_cog$i18 <- car::recode(ALSA_cog$PENW9, "2=0; 3=NA")
ALSA_cog$i19 <- car::recode(ALSA_cog$PHRASEW9, "2=0; 3=NA")
ALSA_cog$i20 <- car::recode(ALSA_cog$PAPTSTW9, "2=0; 3=NA")
ALSA_cog$i21 <- car::recode(ALSA_cog$PAPHLFW9, "2=0; 3=NA")
ALSA_cog$i22 <- car::recode(ALSA_cog$PAPLAPW9, "2=0; 3=NA")
ALSA_cog$i23 <- car::recode(ALSA_cog$RDPAGEW9, "2=0; 3=NA")
ALSA_cog$i24 <- car::recode(ALSA_cog$WRITSNW9, "2=0; 3=NA")
ALSA_cog$i25 <- car::recode(ALSA_cog$DESIGNW9, "2=0; 3=NA")

ALSA_cog$m1 <- car::recode(ALSA_cog$MATHSW9, "2=0")
ALSA_cog$m2 <- car::recode(ALSA_cog$EIGHSWW9, "2=0")
ALSA_cog$m3 <- car::recode(ALSA_cog$SEVNINW9, "2=0")
ALSA_cog$m4 <- car::recode(ALSA_cog$SEVTWOW9, "2=0")
ALSA_cog$m5 <- car::recode(ALSA_cog$SIXFIVW9, "2=0")

ALSA_cog$s1 <- car::recode(ALSA_cog$DW9, "2=0")
ALSA_cog$s2 <- car::recode(ALSA_cog$LW9, "2=0")
ALSA_cog$s3 <- car::recode(ALSA_cog$RW9, "2=0")
ALSA_cog$s4 <- car::recode(ALSA_cog$OW9, "2=0")
ALSA_cog$s5 <- car::recode(ALSA_cog$WW9, "2=0")

ALSA_cog$nmiss1 <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmissm <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmisss <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$first_score <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$maths_score <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$spelling_score <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))

ALSA_cog$max_maths_spelling <- apply(ALSA_cog[,76:77], MARGIN = 1, FUN = function(x) which.max(x))

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 1] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 1] + ALSA_cog$maths_score[ALSA_cog$max_maths_spelling == 1]

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 2] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 2] + ALSA_cog$spelling_score[ALSA_cog$max_maths_spelling == 2]


#ALSA_cog$n0 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==0, na.rm = TRUE))
#ALSA_cog$n3 <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d1 <- apply(ALSA_cog[,15:19], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d3 <- apply(ALSA_cog[,32:34], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d4 <- apply(ALSA_cog[,31], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d5 <- apply(ALSA_cog[,35], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))
ALSA_cog$n3_d6 <- apply(ALSA_cog[,36], MARGIN = 1, FUN = function(x) sum(x==3, na.rm = TRUE))

ALSA_cog$nNA <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$final_score[which(ALSA_cog$nNA %in% c(30,35))] <- 999

ALSA_cog$denom <- 30
ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] <- ALSA_cog$denom[which(ALSA_cog$n3_d1==5)] - 5
ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] <- ALSA_cog$denom[which(ALSA_cog$n3_d3 %in% c(1,2,3))] - 3
ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d4==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d5==1)] - 1
ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] <- ALSA_cog$denom[which(ALSA_cog$n3_d6==1)] - 1

  
ALSA_cog$final_score[which(ALSA_cog$denom != 30)] <- (ALSA_cog$final_score[which(ALSA_cog$denom != 30)]*30)/ALSA_cog$denom[which(ALSA_cog$denom != 30)]


ALSA_ds_w9 <- tibble(id=ALSA_cog$id)
ALSA_ds_w9$cog_stat <- car::recode(ALSA_cog$final_score, "lo:23.999999999999=1; 24:900=0")
ALSA_ds_w9$cog_stat <- labelled(ALSA_ds_w9$cog_stat, labels = c("no cognitive impairment"=0, "cognitive impairment"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9, echo=FALSE}
vari <- ALSA_ds_w9$cog_stat
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(ALSA_ds_w9, aes(x=factor(cog_stat))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation9, echo=FALSE}
BeforeH <- c(sum(na.omit(ALSA_cog$final_score)>=24 & na.omit(ALSA_cog$final_score)<900),sum(na.omit(ALSA_cog$final_score)<=23.9999999), sum(na.omit(ALSA_cog$final_score)==999))
AfterH <- table(ALSA_ds_w9$cog_stat)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(24-30)->0","(0-24)->1" ,"NA->999")
kable(C)
```

 
```{r importOPAL9, echo=FALSE}
label(ALSA_ds_w9$cog_stat) <- ds_label_all
cog_stat <- ALSA_ds_w9
save(cog_stat, file = "../RData/w9/cog_stat.RData")
rm(cog_stat, ALSA_cog)
```


 





### Wave 10 

There is no variable.
 

 



### Wave 11 

#### Study-specific variable description

| **Name** | `YEARW11`| `SEASONW11` | `TIMEW11` | `WEEKW11` | `MONTHW11` | `STATEW11` | `COUNTW11` | `CITYW11` | `SUBURBW11` | `FLOORW11` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `DAY - YEAR`| `SEASON` | `TIME` | `DATE - WEEK` | `DAY - MONTH` | `STATE` | `COUNTRY` | `CITY` | `SUBURB` | `FLOOR` | 
| **Table name** | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` |
| **Categories** |`0 = Incorrect`| `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | 
| | `1 = Correct` | `1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 


| **Name** | `APPLEW11`| `PENNYW11` | `TBLEW11` | `RW11`| `OW11` | `WW11` | `DW11` | `LW11`| `REMEMW11` | `PENNW11` | `TABLW11`  | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `Remembers Apple`| `Remembers Penny` | `Remembers Table` | `Third letter R` | `Fourth letter O` | `Fifth letter W` | `First letter D` | `Second letter L` | `Remembers apple again` | `Remembers penny again` | `Remembers table again` | 
| **Table name** | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` |
| **Categories** |`0 = Incorrect`| `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` |
| | `1 = Correct` | `1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` |


| **Name** | `MATHSW11` | `EIGHSWW11` | `SEVNINW11` | `SEVTWOW11` | `SIXFIVW11` | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `100-7 = 93`| `93-7 = 86` | `86-7 = 79` | `79-7= 72` | `72-7 = 65` | 
| **Table name** | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | 
| **Categories** |`0 = Incorrect`| `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | 
| | `1 = Correct` | `1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| **Missing** |`2=refused`| `2=refused` | `2=refused` | `2=refused` | `2=refused` | 


| **Name** | `WATCHW11`| `PENW11` | `PHRASEW11` | `PAPTSTW11` | `PAPHLFW11` | `PAPLAPW11` | `RDPAGEW11` | `WRITSNW11` | `DESIGNW11` | `TABLW11`  | 
|-|-|-|-|-|-|-|-|-|-|-| 
| **Label** | `RESPONDENT IDENTIFIES WATCH`| `RESPONDENT IDENTIFIES PEN` | `NO IFS ANDS OR BUTS` | `PAPER TEST` | `FOLDS PAPER IN HALF WITH BOTH HANDS?` | `PUTS PAPER ON LAP?` | `CLOSE YOUR EYES` | `COMPLETE SENTENCE?` | `CONVEX FIGURES COPIED CORRECTLY?` | 
| **Table name** | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | 
| **Table name** | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` | `ALSA-Wave11` |
| **Categories** |`0 = Incorrect`| `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | `0 = Incorrect` | 
| | `1 = Correct` | `1 = Correct`| `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | `1 = Correct` | 
| **Description** |  | | | | | | | | | | 


```{r assign11, echo=FALSE}
opal.assign.table.tibble(o, 'ALSA_cog','ALSA.ALSA-Wave11',
                         variables=list('YEARW11', 'SEASONW11', 'TIMEW11', 'WEEKW11', 'MONTHW11', 'STATEW11', 'COUNTW11', 'CITYW11', 'SUBURBW11', 'FLOORW11', 'APPLEW11', 'PENNYW11', 'TBLEW11', 'MATHSW11', 'EIGHSWW11', 'SEVNINW11', 'SEVTWOW11', 'SIXFIVW11', 'DW11',  'LW11', 'RW11',  'OW11', 'WW11', 'REMEMW11', 'PENNW11', 'TABLW11', 'WATCHW11', 'PENW11', 'PHRASEW11', 'PAPTSTW11', 'PAPHLFW11', 'PAPLAPW11', 'RDPAGEW11', 'WRITSNW11', 'DESIGNW11'), missings = TRUE)
ALSA_cog <- opal.execute(o,'ALSA_cog')
```

```{r local11, echo=FALSE}
vari <- ALSA_cog$YEARW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEASONW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TIMEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WEEKW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MONTHW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$STATEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$COUNTW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$CITYW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SUBURBW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$FLOORW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$APPLEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNYW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TBLEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$MATHSW11
kable(Categorical_summary(vari, missing_values = c(2))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(2))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(2))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$EIGHSWW11
kable(Categorical_summary(vari, missing_values = c(2))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(2))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(2))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVNINW11
kable(Categorical_summary(vari, missing_values = c(2))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(2))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(2))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SEVTWOW11
kable(Categorical_summary(vari, missing_values = c(2))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(2))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(2))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$SIXFIVW11
kable(Categorical_summary(vari, missing_values = c(2))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(2))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(2))[2], caption = "Type of missing")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$LW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$OW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$REMEMW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENNW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$TABLW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WATCHW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PENW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PHRASEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPTSTW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPHLFW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$PAPLAPW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$RDPAGEW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$WRITSNW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")

vari <- ALSA_cog$DESIGNW11
kable(Categorical_summary(vari, missing_values = NA)[2], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(ALSA_cog, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonized variable from the study-specific variables they have to be recoded as follows:

* The variables yearw11, seasonw11, timew11, weekw11, monthw11, statew11, countw11, cityw11, suburbw11, floorw11, thrthgw11, pennyw11, tblew11, rememw11, pennw11, tablw11:
    + `keep 'Correct' into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables watchw11, penw11, phrasew11, paptstw11, paphlfw11, paplapw11, rdpagew11, writsnw11, designw11:
    + `keep 'correct' into 1`
    + `recode 2 'incorrect'` into 0`
    + `recode 3 'incapable of response' into 996`
    + `recode 9 'no answer' into 0`
* The variables (MATHS) mathsw11, eighsxw11, sevninw11, sevtwow11, sixfivw11:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`
* The variables (SPELLING) dw11, lw11, rw11, ow11, ww11:
    + `keep `Correct` into 1`
    + `recode 2 'incorrect' into 0`
    + `recode 9 'no answer' into 0`

Afterwards, sum all the first two sets of items and sum the maximum score between maths items or spelling ones but there are some specific cases that has to be recoded as follows:

* The individuals with at most 6 missing values, their final score is divided by the number of answered items and multiplied by 30
* The individuals with more than 6 missing values are recoded as 999
* There are some sets of items that some individuals could not do them because were sensible to literacy or functional limitations (i.e. blindness). That sets of items are the next ones:'
    + `d1 = MATHSw11, EIGHSXw11, SEVNINw11, SEVTWOw11, SIXFIVw11`
    + `d3 = PAPTSTw11, PAPHLFw11, PAPLAPw11`
    + `d4 = RDPAGEw11`
    + `d5 = WRITSNw11`
    + `d6 = DESIGNw11`
If the individual has at least one of the item as not applicable of these sets, all the set is considered as not applicable and the final score is recoded multiplied by 30 their final score and dividing by (30-d1-d3-d4-d5-d6) where d1 = -5 if some items of d1 is not applicable and in the same way d3 = -3 and (d4, d5, d6)=-1.

Finally, the final score is recoded as follows:

* `final_score < 24 into 1` 
* `final_score >= 24 into 0`

**R script:**

```{r harmo11, echo=TRUE}
ALSA_cog$i1 <- ALSA_cog$YEARW11
ALSA_cog$i2 <- ALSA_cog$SEASONW11
ALSA_cog$i3 <- ALSA_cog$TIMEW11
ALSA_cog$i4 <- ALSA_cog$WEEKW11
ALSA_cog$i5 <- ALSA_cog$MONTHW11
ALSA_cog$i6 <- ALSA_cog$STATEW11
ALSA_cog$i7 <- ALSA_cog$COUNTW11
ALSA_cog$i8 <- ALSA_cog$CITYW11
ALSA_cog$i9 <- ALSA_cog$SUBURBW11
ALSA_cog$i10 <- ALSA_cog$FLOORW11
ALSA_cog$i11 <- ALSA_cog$APPLEW11
ALSA_cog$i12 <- ALSA_cog$PENNYW11
ALSA_cog$i13 <- ALSA_cog$TBLEW11
ALSA_cog$i14 <- ALSA_cog$REMEMW11
ALSA_cog$i15 <- ALSA_cog$PENNW11
ALSA_cog$i16 <- ALSA_cog$TABLW11

ALSA_cog$i17 <- ALSA_cog$WATCHW11
ALSA_cog$i18 <- ALSA_cog$PENW11
ALSA_cog$i19 <- ALSA_cog$PHRASEW11
ALSA_cog$i20 <- ALSA_cog$PAPTSTW11
ALSA_cog$i21 <- ALSA_cog$PAPHLFW11
ALSA_cog$i22 <- ALSA_cog$PAPLAPW11
ALSA_cog$i23 <- ALSA_cog$RDPAGEW11
ALSA_cog$i24 <- ALSA_cog$WRITSNW11
ALSA_cog$i25 <- ALSA_cog$DESIGNW11

ALSA_cog$m1 <- car::recode(ALSA_cog$MATHSW11, "2=0")
ALSA_cog$m2 <- car::recode(ALSA_cog$EIGHSWW11, "2=0")
ALSA_cog$m3 <- car::recode(ALSA_cog$SEVNINW11, "2=0")
ALSA_cog$m4 <- car::recode(ALSA_cog$SEVTWOW11, "2=0")
ALSA_cog$m5 <- car::recode(ALSA_cog$SIXFIVW11, "2=0")

ALSA_cog$s1 <- ALSA_cog$DW11
ALSA_cog$s2 <- ALSA_cog$LW11
ALSA_cog$s3 <- ALSA_cog$RW11
ALSA_cog$s4 <- ALSA_cog$OW11
ALSA_cog$s5 <- ALSA_cog$WW11

ALSA_cog$nmiss1 <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmissm <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(is.na(x)))
ALSA_cog$nmisss <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$first_score <- apply(ALSA_cog[,37:61], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$maths_score <- apply(ALSA_cog[,62:66], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))
ALSA_cog$spelling_score <- apply(ALSA_cog[,67:71], MARGIN = 1, FUN = function(x) sum(x, na.rm = TRUE))

ALSA_cog$max_maths_spelling <- apply(ALSA_cog[,76:77], MARGIN = 1, FUN = function(x) which.max(x))

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 1] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 1] + ALSA_cog$maths_score[ALSA_cog$max_maths_spelling == 1]

ALSA_cog$final_score[ALSA_cog$max_maths_spelling == 2] <- ALSA_cog$first_score[ALSA_cog$max_maths_spelling == 2] + ALSA_cog$spelling_score[ALSA_cog$max_maths_spelling == 2]


ALSA_cog$nNA <- apply(ALSA_cog[,2:36], MARGIN = 1, FUN = function(x) sum(is.na(x)))

ALSA_cog$final_score[which(ALSA_cog$nNA %in% c(7,8,11,26,35))] <- 999
ALSA_cog$final_score[which(ALSA_cog$nNA==1)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==1)]/29)*30
ALSA_cog$final_score[which(ALSA_cog$nNA==2)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==2)]/28)*30
ALSA_cog$final_score[which(ALSA_cog$nNA==3)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==3)]/27)*30
ALSA_cog$final_score[which(ALSA_cog$nNA==4)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==4)]/26)*30
ALSA_cog$final_score[which(ALSA_cog$nNA==5)] <- (ALSA_cog$final_score[which(ALSA_cog$nNA==5)]/25)*30


ALSA_ds_w11 <- tibble(id=ALSA_cog$id)
ALSA_ds_w11$cog_stat <- car::recode(ALSA_cog$final_score, "lo:23.999999999999=1; 24:900=0")
ALSA_ds_w11$cog_stat <- labelled(ALSA_ds_w11$cog_stat, labels = c("no cognitive impairment"=0, "cognitive impairment"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11, echo=FALSE}
vari <- ALSA_ds_w11$cog_stat
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(ALSA_ds_w11, aes(x=factor(cog_stat))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("marital status") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11, echo=FALSE}
BeforeH <- c(sum(na.omit(ALSA_cog$final_score)>=24 & na.omit(ALSA_cog$final_score)<900),sum(na.omit(ALSA_cog$final_score)<=23.9999999), sum(na.omit(ALSA_cog$final_score)==999))
AfterH <- table(ALSA_ds_w11$cog_stat)
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("(24-30)->0","(0-24)->1" ,"NA->999")
kable(C)
```

```{r importOPAL11, echo=FALSE}
label( ALSA_ds_w11$cog_stat) <- ds_label_all
cog_stat <-  ALSA_ds_w11
save(cog_stat, file = "../RData/w11/cog_stat.RData")
rm(cog_stat, ALSA_cog)
```
 
 

 




### Wave 12 

There is no variable.





### Wave 13 

There is no variable.
 


# Quality estimation

We calculated the final score using the single items and we considered as 'incorrect' (0) the value 'no anwer' (9) and 'incapable of response' (3) as 'not applicable' (996). The option 'incapable of response' was available only in some sets of items (maths, denomination, comprehension, read, write a sentence and drawing) sensible to functional limitations as well as literacy. In these sets of items, if at least one of the items was 'not applicable' all the set was considered as 'not applicable' and in those individuals a correction was applied. 
This correction was about summing up the rest of items and applying the following formula: 

$$ \frac{\text{total_score } \cdot 30}{30+d_1+d_3+d_4+d_5+d_6} $$

where 

$d_1 = -5$ if 'MATHSWX' or 'EIGHSXWX' or 'SEVNINWX' or 'SEVTWOWX' or 'SIXFIVWX' $=$ 'not applicable'
or $d_1 = -5$ if 'DWX' or 'LWX' or 'RWX' or 'OWX' or 'WWX' $=$ 'not applicable' otherwise $d_1 = 0$

$d_3 = -3$ if 'PAPTSTWX' or 'PAPHLFWX' or 'PAPLAPWX' $=$ 'not applicable' otherwise $d_3 = 0$

$d_4 = -1$ if 'RDPAGEWX' $=$ 'not applicable' otherwise $d_4 = 0$

$d_5 = -1$ if 'WRITSNWX' $=$ 'not applicable' otherwise $d_5 = 0$

$d_6 = -1$ if 'DESIGNWX' $=$ 'not applicable' otherwise $d_6 = 0$

For the items of $d_1$ set, only a set of items was summed.It means the maximum score between maths or spelling task was summed with the rest of items. 

A maximum of 6 missing values was allowed to get the final score.
 
```{r closeRsession, echo=FALSE} 
opal.logout(o)
```