---
title: "Walking Speed"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---


<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/walking_speedDS.Rmd'}
```
```{r global, echo=F}
source('../../_DS_Rmd/walking_speedDS.R')
```




# Data process


```{r conversion}

# 12 feet to meters:
# 1 ft = 0.3048 m

mt12 <- 12 * 0.3048

```


## HRS

```{r assign hrs, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_hrs','HRS.HRS_b_HRS',variables=list('r7wspeed','r8wspeed','r9wspeed','r10wspeed','r11wspeed'), missings = TRUE)
HRS_hrs <- opal.execute(o,'HRS_hrs')

```


### Wave 1

Not found.

### Wave 2

Not found.

### Wave 3

Not found.

### Wave 4

Not found.

### Wave 5

Not found.

### Wave 6

Not found.

### Wave 7

#### Study-specific variable description

| **Name** |`r7wspeed`|
|-|-|
| **Label** |`r7wspeed:w7 r average walking speed(sec)`|
| **Table name** |`HRS_b_HRS`|
| **Units** |`seconds`|
| **Description** |  |


```{r local hrs_w7, echo=FALSE}

vbl <- HRS_hrs$r7wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_hrs, aes(r7wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r7wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r7wspeed`
* `r7wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo hrs_w7}

HRS_ds_hrs_w7 <- tibble(id=HRS_hrs$id)

# Continuous variable
HRS_ds_hrs_w7$walking_speed_c <- mt12/HRS_hrs$r7wspeed
HRS_ds_hrs_w7$walking_speed_c <- car::recode(HRS_ds_hrs_w7$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_hrs_w7$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_hrs_w7$walking_speed <- car::recode(HRS_ds_hrs_w7$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript hrs_w7, echo=F}

vbl <- HRS_ds_hrs_w7$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_hrs_w7, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_hrs_w7$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w7, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation hrs_w7, echo=F}

continuous <- c(sum(na.omit(HRS_ds_hrs_w7$walking_speed_c)<=Q), sum(na.omit(HRS_ds_hrs_w7$walking_speed_c)>Q & na.omit(HRS_ds_hrs_w7$walking_speed_c)<990), sum(na.omit(HRS_ds_hrs_w7$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_hrs_w7$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 8


#### Study-specific variable description

| **Name** |`r8wspeed`|
|-|-|
| **Label** |`r8wspeed:w8 r average walking speed(sec)`|
| **Table name** |`HRS_b_HRS`|
| **Units** |`seconds`|
| **Description** |  |


```{r local hrs_w8, echo=FALSE}

vbl <- HRS_hrs$r8wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_hrs, aes(r8wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r8wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r8wspeed`
* `r8wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo hrs_w8}

HRS_ds_hrs_w8 <- tibble(id=HRS_hrs$id)

# Continuous variable
HRS_ds_hrs_w8$walking_speed_c <- mt12/HRS_hrs$r8wspeed
HRS_ds_hrs_w8$walking_speed_c <- car::recode(HRS_ds_hrs_w8$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_hrs_w8$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_hrs_w8$walking_speed <- car::recode(HRS_ds_hrs_w8$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript hrs_w8, echo=F}

vbl <- HRS_ds_hrs_w8$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_hrs_w8, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_hrs_w8$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w8, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation hrs_w8, echo=F}

continuous <- c(sum(na.omit(HRS_ds_hrs_w8$walking_speed_c)<=Q), sum(na.omit(HRS_ds_hrs_w8$walking_speed_c)>Q & na.omit(HRS_ds_hrs_w8$walking_speed_c)<990), sum(na.omit(HRS_ds_hrs_w8$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_hrs_w8$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




### Wave 9


#### Study-specific variable description

| **Name** |`r9wspeed`|
|-|-|
| **Label** |`r9wspeed:w9 r average walking speed(sec)`|
| **Table name** |`HRS_b_HRS`|
| **Units** |`seconds`|
| **Description** |  |


```{r local hrs_w9, echo=FALSE}

vbl <- HRS_hrs$r9wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_hrs, aes(r9wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r9wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r9wspeed`
* `r9wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo hrs_w9}

HRS_ds_hrs_w9 <- tibble(id=HRS_hrs$id)

# Continuous variable
HRS_ds_hrs_w9$walking_speed_c <- mt12/HRS_hrs$r9wspeed
HRS_ds_hrs_w9$walking_speed_c <- car::recode(HRS_ds_hrs_w9$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_hrs_w9$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_hrs_w9$walking_speed <- car::recode(HRS_ds_hrs_w9$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript hrs_w9, echo=F}

vbl <- HRS_ds_hrs_w9$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_hrs_w9, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_hrs_w9$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w9, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation hrs_w9, echo=F}

continuous <- c(sum(na.omit(HRS_ds_hrs_w9$walking_speed_c)<=Q), sum(na.omit(HRS_ds_hrs_w9$walking_speed_c)>Q & na.omit(HRS_ds_hrs_w9$walking_speed_c)<990), sum(na.omit(HRS_ds_hrs_w9$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_hrs_w9$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_HRS`|
| **Units** |`seconds`|
| **Description** |  |


```{r local hrs_w10, echo=FALSE}

vbl <- HRS_hrs$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_hrs, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo hrs_w10}

HRS_ds_hrs_w10 <- tibble(id=HRS_hrs$id)

# Continuous variable
HRS_ds_hrs_w10$walking_speed_c <- mt12/HRS_hrs$r10wspeed
HRS_ds_hrs_w10$walking_speed_c <- car::recode(HRS_ds_hrs_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_hrs_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_hrs_w10$walking_speed <- car::recode(HRS_ds_hrs_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript hrs_w10, echo=F}

vbl <- HRS_ds_hrs_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_hrs_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_hrs_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation hrs_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_hrs_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_hrs_w10$walking_speed_c)>Q & na.omit(HRS_ds_hrs_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_hrs_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_hrs_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_HRS`|
| **Units** |`seconds`|
| **Description** |  |


```{r local hrs_w11, echo=FALSE}

vbl <- HRS_hrs$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_hrs, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo hrs_w11}

HRS_ds_hrs_w11 <- tibble(id=HRS_hrs$id)

# Continuous variable
HRS_ds_hrs_w11$walking_speed_c <- mt12/HRS_hrs$r11wspeed
HRS_ds_hrs_w11$walking_speed_c <- car::recode(HRS_ds_hrs_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_hrs_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_hrs_w11$walking_speed <- car::recode(HRS_ds_hrs_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript hrs_w11, echo=F}

vbl <- HRS_ds_hrs_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_hrs_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_hrs_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation hrs_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_hrs_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_hrs_w11$walking_speed_c)>Q & na.omit(HRS_ds_hrs_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_hrs_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_hrs_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




## Asset and Health Dynamics among the Oldest Old sub-sample (AHEAD)

```{r assign ahead, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_ahead','HRS.HRS_b_AHEAD',variables=list('r7wspeed','r8wspeed','r9wspeed','r10wspeed','r11wspeed'), missings = TRUE)
HRS_ahead <- opal.execute(o,'HRS_ahead')

```




### Wave 2

Not found.

### Wave 3

Not found.

### Wave 4

Not found.

### Wave 5

Not found.

### Wave 6

Not found.

### Wave 7

#### Study-specific variable description

| **Name** |`r7wspeed`|
|-|-|
| **Label** |`r7wspeed:w7 r average walking speed(sec)`|
| **Table name** |`HRS_b_AHEAD`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ahead_w7, echo=FALSE}

vbl <- HRS_ahead$r7wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ahead, aes(r7wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r7wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r7wspeed`
* `r7wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ahead_w7}

HRS_ds_ahead_w7 <- tibble(id=HRS_ahead$id)

# Continuous variable
HRS_ds_ahead_w7$walking_speed_c <- mt12/HRS_ahead$r7wspeed
HRS_ds_ahead_w7$walking_speed_c <- car::recode(HRS_ds_ahead_w7$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ahead_w7$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ahead_w7$walking_speed <- car::recode(HRS_ds_ahead_w7$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ahead_w7, echo=F}

vbl <- HRS_ds_ahead_w7$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ahead_w7, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ahead_w7$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w7, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ahead_w7, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ahead_w7$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ahead_w7$walking_speed_c)>Q & na.omit(HRS_ds_ahead_w7$walking_speed_c)<990), sum(na.omit(HRS_ds_ahead_w7$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ahead_w7$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 8


#### Study-specific variable description

| **Name** |`r8wspeed`|
|-|-|
| **Label** |`r8wspeed:w8 r average walking speed(sec)`|
| **Table name** |`HRS_b_AHEAD`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ahead_w8, echo=FALSE}

vbl <- HRS_ahead$r8wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ahead, aes(r8wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r8wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r8wspeed`
* `r8wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ahead_w8}

HRS_ds_ahead_w8 <- tibble(id=HRS_ahead$id)

# Continuous variable
HRS_ds_ahead_w8$walking_speed_c <- mt12/HRS_ahead$r8wspeed
HRS_ds_ahead_w8$walking_speed_c <- car::recode(HRS_ds_ahead_w8$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ahead_w8$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ahead_w8$walking_speed <- car::recode(HRS_ds_ahead_w8$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ahead_w8, echo=F}

vbl <- HRS_ds_ahead_w8$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ahead_w8, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ahead_w8$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w8, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ahead_w8, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ahead_w8$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ahead_w8$walking_speed_c)>Q & na.omit(HRS_ds_ahead_w8$walking_speed_c)<990), sum(na.omit(HRS_ds_ahead_w8$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ahead_w8$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




### Wave 9


#### Study-specific variable description

| **Name** |`r9wspeed`|
|-|-|
| **Label** |`r9wspeed:w9 r average walking speed(sec)`|
| **Table name** |`HRS_b_AHEAD`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ahead_w9, echo=FALSE}

vbl <- HRS_ahead$r9wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ahead, aes(r9wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r9wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r9wspeed`
* `r9wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ahead_w9}

HRS_ds_ahead_w9 <- tibble(id=HRS_ahead$id)

# Continuous variable
HRS_ds_ahead_w9$walking_speed_c <- mt12/HRS_ahead$r9wspeed
HRS_ds_ahead_w9$walking_speed_c <- car::recode(HRS_ds_ahead_w9$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ahead_w9$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ahead_w9$walking_speed <- car::recode(HRS_ds_ahead_w9$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ahead_w9, echo=F}

vbl <- HRS_ds_ahead_w9$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ahead_w9, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ahead_w9$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w9, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ahead_w9, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ahead_w9$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ahead_w9$walking_speed_c)>Q & na.omit(HRS_ds_ahead_w9$walking_speed_c)<990), sum(na.omit(HRS_ds_ahead_w9$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ahead_w9$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_AHEAD`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ahead_w10, echo=FALSE}

vbl <- HRS_ahead$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ahead, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ahead_w10}

HRS_ds_ahead_w10 <- tibble(id=HRS_ahead$id)

# Continuous variable
HRS_ds_ahead_w10$walking_speed_c <- mt12/HRS_ahead$r10wspeed
HRS_ds_ahead_w10$walking_speed_c <- car::recode(HRS_ds_ahead_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ahead_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ahead_w10$walking_speed <- car::recode(HRS_ds_ahead_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ahead_w10, echo=F}

vbl <- HRS_ds_ahead_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ahead_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ahead_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ahead_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ahead_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ahead_w10$walking_speed_c)>Q & na.omit(HRS_ds_ahead_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_ahead_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ahead_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_AHEAD`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ahead_w11, echo=FALSE}

vbl <- HRS_ahead$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ahead, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ahead_w11}

HRS_ds_ahead_w11 <- tibble(id=HRS_ahead$id)

# Continuous variable
HRS_ds_ahead_w11$walking_speed_c <- mt12/HRS_ahead$r11wspeed
HRS_ds_ahead_w11$walking_speed_c <- car::recode(HRS_ds_ahead_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ahead_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ahead_w11$walking_speed <- car::recode(HRS_ds_ahead_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ahead_w11, echo=F}

vbl <- HRS_ds_ahead_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ahead_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ahead_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ahead_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ahead_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ahead_w11$walking_speed_c)>Q & na.omit(HRS_ds_ahead_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_ahead_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ahead_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




## The Children of the Depression sub-sample (CODA)


```{r assign coda, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_coda','HRS.HRS_b_CODA',variables=list('r7wspeed','r8wspeed','r9wspeed','r10wspeed','r11wspeed'), missings = TRUE)
HRS_coda <- opal.execute(o,'HRS_coda')

```




### Wave 4

Not found.

### Wave 5

Not found.

### Wave 6

Not found.

### Wave 7

#### Study-specific variable description

| **Name** |`r7wspeed`|
|-|-|
| **Label** |`r7wspeed:w7 r average walking speed(sec)`|
| **Table name** |`HRS_b_CODA`|
| **Units** |`seconds`|
| **Description** |  |


```{r local coda_w7, echo=FALSE}

vbl <- HRS_coda$r7wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_coda, aes(r7wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r7wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r7wspeed`
* `r7wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo coda_w7}

HRS_ds_coda_w7 <- tibble(id=HRS_coda$id)

# Continuous variable
HRS_ds_coda_w7$walking_speed_c <- mt12/HRS_coda$r7wspeed
HRS_ds_coda_w7$walking_speed_c <- car::recode(HRS_ds_coda_w7$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_coda_w7$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_coda_w7$walking_speed <- car::recode(HRS_ds_coda_w7$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript coda_w7, echo=F}

vbl <- HRS_ds_coda_w7$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_coda_w7, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_coda_w7$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w7, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation coda_w7, echo=F}

continuous <- c(sum(na.omit(HRS_ds_coda_w7$walking_speed_c)<=Q), sum(na.omit(HRS_ds_coda_w7$walking_speed_c)>Q & na.omit(HRS_ds_coda_w7$walking_speed_c)<990), sum(na.omit(HRS_ds_coda_w7$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_coda_w7$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 8


#### Study-specific variable description

| **Name** |`r8wspeed`|
|-|-|
| **Label** |`r8wspeed:w8 r average walking speed(sec)`|
| **Table name** |`HRS_b_CODA`|
| **Units** |`seconds`|
| **Description** |  |


```{r local coda_w8, echo=FALSE}

vbl <- HRS_coda$r8wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_coda, aes(r8wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r8wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r8wspeed`
* `r8wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo coda_w8}

HRS_ds_coda_w8 <- tibble(id=HRS_coda$id)

# Continuous variable
HRS_ds_coda_w8$walking_speed_c <- mt12/HRS_coda$r8wspeed
HRS_ds_coda_w8$walking_speed_c <- car::recode(HRS_ds_coda_w8$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_coda_w8$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_coda_w8$walking_speed <- car::recode(HRS_ds_coda_w8$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript coda_w8, echo=F}

vbl <- HRS_ds_coda_w8$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_coda_w8, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_coda_w8$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w8, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation coda_w8, echo=F}

continuous <- c(sum(na.omit(HRS_ds_coda_w8$walking_speed_c)<=Q), sum(na.omit(HRS_ds_coda_w8$walking_speed_c)>Q & na.omit(HRS_ds_coda_w8$walking_speed_c)<990), sum(na.omit(HRS_ds_coda_w8$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_coda_w8$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




### Wave 9


#### Study-specific variable description

| **Name** |`r9wspeed`|
|-|-|
| **Label** |`r9wspeed:w9 r average walking speed(sec)`|
| **Table name** |`HRS_b_CODA`|
| **Units** |`seconds`|
| **Description** |  |


```{r local coda_w9, echo=FALSE}

vbl <- HRS_coda$r9wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_coda, aes(r9wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r9wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r9wspeed`
* `r9wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo coda_w9}

HRS_ds_coda_w9 <- tibble(id=HRS_coda$id)

# Continuous variable
HRS_ds_coda_w9$walking_speed_c <- mt12/HRS_coda$r9wspeed
HRS_ds_coda_w9$walking_speed_c <- car::recode(HRS_ds_coda_w9$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_coda_w9$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_coda_w9$walking_speed <- car::recode(HRS_ds_coda_w9$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript coda_w9, echo=F}

vbl <- HRS_ds_coda_w9$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_coda_w9, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_coda_w9$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w9, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation coda_w9, echo=F}

continuous <- c(sum(na.omit(HRS_ds_coda_w9$walking_speed_c)<=Q), sum(na.omit(HRS_ds_coda_w9$walking_speed_c)>Q & na.omit(HRS_ds_coda_w9$walking_speed_c)<990), sum(na.omit(HRS_ds_coda_w9$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_coda_w9$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_CODA`|
| **Units** |`seconds`|
| **Description** |  |


```{r local coda_w10, echo=FALSE}

vbl <- HRS_coda$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_coda, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo coda_w10}

HRS_ds_coda_w10 <- tibble(id=HRS_coda$id)

# Continuous variable
HRS_ds_coda_w10$walking_speed_c <- mt12/HRS_coda$r10wspeed
HRS_ds_coda_w10$walking_speed_c <- car::recode(HRS_ds_coda_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_coda_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_coda_w10$walking_speed <- car::recode(HRS_ds_coda_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript coda_w10, echo=F}

vbl <- HRS_ds_coda_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_coda_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_coda_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation coda_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_coda_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_coda_w10$walking_speed_c)>Q & na.omit(HRS_ds_coda_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_coda_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_coda_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_CODA`|
| **Units** |`seconds`|
| **Description** |  |


```{r local coda_w11, echo=FALSE}

vbl <- HRS_coda$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_coda, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo coda_w11}

HRS_ds_coda_w11 <- tibble(id=HRS_coda$id)

# Continuous variable
HRS_ds_coda_w11$walking_speed_c <- mt12/HRS_coda$r11wspeed
HRS_ds_coda_w11$walking_speed_c <- car::recode(HRS_ds_coda_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_coda_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_coda_w11$walking_speed <- car::recode(HRS_ds_coda_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript coda_w11, echo=F}

vbl <- HRS_ds_coda_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_coda_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_coda_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation coda_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_coda_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_coda_w11$walking_speed_c)>Q & na.omit(HRS_ds_coda_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_coda_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_coda_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




## The War Baby sub-sample (WB)

```{r assign wb, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_wb','HRS.HRS_b_WB',variables=list('r7wspeed','r8wspeed','r9wspeed','r10wspeed','r11wspeed'), missings = TRUE)
HRS_wb <- opal.execute(o,'HRS_wb')

```



### Wave 4

Not found.

### Wave 5

Not found.

### Wave 6

Not found.

### Wave 7

#### Study-specific variable description

| **Name** |`r7wspeed`|
|-|-|
| **Label** |`r7wspeed:w7 r average walking speed(sec)`|
| **Table name** |`HRS_b_WB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local wb_w7, echo=FALSE}

vbl <- HRS_wb$r7wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_wb, aes(r7wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r7wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r7wspeed`
* `r7wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo wb_w7}

HRS_ds_wb_w7 <- tibble(id=HRS_wb$id)

# Continuous variable
HRS_ds_wb_w7$walking_speed_c <- mt12/HRS_wb$r7wspeed
HRS_ds_wb_w7$walking_speed_c <- car::recode(HRS_ds_wb_w7$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_wb_w7$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_wb_w7$walking_speed <- car::recode(HRS_ds_wb_w7$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript wb_w7, echo=F}

vbl <- HRS_ds_wb_w7$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_wb_w7, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_wb_w7$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w7, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation wb_w7, echo=F}

continuous <- c(sum(na.omit(HRS_ds_wb_w7$walking_speed_c)<=Q), sum(na.omit(HRS_ds_wb_w7$walking_speed_c)>Q & na.omit(HRS_ds_wb_w7$walking_speed_c)<990), sum(na.omit(HRS_ds_wb_w7$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_wb_w7$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 8


#### Study-specific variable description

| **Name** |`r8wspeed`|
|-|-|
| **Label** |`r8wspeed:w8 r average walking speed(sec)`|
| **Table name** |`HRS_b_WB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local wb_w8, echo=FALSE}

vbl <- HRS_wb$r8wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_wb, aes(r8wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r8wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r8wspeed`
* `r8wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo wb_w8}

HRS_ds_wb_w8 <- tibble(id=HRS_wb$id)

# Continuous variable
HRS_ds_wb_w8$walking_speed_c <- mt12/HRS_wb$r8wspeed
HRS_ds_wb_w8$walking_speed_c <- car::recode(HRS_ds_wb_w8$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_wb_w8$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_wb_w8$walking_speed <- car::recode(HRS_ds_wb_w8$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript wb_w8, echo=F}

vbl <- HRS_ds_wb_w8$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_wb_w8, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_wb_w8$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w8, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation wb_w8, echo=F}

continuous <- c(sum(na.omit(HRS_ds_wb_w8$walking_speed_c)<=Q), sum(na.omit(HRS_ds_wb_w8$walking_speed_c)>Q & na.omit(HRS_ds_wb_w8$walking_speed_c)<990), sum(na.omit(HRS_ds_wb_w8$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_wb_w8$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




### Wave 9


#### Study-specific variable description

| **Name** |`r9wspeed`|
|-|-|
| **Label** |`r9wspeed:w9 r average walking speed(sec)`|
| **Table name** |`HRS_b_WB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local wb_w9, echo=FALSE}

vbl <- HRS_wb$r9wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_wb, aes(r9wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r9wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r9wspeed`
* `r9wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo wb_w9}

HRS_ds_wb_w9 <- tibble(id=HRS_wb$id)

# Continuous variable
HRS_ds_wb_w9$walking_speed_c <- mt12/HRS_wb$r9wspeed
HRS_ds_wb_w9$walking_speed_c <- car::recode(HRS_ds_wb_w9$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_wb_w9$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_wb_w9$walking_speed <- car::recode(HRS_ds_wb_w9$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript wb_w9, echo=F}

vbl <- HRS_ds_wb_w9$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_wb_w9, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_wb_w9$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w9, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation wb_w9, echo=F}

continuous <- c(sum(na.omit(HRS_ds_wb_w9$walking_speed_c)<=Q), sum(na.omit(HRS_ds_wb_w9$walking_speed_c)>Q & na.omit(HRS_ds_wb_w9$walking_speed_c)<990), sum(na.omit(HRS_ds_wb_w9$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_wb_w9$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_WB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local wb_w10, echo=FALSE}

vbl <- HRS_wb$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_wb, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo wb_w10}

HRS_ds_wb_w10 <- tibble(id=HRS_wb$id)

# Continuous variable
HRS_ds_wb_w10$walking_speed_c <- mt12/HRS_wb$r10wspeed
HRS_ds_wb_w10$walking_speed_c <- car::recode(HRS_ds_wb_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_wb_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_wb_w10$walking_speed <- car::recode(HRS_ds_wb_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript wb_w10, echo=F}

vbl <- HRS_ds_wb_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_wb_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.4, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_wb_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation wb_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_wb_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_wb_w10$walking_speed_c)>Q & na.omit(HRS_ds_wb_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_wb_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_wb_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_WB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local wb_w11, echo=FALSE}

vbl <- HRS_wb$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_wb, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo wb_w11}

HRS_ds_wb_w11 <- tibble(id=HRS_wb$id)

# Continuous variable
HRS_ds_wb_w11$walking_speed_c <- mt12/HRS_wb$r11wspeed
HRS_ds_wb_w11$walking_speed_c <- car::recode(HRS_ds_wb_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_wb_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_wb_w11$walking_speed <- car::recode(HRS_ds_wb_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript wb_w11, echo=F}

vbl <- HRS_ds_wb_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_wb_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_wb_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation wb_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_wb_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_wb_w11$walking_speed_c)>Q & na.omit(HRS_ds_wb_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_wb_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_wb_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```



## The Early Baby Boomer sub-sample (EBB)


```{r assign ebb, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_ebb','HRS.HRS_b_EBB',variables=list('r7wspeed','r8wspeed','r9wspeed','r10wspeed','r11wspeed'), missings = TRUE)
HRS_ebb <- opal.execute(o,'HRS_ebb')

```



### Wave 7

All data is missing in the variable `r7wspeed`.


### Wave 8


#### Study-specific variable description

| **Name** |`r8wspeed`|
|-|-|
| **Label** |`r8wspeed:w8 r average walking speed(sec)`|
| **Table name** |`HRS_b_EBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ebb_w8, echo=FALSE}

vbl <- HRS_ebb$r8wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ebb, aes(r8wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r8wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r8wspeed`
* `r8wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ebb_w8}

HRS_ds_ebb_w8 <- tibble(id=HRS_ebb$id)

# Continuous variable
HRS_ds_ebb_w8$walking_speed_c <- mt12/HRS_ebb$r8wspeed
HRS_ds_ebb_w8$walking_speed_c <- car::recode(HRS_ds_ebb_w8$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ebb_w8$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ebb_w8$walking_speed <- car::recode(HRS_ds_ebb_w8$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ebb_w8, echo=F}

vbl <- HRS_ds_ebb_w8$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ebb_w8, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ebb_w8$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w8, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ebb_w8, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ebb_w8$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ebb_w8$walking_speed_c)>Q & na.omit(HRS_ds_ebb_w8$walking_speed_c)<990), sum(na.omit(HRS_ds_ebb_w8$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ebb_w8$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```




### Wave 9


#### Study-specific variable description

| **Name** |`r9wspeed`|
|-|-|
| **Label** |`r9wspeed:w9 r average walking speed(sec)`|
| **Table name** |`HRS_b_EBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ebb_w9, echo=FALSE}

vbl <- HRS_ebb$r9wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ebb, aes(r9wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r9wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r9wspeed`
* `r9wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ebb_w9}

HRS_ds_ebb_w9 <- tibble(id=HRS_ebb$id)

# Continuous variable
HRS_ds_ebb_w9$walking_speed_c <- mt12/HRS_ebb$r9wspeed
HRS_ds_ebb_w9$walking_speed_c <- car::recode(HRS_ds_ebb_w9$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ebb_w9$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ebb_w9$walking_speed <- car::recode(HRS_ds_ebb_w9$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ebb_w9, echo=F}

vbl <- HRS_ds_ebb_w9$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ebb_w9, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ebb_w9$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w9, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ebb_w9, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ebb_w9$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ebb_w9$walking_speed_c)>Q & na.omit(HRS_ds_ebb_w9$walking_speed_c)<990), sum(na.omit(HRS_ds_ebb_w9$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ebb_w9$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_EBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ebb_w10, echo=FALSE}

vbl <- HRS_ebb$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ebb, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ebb_w10}

HRS_ds_ebb_w10 <- tibble(id=HRS_ebb$id)

# Continuous variable
HRS_ds_ebb_w10$walking_speed_c <- mt12/HRS_ebb$r10wspeed
HRS_ds_ebb_w10$walking_speed_c <- car::recode(HRS_ds_ebb_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ebb_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ebb_w10$walking_speed <- car::recode(HRS_ds_ebb_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ebb_w10, echo=F}

vbl <- HRS_ds_ebb_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ebb_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ebb_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ebb_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ebb_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ebb_w10$walking_speed_c)>Q & na.omit(HRS_ds_ebb_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_ebb_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ebb_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_EBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local ebb_w11, echo=FALSE}

vbl <- HRS_ebb$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_ebb, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo ebb_w11}

HRS_ds_ebb_w11 <- tibble(id=HRS_ebb$id)

# Continuous variable
HRS_ds_ebb_w11$walking_speed_c <- mt12/HRS_ebb$r11wspeed
HRS_ds_ebb_w11$walking_speed_c <- car::recode(HRS_ds_ebb_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_ebb_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_ebb_w11$walking_speed <- car::recode(HRS_ds_ebb_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript ebb_w11, echo=F}

vbl <- HRS_ds_ebb_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_ebb_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_ebb_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation ebb_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_ebb_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_ebb_w11$walking_speed_c)>Q & na.omit(HRS_ds_ebb_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_ebb_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_ebb_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```



## The Mid Baby Boomer sub-sample (MBB)


```{r assign mbb, echo=FALSE}

opal.assign.table.tibble(o, 'HRS_mbb','HRS.HRS_b_MBB',variables=list('r10wspeed','r11wspeed'), missings = TRUE)
HRS_mbb <- opal.execute(o,'HRS_mbb')

```



### Wave 10


#### Study-specific variable description

| **Name** |`r10wspeed`|
|-|-|
| **Label** |`r10wspeed:w10 r average walking speed(sec)`|
| **Table name** |`HRS_b_MBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local mbb_w10, echo=FALSE}

vbl <- HRS_mbb$r10wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_mbb, aes(r10wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r10wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r10wspeed`
* `r10wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo mbb_w10}

HRS_ds_mbb_w10 <- tibble(id=HRS_mbb$id)

# Continuous variable
HRS_ds_mbb_w10$walking_speed_c <- mt12/HRS_mbb$r10wspeed
HRS_ds_mbb_w10$walking_speed_c <- car::recode(HRS_ds_mbb_w10$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_mbb_w10$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_mbb_w10$walking_speed <- car::recode(HRS_ds_mbb_w10$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript mbb_w10, echo=F}

vbl <- HRS_ds_mbb_w10$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_mbb_w10, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_mbb_w10$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w10, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation mbb_w10, echo=F}

continuous <- c(sum(na.omit(HRS_ds_mbb_w10$walking_speed_c)<=Q), sum(na.omit(HRS_ds_mbb_w10$walking_speed_c)>Q & na.omit(HRS_ds_mbb_w10$walking_speed_c)<990), sum(na.omit(HRS_ds_mbb_w10$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_mbb_w10$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```


### Wave 11


#### Study-specific variable description

| **Name** |`r11wspeed`|
|-|-|
| **Label** |`r11wspeed:w11 r average walking speed(sec)`|
| **Table name** |`HRS_b_MBB`|
| **Units** |`seconds`|
| **Description** |  |


```{r local mbb_w11, echo=FALSE}

vbl <- HRS_mbb$r11wspeed
kable(Continuous_summary(vbl, missing_values = NA)[3], caption = attributes(vbl)$`spss::shortName`)
pander(Continuous_summary(vbl, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_mbb, aes(r11wspeed)) + geom_histogram(stat="count", fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```

#### Harmonisation algorithm

To compute the harmonised variable `walking_speed_c` from the study-specific variable, it has to be taken into account that:

* `r11wspeed` indicates an average time in seconds of the respondent across 12 foot.
* `1 ft = 0.3048 m`
* `walking_speed_c (m/s) = (12*0.3048)/r11wspeed`
* `r11wspeed == 0 into 991`
* `NA into 999`

To compute the harmonised variable `walking_speed` from `walking_speed_c`, it has to be recoded as follows:

* `walking_speed_c <=25% into 0`
* `walking_speed_c >25% into 1`

**R script:**

```{r harmo mbb_w11}

HRS_ds_mbb_w11 <- tibble(id=HRS_mbb$id)

# Continuous variable
HRS_ds_mbb_w11$walking_speed_c <- mt12/HRS_mbb$r11wspeed
HRS_ds_mbb_w11$walking_speed_c <- car::recode(HRS_ds_mbb_w11$walking_speed_c, "Inf = 991; NA = 999")

#Dichotomous variable
Q <- quantile(car::recode(HRS_ds_mbb_w11$walking_speed_c, "miss_values_vector = NA"), probs = 1/4, na.rm = TRUE, names = FALSE)
HRS_ds_mbb_w11$walking_speed <- car::recode(HRS_ds_mbb_w11$walking_speed_c, "0:Q = 0; Q:990 = 1")


```


#### Statistical description of the new harmonised variable

```{r descript mbb_w11, echo=F}

vbl <- HRS_ds_mbb_w11$walking_speed_c
kable(Continuous_summary(var = vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed_c)
kable(Continuous_summary(vbl, missing_values = miss_values_vector)[2], caption = "Values")
pander(Continuous_summary(vbl, missing_values = miss_values_vector)$summary, caption = "Summary")
ggplot(HRS_ds_mbb_w11, aes(walking_speed_c)) + geom_bar(stat="count", width=0.01, fill="steelblue", data = .%>% filter(!vbl %in% miss_values_vector)) + xlab(ds_label_walking_speed_c) + ylab("Frequency")

vbl <- HRS_ds_mbb_w11$walking_speed
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_walking_speed) 
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w11, aes(x=factor(walking_speed))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_walking_speed) + ylab("Frequency")

```



#### Validation

```{r crosstabulation mbb_w11, echo=F}

continuous <- c(sum(na.omit(HRS_ds_mbb_w11$walking_speed_c)<=Q), sum(na.omit(HRS_ds_mbb_w11$walking_speed_c)>Q & na.omit(HRS_ds_mbb_w11$walking_speed_c)<990), sum(na.omit(HRS_ds_mbb_w11$walking_speed_c) %in% miss_values_vector))
dichotomous <- table(HRS_ds_mbb_w11$walking_speed, useNA = "ifany")
C <- rbind(continuous,dichotomous)
colnames(C) <- c("0:Q->0","Q:900->1", "NA->999") 
kable(C, caption = "Continuous vs Dichotomous")

```











## Summary of descriptive statistics of the harmonised variable `walking_speed` accross populations and waves

Two tables are generated: 

1. Percentages of categories in each harmonised variable.

2. Frequencies and percentages of individuals with different trajectories. To avoid too large table, Only trajectories with percentages larger than 0.3 are shown.

<!--AUXILIAR FUNCTIONS-->

```{r helpfunctions, echo=FALSE}


labelling <- function(l.hds,m.hds,vbl_name,ds_lab = ds_label){
  
  # Labelling of the tibbles with categorical data and creating new tibbles with all missings recodified as NA

  for(name in names(l.hds)) {
    if(vbl_name %in% names(l.hds[[1]])){
      # In the aux_object we copy the old tibble to recodify all missing values as NA.
      aux_object <- l.hds[[name]]
      # Labelling of variables
      label(l.hds[[name]][[vbl_name]]) <- label(aux_object[[vbl_name]]) <- ds_lab
      # Labelling of categories (for continues variables, only missing values)
      l.hds[[name]][[vbl_name]] <- labelled(l.hds[[name]][[vbl_name]], labels = cat_label)
      aux_object[[vbl_name]] <- car::recode(aux_object[[vbl_name]], "miss_values_vector=NA")
      # Labelling of categories (for categorical variables, only non-missing values)
      aux_object[[vbl_name]] <- labelled(aux_object[[vbl_name]], labels = cat_label[1:(length(cat_label)-9)])
      # Saving the recodified tibble in list m.hds
      m.hds[[name]] <- aux_object
      rm(aux_object)
    }
  }
  return(list(l.hds,m.hds))

}


labelling_c <- function(l.hds,m.hds,vbl_name,ds_lab=ds_label){
  
  # Labelling of the tibbles with continuous data and creating new tibbles with all missings recodified as NA

  for(name in names(l.hds)) {
    if(vbl_name %in% names(l.hds[[1]])){
      # In the aux_object we copy the old tibble to recodify all missing values as NA.
      aux_object <- l.hds[[name]]
      # Labelling of variables
      label(l.hds[[name]][[vbl_name]]) <- label(aux_object[[vbl_name]]) <- ds_lab
      # Labelling of categories (for continues variables, only missing values)
      l.hds[[name]][[vbl_name]] <- labelled(l.hds[[name]][[vbl_name]], labels = cont_label)
      aux_object[[vbl_name]] <- car::recode(aux_object[[vbl_name]], "miss_values_vector=NA")
      # Saving the recodified tibble in list m.hds
      m.hds[[name]] <- aux_object
      rm(aux_object)
    }
  }
  return(list(l.hds,m.hds))

}


# Creation of summary tables for categorical data

summaries <- function(l.hds,m.hds,lnames,vbl_name){

  # Creation of columns with categories and labels
  t.hds <- frq(l.hds[[1]][vbl_name])[[1]][,c(1,2)] 
  # For each wave/population in l.hds, add the correponding values
  for (i in seq_along(l.hds)){
    t.hds[2+i] <- frq(l.hds[[i]][vbl_name])[[1]][,4] 
  }
  # Add sample size for each wave/population
  t.hds[2+length(cat_label),] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
  )
  # Add wave/population names
  names(t.hds)<-c("val", "label",lnames)
  return(t.hds)
  
}


# Creation of summary tables for continuous data

summaries_c <- function(l.hds,m.hds,lnames,vbl_name){

  # Creation of column with summary table categories
  t.summ <- summary(m.hds[[1]][vbl_name])[1:6]
  # Adding of missing/no-missing values categories
  t.hds <- c(substr(t.summ,1,regexpr(":", t.summ, fixed=T)-1),labels(Continuous_summary(l.hds[[1]][[vbl_name]], missing_values = miss_values_vector)$values_table)[[2]])
  # For each wave/population in l.hds, add the correponding values
  for (i in seq_along(l.hds)){
    # First, summary values
    t.summ <- summary(m.hds[[i]][vbl_name])[1:6]
    # Next, missing/no-missing values (the 1 in $values_table[1,] stands for absolute values, while a 2 would stand for percentages)
    t.hds <- cbind(t.hds,c(as.numeric(substr(t.summ,regexpr(":", t.summ, fixed=T)+1,nchar(t.summ))),as.numeric(Continuous_summary(l.hds[[i]][[vbl_name]],missing_values = miss_values_vector)$values_table[1,])))
  }
  # Add sample size for each wave/population
  t.hds <- rbind(t.hds,c("sample size", sapply(l.hds,function(wave) length(wave[[1]]))))
  # Add wave/population names
  dimnames(t.hds)[[2]] <- c(dimnames(summary(m.hds[[1]][vbl_name]))[[2]],lnames)
  return(t.hds)
  
}



# Creation of trajectories table for each population

trajectories <- function(m.hds,vbl_name){
  
  # First wave data
  dbb <- m.hds[[1]][,c("id",vbl_name)]
  # Merge with next waves data
  for(ind in 2:length(m.hds)){
    dbb <- merge(dbb, m.hds[[ind]][,c("id",vbl_name)], by = "id", suffixes = c("", paste0(".",names(m.hds)[ind])), all = T)
  }
  names(dbb) <- c("id", names(m.hds))
  
  # Glue individual data through all waves into trajectories
  v.dbb <- dbb[,2]
  for(ind in 2:length(m.hds)){
    v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
  }
  # Trajectories and frequencies
  f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
  return(f.dbb)
  
}


# Save data tables

savingRD <- function(l.hds,vbl_name){

  for(index in seq_along(l.hds)){
    assign(vbl_name,l.hds[[index]])
    save(vbl_name,list = vbl_name, file = paste0(datafolder,names(l.hds)[index],"/",vbl_name,".RData"))
  }

}

```



```{r populations-waves, echo=F}


# All study waves and populations with abbreviated and descriptive names


hrs.hrs.cw <- list(hrs_w1 = c("hrs_w1","HRS w1"), hrs_w2 = c("hrs_w2","HRS w2"), hrs_w3 = c("hrs_w3","HRS w3"), hrs_w4 = c("hrs_w4","HRS w4"), hrs_w5 = c("hrs_w5","HRS w5"), hrs_w6 = c("hrs_w6","HRS w6"), hrs_w7 = c("hrs_w7","HRS w7"), hrs_w8 = c("hrs_w8","HRS w8"), hrs_w9 = c("hrs_w9","HRS w9"), hrs_w10 = c("hrs_w10","HRS w10"), hrs_w11 = c("hrs_w11","HRS w11"))

hrs.ahead.cw <- list(ahead_w2 = c("ahead_w2","AHEAD w2"), ahead_w3 = c("ahead_w3","AHEAD w3"), ahead_w4 = c("ahead_w4","AHEAD w4"), ahead_w5 = c("ahead_w5","AHEAD w5"), ahead_w6 = c("ahead_w6","AHEAD w6"), ahead_w7 = c("ahead_w7","AHEAD w7"), ahead_w8 = c("ahead_w8","AHEAD w8"), ahead_w9 = c("ahead_w9","AHEAD w9"), ahead_w10 = c("ahead_w10","AHEAD w10"), ahead_w11 = c("ahead_w11","AHEAD w11"))

hrs.coda.cw <- list(coda_w4 = c("coda_w4","CODA w4"), coda_w5 = c("coda_w5","CODA w5"), coda_w6 = c("coda_w6","CODA w6"), coda_w7 = c("coda_w7","CODA w7"), coda_w8 = c("coda_w8","CODA w8"), coda_w9 = c("coda_w9","CODA w9"), coda_w10 = c("coda_w10","CODA w10"), coda_w11 = c("coda_w11","CODA w11"))

hrs.wb.cw <- list(wb_w4 = c("wb_w4","WB w4"), wb_w5 = c("wb_w5","WB w5"), wb_w6 = c("wb_w6","WB w6"), wb_w7 = c("wb_w7","WB w7"), wb_w8 = c("wb_w8","WB w8"), wb_w9 = c("wb_w9","WB w9"), wb_w10 = c("wb_w10","WB w10"), wb_w11 = c("wb_w11","WB w11"))

hrs.ebb.cw <- list(ebb_w7 = c("ebb_w7","EBB w7"), ebb_w8 = c("ebb_w8","EBB w8"), ebb_w9 = c("ebb_w9","EBB w9"), ebb_w10 = c("ebb_w10","EBB w10"), ebb_w11 = c("ebb_w11","EBB w11"))

hrs.mbb.cw <- list(mbb_w10 = c("mbb_w10","MBB w10"), mbb_w11 = c("mbb_w11","MBB w11"))




```




<!--Labelling and saving-->

```{r, echo=FALSE}

# HRS
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.hrs.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)

if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

hrslist <- lmlist # HRS list


# AHEAD
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.ahead.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

aheadlist <- lmlist # AHEAD list



# CODA
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.coda.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

codalist <- lmlist # CODA list


# WB
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.wb.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

wblist <- lmlist # WB list



# EBB
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.ebb.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

ebblist <- lmlist # EBB list



# MBB
# Consider only waves with some variable harmonised

l.hds <- lapply(hrs.mbb.cw, function(wname) if(exists(paste0("HRS_ds_",wname[1]))){wname = list(get(paste0("HRS_ds_",wname[1])),wname[2])})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}

m.hds <- list()

lmlist <- list(lapply(l.hds,function(x)x[[1]]),m.hds)


if(length(l.hds)>0){
  # Labelling categorical variable of tibbles
  lmlist <- labelling(lmlist[[1]],lmlist[[2]],hd_vbl,ds_label_walking_speed)
  # Labelling continuous variable of tibbles
  lmlist <- labelling_c(lmlist[[1]],lmlist[[2]],hd_vbl_c,ds_label_walking_speed_c)
  # Saving tibbles
  savingRD(lmlist[[1]],vbl_name=hd_vbl)
}

mbblist <- lmlist # MBB list

```


<!--Descriptives-->


```{r summ, echo=FALSE}

# HRS
# Consider only harmonised waves
l.hds <- lapply(hrs.hrs.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- hrslist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- hrslist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb[f.dbb[,3]>=0.3,]))

}



# AHEAD
# Consider only harmonised waves
l.hds <- lapply(hrs.ahead.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}


if(length(l.hds)>0){
  lmlist[[1]] <- aheadlist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- aheadlist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb[f.dbb[,3]>=0.3,]))
}


# CODA
# Consider only harmonised waves
l.hds <- lapply(hrs.coda.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}


if(length(l.hds)>0){
  lmlist[[1]] <- codalist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- codalist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb[f.dbb[,3]>=0.3,]))
}




# WB
# Consider only harmonised waves
l.hds <- lapply(hrs.wb.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}


if(length(l.hds)>0){
  lmlist[[1]] <- wblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- wblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb[f.dbb[,3]>=0.3,]))
}



# EBB
# Consider only harmonised waves
l.hds <- lapply(hrs.ebb.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}


if(length(l.hds)>0){
  lmlist[[1]] <- ebblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- ebblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb))
}



# MBB
# Consider only harmonised waves
l.hds <- lapply(hrs.mbb.cw, function(wname) if(hd_vbl %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})
nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}


if(length(l.hds)>0){
  lmlist[[1]] <- mbblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- mbblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl),caption=ds_label_walking_speed))
  # Printing table of trajectories
  f.dbb <- trajectories(lmlist[[2]],vbl_name=hd_vbl)
  print(knitr::kable(f.dbb))
}

```








## Summary of descriptive statistics of the harmonised variable `walking_speed_c` accross populations and waves





```{r summ_c, echo=FALSE}

# HRS
# Consider only harmonised waves
l.hds <- lapply(hrs.hrs.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- hrslist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- hrslist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}




# AHEAD
# Consider only harmonised waves
l.hds <- lapply(hrs.ahead.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- aheadlist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- aheadlist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}



# CODA
# Consider only harmonised waves
l.hds <- lapply(hrs.coda.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- codalist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- codalist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}




# WB
# Consider only harmonised waves
l.hds <- lapply(hrs.wb.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- wblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- wblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}





# EBB
# Consider only harmonised waves
l.hds <- lapply(hrs.ebb.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- ebblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- ebblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}


# MBB
# Consider only harmonised waves
l.hds <- lapply(hrs.mbb.cw, function(wname) if(hd_vbl_c %in% names(get0(paste0("HRS_ds_",wname[1])))){wname})

nullw <- which(sapply(l.hds, is.null))

if(length(nullw)!=0){
  l.hds <- l.hds[-nullw]
}



if(length(l.hds)>0){
  lmlist[[1]] <- mbblist[[1]][sapply(l.hds,function(x)x[[1]])]
  lmlist[[2]] <- mbblist[[2]][sapply(l.hds,function(x)x[[1]])]
  
  # Printing table of categories
  print(knitr::kable(summaries_c(lmlist[[1]],lmlist[[2]],lapply(l.hds,function(x)x[[2]]),hd_vbl_c),caption=ds_label_walking_speed_c))
}


```



# Quality estimation

From documentation:

> The HRS administered a set of 5 physical measures in 2004, which was only given to a random subsample of approximately 3,300 respondents. While all members of this sample were given the breathing and hand strength tests, smaller subsamples were given varying combinations of the walking test, and height and weight measurements.




```{r closeRsession, echo=FALSE}
opal.logout(o)
```
