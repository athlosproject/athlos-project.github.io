---
title: "Current depressive status"
output: 
  html_document:
    theme: united
    highlight: tango
    toc: true
    toc_depth: 6
    toc_float:
      collapsed: true
      smooth_scroll: true
    number_sections: true
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->



```{r setup, include=FALSE, echo=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_albert.r")
```

<!-- ########################################################## --> 

# Description of DataSchema variable

The description of harmonised variable is the following:

* Short name: `depression`
* Variable label: `Current depressive status of the participant`
* Variable description: `Current depressive status of the participant`
* Domain: `Psycological measures`
* Value type: `categorical`
* Category coding:

**Code** | **Category Label**
-------- | ------------------
0        | no depression
1        | depression

* Category missings: 

**Code** | **Category Label**
----| ------------------
991 | CAPI/interviewer error
992 | Impute
993 | Disable to measure
994 | Not attempt/not done
995 | Does not answer
996 | Not applicable
997 | Refuse
998 | Do not know
999 | Missing


```{r lab, echo=FALSE}
ds_label <- "Current depressive status"
ds_label_all <- "Current depressive status of the participant"
```


<!-- ########################################################## --> 

# Data process

## HRS sub-sample

### Wave 1 

There is no variable.



### Wave 2 

#### Study-specific variable description


| **Name** | `R2CESD`|
|-|-|
| **Label** | `W2 CESD score`|
| **Table name** | `HRS-HRS-w2` |
| **Description** |  |

```{r assign_hrs2, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w2',
                         variables=list('R2CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs2, echo=FALSE}
vari <- HRS_dep[[2]]
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs2, echo=TRUE}
HRS_ds_hrs_w2 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w2$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w2$depression <- labelled(HRS_ds_hrs_w2[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs2, echo=FALSE}
vari <- HRS_ds_hrs_w2$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w2, aes(x=factor(HRS_ds_hrs_w2[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs2, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w2[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
```{r imporOPAL_hrs2, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w2', HRS_ds_hrs_w2)
#opal.symbol_import(o,'HRS_ds_hrs_w2', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w2$depression) <- ds_label_all
depression <- HRS_ds_hrs_w2
save(depression, file = "../RData/hrs_w2/depression.RData")
rm(depression)

HRS_m_ds_hrs_w2 <- HRS_ds_hrs_w2
HRS_m_ds_hrs_w2$depression <- car::recode(HRS_m_ds_hrs_w2$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w2', HRS_m_ds_hrs_w2)
#opal.symbol_import(o,'HRS_m_ds_hrs_w2', project='_Athlos_Harm_Dataset')
```






### Wave 3 

#### Study-specific variable description

 

| **Name** | `R3CESD`|
|-|-|
| **Label** | `W3 CESD score`|
| **Table name** | `HRS-HRS-w3` |
| **Description** |  |

```{r assign_hrs3, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w3',
                         variables=list('R3CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs3, echo=FALSE}
vari <- HRS_dep$R3CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs3, echo=TRUE}
HRS_ds_hrs_w3 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w3$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w3$depression <- labelled(HRS_ds_hrs_w3[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs3, echo=FALSE}
vari <- HRS_ds_hrs_w3$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w3, aes(x=factor(HRS_ds_hrs_w3[[2]]))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs3, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w3[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


```{r importOPAL_hrs3, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w3', HRS_ds_hrs_w3)
#opal.symbol_import(o,'HRS_ds_hrs_w3', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w3$depression) <- ds_label_all
depression <- HRS_ds_hrs_w3
save(depression, file = "../RData/hrs_w3/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w3 <- HRS_ds_hrs_w3
HRS_m_ds_hrs_w3$depression <- car::recode(HRS_m_ds_hrs_w3$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w3', HRS_m_ds_hrs_w3)
#opal.symbol_import(o,'HRS_m_ds_hrs_w3', project='_Athlos_Harm_Dataset')
```








### Wave 4 

#### Study-specific variable description

 

| **Name** | `R4CESD`|
|-|-|
| **Label** | `W4 CESD score`|
| **Table name** | `HRS-HRS-w4` |
| **Description** |  |

```{r assign_hrs4, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w4',
                         variables=list('R4CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs4, echo=FALSE}
vari <- HRS_dep$R4CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs4, echo=TRUE}
HRS_ds_hrs_w4 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w4$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w4$depression <- labelled(HRS_ds_hrs_w4[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs4, echo=FALSE}
vari <- HRS_ds_hrs_w4$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w4, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs4, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w4[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs4, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w4', HRS_ds_hrs_w4_hrs_w4)
#opal.symbol_import(o,'HRS_ds_hrs_w4', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w4$depression) <- ds_label_all
depression <- HRS_ds_hrs_w4
save(depression, file = "../RData/hrs_w4/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w4 <- HRS_ds_hrs_w4
HRS_m_ds_hrs_w4$depression <- car::recode(HRS_m_ds_hrs_w4$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w4', HRS_m_ds_hrs_w4)
#opal.symbol_import(o,'HRS_m_ds_hrs_w4', project='_Athlos_Harm_Dataset')
```





### Wave 5

#### Study-specific variable description

 

| **Name** | `R5CESD`|
|-|-|
| **Label** | `W5 CESD score`|
| **Table name** | `HRS-HRS-w5` |
| **Description** |  |

```{r assign_hrs5, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w5',
                         variables=list('R5CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs5, echo=FALSE}
vari <- HRS_dep$R5CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs5, echo=TRUE}
HRS_ds_hrs_w5 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w5$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w5$depression <- labelled(HRS_ds_hrs_w5[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs5, echo=FALSE}
vari <- HRS_ds_hrs_w5$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w5, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs5, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w5[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs5, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w5', HRS_ds_hrs_w5)
#opal.symbol_import(o,'HRS_ds_hrs_w5', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w5$depression) <- ds_label_all
depression <- HRS_ds_hrs_w5
save(depression, file = "../RData/hrs_w5/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w5 <- HRS_ds_hrs_w5
HRS_m_ds_hrs_w5$depression <- car::recode(HRS_m_ds_hrs_w5$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w5', HRS_m_ds_hrs_w5)
#opal.symbol_import(o,'HRS_m_ds_hrs_w5', project='_Athlos_Harm_Dataset')
```





### Wave 6

#### Study-specific variable description

| **Name** | `R6CESD`|
|-|-|
| **Label** | `W6 CESD score`|
| **Table name** | `HRS-HRS-w6` |
| **Description** |  |

```{r assign_hrs6, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w6',
                         variables=list('R6CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs6, echo=FALSE}
vari <- HRS_dep$R6CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs6, echo=TRUE}
HRS_ds_hrs_w6 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w6$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w6$depression <- labelled(HRS_ds_hrs_w6[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs6, echo=FALSE}
vari <- HRS_ds_hrs_w6$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w6, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs6, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w6[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs6, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w6', HRS_ds_hrs_w6)
#opal.symbol_import(o,'HRS_ds_hrs_w6', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w6$depression) <- ds_label_all
depression <- HRS_ds_hrs_w6
save(depression, file = "../RData/hrs_w6/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w6 <- HRS_ds_hrs_w6
HRS_m_ds_hrs_w6$depression <- car::recode(HRS_m_ds_hrs_w6$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w6', HRS_m_ds_hrs_w6)
#opal.symbol_import(o,'HRS_m_ds_hrs_w6', project='_Athlos_Harm_Dataset')
```






### Wave 7

#### Study-specific variable description

 

| **Name** | `R7CESD`|
|-|-|
| **Label** | `W7 CESD score`|
| **Table name** | `HRS-HRS-w7` |
| **Description** |  |

```{r assign_hrs7, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w7',
                         variables=list('R7CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs7, echo=FALSE}
vari <- HRS_dep$R7CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs7, echo=TRUE}
HRS_ds_hrs_w7 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w7$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w7$depression <- labelled(HRS_ds_hrs_w7[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs7, echo=FALSE}
vari <- HRS_ds_hrs_w7$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w7, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs7, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w7[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs7, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w7', HRS_ds_hrs_w7)
#opal.symbol_import(o,'HRS_ds_hrs_w7', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w7$depression) <- ds_label_all
depression <- HRS_ds_hrs_w7
save(depression, file = "../RData/hrs_w7/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w7 <- HRS_ds_hrs_w7
HRS_m_ds_hrs_w7$depression <- car::recode(HRS_m_ds_hrs_w7$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w7', HRS_m_ds_hrs_w7)
#opal.symbol_import(o,'HRS_m_ds_hrs_w7', project='_Athlos_Harm_Dataset')
```






### Wave 8

#### Study-specific variable description

 

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-HRS-w8` |
| **Description** |  |

```{r assign_hrs8, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w8',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs8, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs8, echo=TRUE}
HRS_ds_hrs_w8 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w8$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w8$depression <- labelled(HRS_ds_hrs_w8[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs8, echo=FALSE}
vari <- HRS_ds_hrs_w8$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w8, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs8, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w8[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs8, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w8', HRS_ds_hrs_w8)
#opal.symbol_import(o,'HRS_ds_hrs_w8', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w8$depression) <- ds_label_all
depression <- HRS_ds_hrs_w8
save(depression, file = "../RData/hrs_w8/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w8 <- HRS_ds_hrs_w8
HRS_m_ds_hrs_w8$depression <- car::recode(HRS_m_ds_hrs_w8$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w8', HRS_m_ds_hrs_w8)
#opal.symbol_import(o,'HRS_m_ds_hrs_w8', project='_Athlos_Harm_Dataset')
```





### Wave 9

#### Study-specific variable description

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-HRS-w8` |
| **Description** |  |

```{r assign_hrs9, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w9',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs9, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs9, echo=TRUE}
HRS_ds_hrs_w9 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w9$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w9$depression <- labelled(HRS_ds_hrs_w9[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs9, echo=FALSE}
vari <- HRS_ds_hrs_w9$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w9, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs9, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w9[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs9, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w9', HRS_ds_hrs_w9)
#opal.symbol_import(o,'HRS_ds_hrs_w9', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w9$depression) <- ds_label_all
depression <- HRS_ds_hrs_w9
save(depression, file = "../RData/hrs_w9/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w9 <- HRS_ds_hrs_w9
HRS_m_ds_hrs_w9$depression <- car::recode(HRS_m_ds_hrs_w9$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w9', HRS_m_ds_hrs_w9)
#opal.symbol_import(o,'HRS_m_ds_hrs_w9', project='_Athlos_Harm_Dataset')
```







### Wave 10

#### Study-specific variable description

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-HRS-w10` |
| **Description** |  |

```{r assign_hrs10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs10, echo=TRUE}
HRS_ds_hrs_w10 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w10$depression <- labelled(HRS_ds_hrs_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs10, echo=FALSE}
vari <- HRS_ds_hrs_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w10', HRS_ds_hrs_w10)
#opal.symbol_import(o,'HRS_ds_hrs_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w10$depression) <- ds_label_all
depression <- HRS_ds_hrs_w10
save(depression, file = "../RData/hrs_w10/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w10 <- HRS_ds_hrs_w10
HRS_m_ds_hrs_w10$depression <- car::recode(HRS_m_ds_hrs_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w10', HRS_m_ds_hrs_w10)
#opal.symbol_import(o,'HRS_m_ds_hrs_w10', project='_Athlos_Harm_Dataset')
```





### Wave 11

#### Study-specific variable description

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-HRS-w11` |
| **Description** |  |

```{r assign_hrs11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-HRS-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_hrs11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_hrs11, echo=TRUE}
HRS_ds_hrs_w11 <- tibble(id=HRS_dep$id)
HRS_ds_hrs_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_hrs_w11$depression <- labelled(HRS_ds_hrs_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_hrs11, echo=FALSE}
vari <- HRS_ds_hrs_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_hrs11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_hrs_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_hrs11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_hrs_w11', HRS_ds_hrs_w11)
#opal.symbol_import(o,'HRS_ds_hrs_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_hrs_w11$depression) <- ds_label_all
depression <- HRS_ds_hrs_w11
save(depression, file = "../RData/hrs_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_hrs_w11 <- HRS_ds_hrs_w11
HRS_m_ds_hrs_w11$depression <- car::recode(HRS_m_ds_hrs_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_hrs_w11', HRS_m_ds_hrs_w11)
#opal.symbol_import(o,'HRS_m_ds_hrs_w11', project='_Athlos_Harm_Dataset')
```



## AHEAD sub-sample

### Wave 2 

#### Study-specific variable description

| **Name** | `R2CESD`|
|-|-|
| **Label** | `W2 CESD score`|
| **Table name** | `HRS-AHEAD-w2` |
| **Description** |  |

```{r assign_ahead2, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w2',
                         variables=list('R2CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead2, echo=FALSE}
vari <- HRS_dep$R2CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead2, echo=TRUE}
HRS_ds_ahead_w2 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w2$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w2$depression <- labelled(HRS_ds_ahead_w2[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead2, echo=FALSE}
vari <- HRS_ds_ahead_w2$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w2, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead2, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w2[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead2, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w2', HRS_ds_ahead_w2)
#opal.symbol_import(o,'HRS_ds_ahead_w2', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w2$depression) <- ds_label_all
depression <- HRS_ds_ahead_w2
save(depression, file = "../RData/ahead_w2/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w2 <- HRS_ds_ahead_w2
HRS_m_ds_ahead_w2$depression <- car::recode(HRS_m_ds_ahead_w2$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w2', HRS_m_ds_ahead_w2)
#opal.symbol_import(o,'HRS_m_ds_ahead_w2', project='_Athlos_Harm_Dataset')
```





### Wave 3 

#### Study-specific variable description

 

| **Name** | `R3CESD`|
|-|-|
| **Label** | `W3 CESD score`|
| **Table name** | `HRS-AHEAD-w3` |
| **Description** |  |

```{r assign_ahead3, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w3',
                         variables=list('R3CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead3, echo=FALSE}
vari <- HRS_dep$R3CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead3, echo=TRUE}
HRS_ds_ahead_w3 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w3$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w3$depression <- labelled(HRS_ds_ahead_w3[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead3, echo=FALSE}
vari <- HRS_ds_ahead_w3$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w3, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead3, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w3[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead3, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w3', HRS_ds_ahead_w3)
#opal.symbol_import(o,'HRS_ds_ahead_w3', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w3$depression) <- ds_label_all
depression <- HRS_ds_ahead_w3
save(depression, file = "../RData/ahead_w3/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w3 <- HRS_ds_ahead_w3
HRS_m_ds_ahead_w3$depression <- car::recode(HRS_m_ds_ahead_w3$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w3', HRS_m_ds_ahead_w3)
#opal.symbol_import(o,'HRS_m_ds_ahead_w3', project='_Athlos_Harm_Dataset')
```





### Wave 4 

#### Study-specific variable description

 
| **Name** | `R4CESD`|
|-|-|
| **Label** | `W4 CESD score`|
| **Table name** | `HRS-AHEAD-w4` |
| **Description** |  |

```{r assign_ahead4, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w4',
                         variables=list('R4CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead4, echo=FALSE}
vari <- HRS_dep$R4CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead4, echo=TRUE}
HRS_ds_ahead_w4 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w4$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w4$depression <- labelled(HRS_ds_ahead_w4[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead4, echo=FALSE}
vari <- HRS_ds_ahead_w4$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w4, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead4, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w4[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
```{r importOPAL_ahead4, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w4', HRS_ds_ahead_w4)
#opal.symbol_import(o,'HRS_ds_ahead_w4', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w4$depression) <- ds_label_all
depression <- HRS_ds_ahead_w4
save(depression, file = "../RData/ahead_w4/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w4 <- HRS_ds_ahead_w4
HRS_m_ds_ahead_w4$depression <- car::recode(HRS_m_ds_ahead_w4$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w4', HRS_m_ds_ahead_w4)
#opal.symbol_import(o,'HRS_m_ds_ahead_w4', project='_Athlos_Harm_Dataset')
```






### Wave 5 

#### Study-specific variable description

 
| **Name** | `R5CESD`|
|-|-|
| **Label** | `W5 CESD score`|
| **Table name** | `HRS-AHEAD-w5` |
| **Description** |  |

```{r assign_ahead5, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w5',
                         variables=list('R5CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead5, echo=FALSE}
vari <- HRS_dep$R5CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead5, echo=TRUE}
HRS_ds_ahead_w5 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w5$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w5$depression <- labelled(HRS_ds_ahead_w5[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead5, echo=FALSE}
vari <- HRS_ds_ahead_w5$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w5, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead5, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w5[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead5, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w5', HRS_ds_ahead_w5)
#opal.symbol_import(o,'HRS_ds_ahead_w5', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w5$depression) <- ds_label_all
depression <- HRS_ds_ahead_w5
save(depression, file = "../RData/ahead_w5/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w5 <- HRS_ds_ahead_w5
HRS_m_ds_ahead_w5$depression <- car::recode(HRS_m_ds_ahead_w5$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w5', HRS_m_ds_ahead_w5)
#opal.symbol_import(o,'HRS_m_ds_ahead_w5', project='_Athlos_Harm_Dataset')
```






### Wave 6 

#### Study-specific variable description

| **Name** | `R6CESD`|
|-|-|
| **Label** | `W6 CESD score`|
| **Table name** | `HRS-AHEAD-w6` |
| **Description** |  |

```{r assign_ahead6, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w6',
                         variables=list('R6CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead6, echo=FALSE}
vari <- HRS_dep$R6CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead6, echo=TRUE}
HRS_ds_ahead_w6 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w6$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w6$depression <- labelled(HRS_ds_ahead_w6[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead6, echo=FALSE}
vari <- HRS_ds_ahead_w6$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w6, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead6, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w6[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


```{r importOPAL_ahead6, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w6', HRS_ds_ahead_w6)
#opal.symbol_import(o,'HRS_ds_ahead_w6', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w6$depression) <- ds_label_all
depression <- HRS_ds_ahead_w6
save(depression, file = "../RData/ahead_w6/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w6 <- HRS_ds_ahead_w6
HRS_m_ds_ahead_w6$depression <- car::recode(HRS_m_ds_ahead_w6$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w6', HRS_m_ds_ahead_w6)
#opal.symbol_import(o,'HRS_m_ds_ahead_w6', project='_Athlos_Harm_Dataset')
```




### Wave 7 

#### Study-specific variable description

| **Name** | `R7CESD`|
|-|-|
| **Label** | `W7 CESD score`|
| **Table name** | `HRS-AHEAD-w7` |
| **Description** |  |

```{r assign_ahead7, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w7',
                         variables=list('R7CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead7, echo=FALSE}
vari <- HRS_dep$R7CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead7, echo=TRUE}
HRS_ds_ahead_w7 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w7$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w7$depression <- labelled(HRS_ds_ahead_w7[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead7, echo=FALSE}
vari <- HRS_ds_ahead_w7$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w7, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead7, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w7[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead7, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w7', HRS_ds_ahead_w7)
#opal.symbol_import(o,'HRS_ds_ahead_w7', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w7$depression) <- ds_label_all
depression <- HRS_ds_ahead_w7
save(depression, file = "../RData/ahead_w7/depression.RData")
rm(depression)

HRS_m_ds_ahead_w7 <- HRS_ds_ahead_w7
HRS_m_ds_ahead_w7$depression <- car::recode(HRS_m_ds_ahead_w7$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w7', HRS_m_ds_ahead_w7)
#opal.symbol_import(o,'HRS_m_ds_ahead_w7', project='_Athlos_Harm_Dataset')
```







### Wave 8 

#### Study-specific variable description

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-AHEAD-w8` |
| **Description** |  |

```{r assign_ahead8, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w8',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead8, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead8, echo=TRUE}
HRS_ds_ahead_w8 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w8$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w8$depression <- labelled(HRS_ds_ahead_w8[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead8, echo=FALSE}
vari <- HRS_ds_ahead_w8$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w8, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead8, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w8[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
```{r importOPAL_ahead8, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w8', HRS_ds_ahead_w8)
#opal.symbol_import(o,'HRS_ds_ahead_w8', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w8$depression) <- ds_label_all
depression <- HRS_ds_ahead_w8
save(depression, file = "../RData/ahead_w8/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w8 <- HRS_ds_ahead_w8
HRS_m_ds_ahead_w8$depression <- car::recode(HRS_m_ds_ahead_w8$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w8', HRS_m_ds_ahead_w8)
#opal.symbol_import(o,'HRS_m_ds_ahead_w8', project='_Athlos_Harm_Dataset')
```






### Wave 9 

#### Study-specific variable description

| **Name** | `R9CESD`|
|-|-|
| **Label** | `W9 CESD score`|
| **Table name** | `HRS-AHEAD-w9` |
| **Description** |  |

```{r assign_ahead9, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w9',
                         variables=list('R9CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead9, echo=FALSE}
vari <- HRS_dep$R9CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead9, echo=TRUE}
HRS_ds_ahead_w9 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w9$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w9$depression <- labelled(HRS_ds_ahead_w9[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead9, echo=FALSE}
vari <- HRS_ds_ahead_w9$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w9, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead9, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w9[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead9, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w9', HRS_ds_ahead_w9)
#opal.symbol_import(o,'HRS_ds_ahead_w9', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w9$depression) <- ds_label_all
depression <- HRS_ds_ahead_w9
save(depression, file = "../RData/ahead_w9/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w9 <- HRS_ds_ahead_w9
HRS_m_ds_ahead_w9$depression <- car::recode(HRS_m_ds_ahead_w9$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w9', HRS_m_ds_ahead_w9)
#opal.symbol_import(o,'HRS_m_ds_ahead_w9', project='_Athlos_Harm_Dataset')
```




### Wave 10 

#### Study-specific variable description

 

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-AHEAD-w10` |
| **Description** |  |

```{r assign_ahead10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead10, echo=TRUE}
HRS_ds_ahead_w10 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w10$depression <- labelled(HRS_ds_ahead_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead10, echo=FALSE}
vari <- HRS_ds_ahead_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w10', HRS_ds_ahead_w10)
#opal.symbol_import(o,'HRS_ds_ahead_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w10$depression) <- ds_label_all
depression <- HRS_ds_ahead_w10
save(depression, file = "../RData/ahead_w10/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w10 <- HRS_ds_ahead_w10
HRS_m_ds_ahead_w10$depression <- car::recode(HRS_m_ds_ahead_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w10', HRS_m_ds_ahead_w10)
#opal.symbol_import(o,'HRS_m_ds_ahead_w10', project='_Athlos_Harm_Dataset')
```





### Wave 11 

#### Study-specific variable description

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-AHEAD-w11` |
| **Description** |  |

```{r assign_ahead11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-AHEAD-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ahead11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ahead11, echo=TRUE}
HRS_ds_ahead_w11 <- tibble(id=HRS_dep$id)
HRS_ds_ahead_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ahead_w11$depression <- labelled(HRS_ds_ahead_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ahead11, echo=FALSE}
vari <- HRS_ds_ahead_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ahead11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ahead_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ahead11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ahead_w11', HRS_ds_ahead_w11)
#opal.symbol_import(o,'HRS_ds_ahead_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_ahead_w11$depression) <- ds_label_all
depression <- HRS_ds_ahead_w11
save(depression, file = "../RData/ahead_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ahead_w11 <- HRS_ds_ahead_w11
HRS_m_ds_ahead_w11$depression <- car::recode(HRS_m_ds_ahead_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ahead_w11', HRS_m_ds_ahead_w11)
#opal.symbol_import(o,'HRS_m_ds_ahead_w11', project='_Athlos_Harm_Dataset')
```




### The Children of the Depression (CODA) sub-sample

### Wave 4 

#### Study-specific variable description

| **Name** | `R4CESD`|
|-|-|
| **Label** | `W4 CESD score`|
| **Table name** | `HRS-CODA-w4` |
| **Description** |  |

```{r assign_coda4, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w4',
                         variables=list('R4CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda4, echo=FALSE}
vari <- HRS_dep$R4CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`


**R script:**

```{r harmo_coda4, echo=TRUE}
HRS_ds_coda_w4 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w4$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w4$depression <- labelled(HRS_ds_coda_w4[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda4, echo=FALSE}
vari <- HRS_ds_coda_w4$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w4, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda4, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w4[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


```{r importOPAL_coda4, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w4', HRS_ds_coda_w4)
#opal.symbol_import(o,'HRS_ds_coda_w4', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w4$depression) <- ds_label_all
depression <- HRS_ds_coda_w4
save(depression, file = "../RData/coda_w4/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w4 <- HRS_ds_coda_w4
HRS_m_ds_coda_w4$depression <- car::recode(HRS_m_ds_coda_w4$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w4', HRS_m_ds_coda_w4)
#opal.symbol_import(o,'HRS_m_ds_coda_w4', project='_Athlos_Harm_Dataset')
```







### Wave 5 

#### Study-specific variable description

| **Name** | `R5CESD`|
|-|-|
| **Label** | `W5 CESD score`|
| **Table name** | `HRS-CODA-w5` |
| **Description** |  |

```{r assign_coda5, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w5',
                         variables=list('R5CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda5, echo=FALSE}
vari <- HRS_dep$R5CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda5, echo=TRUE}
HRS_ds_coda_w5 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w5$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w5$depression <- labelled(HRS_ds_coda_w5[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda5, echo=FALSE}
vari <- HRS_ds_coda_w5$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w5, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda5, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w5[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


```{r importOPAL_coda5, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w5', HRS_ds_coda_w5)
#opal.symbol_import(o,'HRS_ds_coda_w5', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w5$depression) <- ds_label_all
depression <- HRS_ds_coda_w5
save(depression, file = "../RData/coda_w5/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w5 <- HRS_ds_coda_w5
HRS_m_ds_coda_w5$depression <- car::recode(HRS_m_ds_coda_w5$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w5', HRS_m_ds_coda_w5)
#opal.symbol_import(o,'HRS_m_ds_coda_w5', project='_Athlos_Harm_Dataset')
```





### Wave 6 

#### Study-specific variable description

| **Name** | `R6CESD`|
|-|-|
| **Label** | `W6 CESD score`|
| **Table name** | `HRS-CODA-w6` |
| **Description** |  |

```{r assign_coda6, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w6',
                         variables=list('R6CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda6, echo=FALSE}
vari <- HRS_dep$R6CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda6, echo=TRUE}
HRS_ds_coda_w6 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w6$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w6$depression <- labelled(HRS_ds_coda_w6[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda6, echo=FALSE}
vari <- HRS_ds_coda_w6$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w6, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda6, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w6[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


```{r importOPAL_coda6, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w6', HRS_ds_coda_w6)
#opal.symbol_import(o,'HRS_ds_coda_w6', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w6$depression) <- ds_label_all
depression <- HRS_ds_coda_w6
save(depression, file = "../RData/coda_w6/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w6 <- HRS_ds_coda_w6
HRS_m_ds_coda_w6$depression <- car::recode(HRS_m_ds_coda_w6$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w6', HRS_m_ds_coda_w6)
#opal.symbol_import(o,'HRS_m_ds_coda_w6', project='_Athlos_Harm_Dataset')
```






### Wave 7 

#### Study-specific variable description

| **Name** | `R7CESD`|
|-|-|
| **Label** | `W7 CESD score`|
| **Table name** | `HRS-CODA-w7` |
| **Description** |  |

```{r assign_coda7, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w7',
                         variables=list('R7CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda7, echo=FALSE}
vari <- HRS_dep$R7CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda7, echo=TRUE}
HRS_ds_coda_w7 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w7$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w7$depression <- labelled(HRS_ds_coda_w7[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda7, echo=FALSE}
vari <- HRS_ds_coda_w7$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w7, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda7, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w7[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_coda7, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w7', HRS_ds_coda_w7)
#opal.symbol_import(o,'HRS_ds_coda_w7', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w7$depression) <- ds_label_all
depression <- HRS_ds_coda_w7
save(depression, file = "../RData/coda_w7/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w7 <- HRS_ds_coda_w7
HRS_m_ds_coda_w7$depression <- car::recode(HRS_m_ds_coda_w7$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w7', HRS_m_ds_coda_w7)
#opal.symbol_import(o,'HRS_m_ds_coda_w7', project='_Athlos_Harm_Dataset')
```





### Wave 8 

#### Study-specific variable description

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-CODA-w8` |
| **Description** |  |

```{r assign_coda8, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w8',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda8, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda8, echo=TRUE}
HRS_ds_coda_w8 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w8$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w8$depression <- labelled(HRS_ds_coda_w8[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda8, echo=FALSE}
vari <- HRS_ds_coda_w8$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w8, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda8, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w8[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_coda8, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w8', HRS_ds_coda_w8)
#opal.symbol_import(o,'HRS_ds_coda_w8', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w8$depression) <- ds_label_all
depression <- HRS_ds_coda_w8
save(depression, file = "../RData/coda_w8/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w8 <- HRS_ds_coda_w8
HRS_m_ds_coda_w8$depression <- car::recode(HRS_m_ds_coda_w8$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w8', HRS_m_ds_coda_w8)
#opal.symbol_import(o,'HRS_m_ds_coda_w8', project='_Athlos_Harm_Dataset')
```




### Wave 9 

#### Study-specific variable description

| **Name** | `R9CESD`|
|-|-|
| **Label** | `W9 CESD score`|
| **Table name** | `HRS-CODA-w9` |
| **Description** |  |

```{r assign_coda9, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w9',
                         variables=list('R9CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda9, echo=FALSE}
vari <- HRS_dep$R9CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda9, echo=TRUE}
HRS_ds_coda_w9 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w9$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w9$depression <- labelled(HRS_ds_coda_w9[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda9, echo=FALSE}
vari <- HRS_ds_coda_w9$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w9, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda9, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w9[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_coda9, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w9', HRS_ds_coda_w9)
#opal.symbol_import(o,'HRS_ds_coda_w9', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w9$depression) <- ds_label_all
depression <- HRS_ds_coda_w9
save(depression, file = "../RData/coda_w9/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w9 <- HRS_ds_coda_w9
HRS_m_ds_coda_w9$depression <- car::recode(HRS_m_ds_coda_w9$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w9', HRS_m_ds_coda_w9)
#opal.symbol_import(o,'HRS_m_ds_coda_w9', project='_Athlos_Harm_Dataset')
```






### Wave 10 

#### Study-specific variable description

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-CODA-w10` |
| **Description** |  |

```{r assign_coda10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda10, echo=TRUE}
HRS_ds_coda_w10 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w10$depression <- labelled(HRS_ds_coda_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda10, echo=FALSE}
vari <- HRS_ds_coda_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
```{r importOPAL_coda10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w10', HRS_ds_coda_w10)
#opal.symbol_import(o,'HRS_ds_coda_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w10$depression) <- ds_label_all
depression <- HRS_ds_coda_w10
save(depression, file = "../RData/coda_w10/depression.RData")
rm(depression)

HRS_m_ds_coda_w10 <- HRS_ds_coda_w10
HRS_m_ds_coda_w10$depression <- car::recode(HRS_m_ds_coda_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w10', HRS_m_ds_coda_w10)
#opal.symbol_import(o,'HRS_m_ds_coda_w10', project='_Athlos_Harm_Dataset')
```






### Wave 11 

#### Study-specific variable description

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-CODA-w11` |
| **Description** |  |

```{r assign_coda11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-CODA-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_coda11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_coda11, echo=TRUE}
HRS_ds_coda_w11 <- tibble(id=HRS_dep$id)
HRS_ds_coda_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_coda_w11$depression <- labelled(HRS_ds_coda_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_coda11, echo=FALSE}
vari <- HRS_ds_coda_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_coda11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_coda_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_coda11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_coda_w11', HRS_ds_coda_w11)
#opal.symbol_import(o,'HRS_ds_coda_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_coda_w11$depression) <- ds_label_all
depression <- HRS_ds_coda_w11
save(depression, file = "../RData/coda_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_coda_w11 <- HRS_ds_coda_w11
HRS_m_ds_coda_w11$depression <- car::recode(HRS_m_ds_coda_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_coda_w11', HRS_m_ds_coda_w11)
#opal.symbol_import(o,'HRS_m_ds_coda_w11', project='_Athlos_Harm_Dataset')
```






## The War Baby (WB) sub-sample 

### Wave 4  

#### Study-specific variable description

| **Name** | `R4CESD`|
|-|-|
| **Label** | `W4 CESD score`|
| **Table name** | `HRS-WB-w4` |
| **Description** |  |

```{r assign_wb4, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w4',
                         variables=list('R4CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb4, echo=FALSE}
vari <- HRS_dep$R4CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`


**R script:**

```{r harmo_wb4, echo=TRUE}
HRS_ds_wb_w4 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w4$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w4$depression <- labelled(HRS_ds_wb_w4[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb4, echo=FALSE}
vari <- HRS_ds_wb_w4$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w4, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb4, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w4[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
```{r importOPAL_wb4, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w4', HRS_ds_wb_w4)
#opal.symbol_import(o,'HRS_ds_wb_w4', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w4$depression) <- ds_label_all
depression <- HRS_ds_wb_w4
save(depression, file = "../RData/wb_w4/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w4 <- HRS_ds_wb_w4
HRS_m_ds_wb_w4$depression <- car::recode(HRS_m_ds_wb_w4$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w4', HRS_m_ds_wb_w4)
#opal.symbol_import(o,'HRS_m_ds_wb_w4', project='_Athlos_Harm_Dataset')
```






### Wave 5  

#### Study-specific variable description

 

| **Name** | `R5CESD`|
|-|-|
| **Label** | `W5 CESD score`|
| **Table name** | `HRS-WB-w5` |
| **Description** |  |

```{r assign_wb5, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w5',
                         variables=list('R5CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb5, echo=FALSE}
vari <- HRS_dep$R5CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb5, echo=TRUE}
HRS_ds_wb_w5 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w5$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w5$depression <- labelled(HRS_ds_wb_w5[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb5, echo=FALSE}
vari <- HRS_ds_wb_w5$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w5, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb5, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w5[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


 
```{r importOPAL_wb5, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w5', HRS_ds_wb_w5)
#opal.symbol_import(o,'HRS_ds_wb_w5', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w5$depression) <- ds_label_all
depression <- HRS_ds_wb_w5
save(depression, file = "../RData/wb_w5/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w5 <- HRS_ds_wb_w5
HRS_m_ds_wb_w5$depression <- car::recode(HRS_m_ds_wb_w5$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w5', HRS_m_ds_wb_w5)
#opal.symbol_import(o,'HRS_m_ds_wb_w5', project='_Athlos_Harm_Dataset')
```





### Wave 6  

#### Study-specific variable description

| **Name** | `R6CESD`|
|-|-|
| **Label** | `W6 CESD score`|
| **Table name** | `HRS-WB-w6` |
| **Description** |  |

```{r assign_wb6, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w6',
                         variables=list('R6CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb6, echo=FALSE}
vari <- HRS_dep$R6CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb6, echo=TRUE}
HRS_ds_wb_w6 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w6$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w6$depression <- labelled(HRS_ds_wb_w6[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb6, echo=FALSE}
vari <- HRS_ds_wb_w6$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w6, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb6, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w6[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_wb6, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w6', HRS_ds_wb_w6)
#opal.symbol_import(o,'HRS_ds_wb_w6', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w6$depression) <- ds_label_all
depression <- HRS_ds_wb_w6
save(depression, file = "../RData/wb_w6/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w6 <- HRS_ds_wb_w6
HRS_m_ds_wb_w6$depression <- car::recode(HRS_m_ds_wb_w6$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w6', HRS_m_ds_wb_w6)
#opal.symbol_import(o,'HRS_m_ds_wb_w6', project='_Athlos_Harm_Dataset')
```







### Wave 7  

#### Study-specific variable description

| **Name** | `R7CESD`|
|-|-|
| **Label** | `W7 CESD score`|
| **Table name** | `HRS-WB-w7` |
| **Description** |  |

```{r assign_wb7, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w7',
                         variables=list('R7CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb7, echo=FALSE}
vari <- HRS_dep$R7CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb7, echo=TRUE}
HRS_ds_wb_w7 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w7$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w7$depression <- labelled(HRS_ds_wb_w7[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb7, echo=FALSE}
vari <- HRS_ds_wb_w7$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w7, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb7, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w7[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```


 
```{r importOPAL_wb7, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w7', HRS_ds_wb_w7)
#opal.symbol_import(o,'HRS_ds_wb_w7', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w7$depression) <- ds_label_all
depression <- HRS_ds_wb_w7
save(depression, file = "../RData/wb_w7/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w7 <- HRS_ds_wb_w7
HRS_m_ds_wb_w7$depression <- car::recode(HRS_m_ds_wb_w7$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w7', HRS_m_ds_wb_w7)
#opal.symbol_import(o,'HRS_m_ds_wb_w7', project='_Athlos_Harm_Dataset')
```






### Wave 8  

#### Study-specific variable description

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-WB-w8` |
| **Description** |  |


```{r assign_wb8, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w8',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb8, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb8, echo=TRUE}
HRS_ds_wb_w8 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w8$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w8$depression <- labelled(HRS_ds_wb_w8[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb8, echo=FALSE}
vari <- HRS_ds_wb_w8$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w8, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb8, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w8[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_wb8, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w8', HRS_ds_wb_w8)
#opal.symbol_import(o,'HRS_ds_wb_w8', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w8$depression) <- ds_label_all
depression <- HRS_ds_wb_w8
save(depression, file = "../RData/wb_w8/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w8 <- HRS_ds_wb_w8
HRS_m_ds_wb_w8$depression <- car::recode(HRS_m_ds_wb_w8$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w8', HRS_m_ds_wb_w8)
#opal.symbol_import(o,'HRS_m_ds_wb_w8', project='_Athlos_Harm_Dataset')
```





### Wave 9  

#### Study-specific variable description

| **Name** | `R9CESD`|
|-|-|
| **Label** | `W9 CESD score`|
| **Table name** | `HRS-WB-w9` |
| **Description** |  |

```{r assign_wb9, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w9',
                         variables=list('R9CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb9, echo=FALSE}
vari <- HRS_dep$R9CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb9, echo=TRUE}
HRS_ds_wb_w9 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w9$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w9$depression <- labelled(HRS_ds_wb_w9[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb9, echo=FALSE}
vari <- HRS_ds_wb_w9$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w9, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb9, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w9[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_wb9, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w9', HRS_ds_wb_w9)
#opal.symbol_import(o,'HRS_ds_wb_w9', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w9$depression) <- ds_label_all
depression <- HRS_ds_wb_w9
save(depression, file = "../RData/wb_w9/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w9 <- HRS_ds_wb_w9
HRS_m_ds_wb_w9$depression <- car::recode(HRS_m_ds_wb_w9$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w9', HRS_m_ds_wb_w9)
#opal.symbol_import(o,'HRS_m_ds_wb_w9', project='_Athlos_Harm_Dataset')
```






### Wave 10  

#### Study-specific variable description

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-WB-w10` |
| **Description** |  |

```{r assign_wb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb10, echo=TRUE}
HRS_ds_wb_w10 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w10$depression <- labelled(HRS_ds_wb_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb10, echo=FALSE}
vari <- HRS_ds_wb_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_wb10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w10', HRS_ds_wb_w10)
#opal.symbol_import(o,'HRS_ds_wb_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w10$depression) <- ds_label_all
depression <- HRS_ds_wb_w10
save(depression, file = "../RData/wb_w10/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w10 <- HRS_ds_wb_w10
HRS_m_ds_wb_w10$depression <- car::recode(HRS_m_ds_wb_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w10', HRS_m_ds_wb_w10)
#opal.symbol_import(o,'HRS_m_ds_wb_w10', project='_Athlos_Harm_Dataset')
```





### Wave 11  

#### Study-specific variable description

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-WB-w11` |
| **Description** |  |

```{r assign_wb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-WB-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_wb11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_wb11, echo=TRUE}
HRS_ds_wb_w11 <- tibble(id=HRS_dep$id)
HRS_ds_wb_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_wb_w11$depression <- labelled(HRS_ds_wb_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_wb11, echo=FALSE}
vari <- HRS_ds_wb_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_wb11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_wb_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_wb11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_wb_w11', HRS_ds_wb_w11)
#opal.symbol_import(o,'HRS_ds_wb_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_wb_w11$depression) <- ds_label_all
depression <- HRS_ds_wb_w11
save(depression, file = "../RData/wb_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_wb_w11 <- HRS_ds_wb_w11
HRS_m_ds_wb_w11$depression <- car::recode(HRS_m_ds_wb_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_wb_w11', HRS_m_ds_wb_w11)
#opal.symbol_import(o,'HRS_m_ds_wb_w11', project='_Athlos_Harm_Dataset')
```





## The Early Baby Boomer (EBB) sub-sample

### Wave 7  

#### Study-specific variable description

| **Name** | `R7CESD`|
|-|-|
| **Label** | `W7 CESD score`|
| **Table name** | `HRS-EBB-w7` |
| **Description** |  |

```{r assign_ebb7, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-EBB-w7',
                         variables=list('R7CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ebb7, echo=FALSE}
vari <- HRS_dep$R7CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ebb7, echo=TRUE}
HRS_ds_ebb_w7 <- tibble(id=HRS_dep$id)
HRS_ds_ebb_w7$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ebb_w7$depression <- labelled(HRS_ds_ebb_w7[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ebb7, echo=FALSE}
vari <- HRS_ds_ebb_w7$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w7, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ebb7, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ebb_w7[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ebb7, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ebb_w7', HRS_ds_ebb_w7)
#opal.symbol_import(o,'HRS_ds_ebb_w7', project='_Athlos_Harm_Dataset')
label(HRS_ds_ebb_w7$depression) <- ds_label_all
depression <- HRS_ds_ebb_w7
save(depression, file = "../RData/ebb_w7/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ebb_w7 <- HRS_ds_ebb_w7
HRS_m_ds_ebb_w7$depression <- car::recode(HRS_m_ds_ebb_w7$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ebb_w7', HRS_m_ds_ebb_w7)
#opal.symbol_import(o,'HRS_m_ds_ebb_w7', project='_Athlos_Harm_Dataset')
```





### Wave 8  

#### Study-specific variable description

| **Name** | `R8CESD`|
|-|-|
| **Label** | `W8 CESD score`|
| **Table name** | `HRS-EBB-w8` |
| **Description** |  |

```{r assign_ebb8, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-EBB-w8',
                         variables=list('R8CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ebb8, echo=FALSE}
vari <- HRS_dep$R8CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ebb8, echo=TRUE}
HRS_ds_ebb_w8 <- tibble(id=HRS_dep$id)
HRS_ds_ebb_w8$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ebb_w8$depression <- labelled(HRS_ds_ebb_w8[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ebb8, echo=FALSE}
vari <- HRS_ds_ebb_w8$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w8, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ebb8, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ebb_w8[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ebb8, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ebb_w8', HRS_ds_ebb_w8)
#opal.symbol_import(o,'HRS_ds_ebb_w8', project='_Athlos_Harm_Dataset')
label(HRS_ds_ebb_w8$depression) <- ds_label_all
depression <- HRS_ds_ebb_w8
save(depression, file = "../RData/ebb_w8/depression.RData")
rm(depression)

HRS_m_ds_ebb_w8 <- HRS_ds_ebb_w8
HRS_m_ds_ebb_w8$depression <- car::recode(HRS_m_ds_ebb_w8$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ebb_w8', HRS_m_ds_ebb_w8)
#opal.symbol_import(o,'HRS_m_ds_ebb_w8', project='_Athlos_Harm_Dataset')
```





### Wave 9  

#### Study-specific variable description

 

| **Name** | `R9CESD`|
|-|-|
| **Label** | `W9 CESD score`|
| **Table name** | `HRS-EBB-w9` |
| **Description** |  |

```{r assign_ebb9, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-EBB-w9',
                         variables=list('R9CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ebb9, echo=FALSE}
vari <- HRS_dep$R9CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ebb9, echo=TRUE}
HRS_ds_ebb_w9 <- tibble(id=HRS_dep$id)
HRS_ds_ebb_w9$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ebb_w9$depression <- labelled(HRS_ds_ebb_w9[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ebb9, echo=FALSE}
vari <- HRS_ds_ebb_w9$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w9, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ebb9, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ebb_w9[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

```{r importOPAL_ebb9, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ebb_w9', HRS_ds_ebb_w9)
#opal.symbol_import(o,'HRS_ds_ebb_w9', project='_Athlos_Harm_Dataset')
label(HRS_ds_ebb_w9$depression) <- ds_label_all
depression <- HRS_ds_ebb_w9
save(depression, file = "../RData/ebb_w9/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ebb_w9 <- HRS_ds_ebb_w9
HRS_m_ds_ebb_w9$depression <- car::recode(HRS_m_ds_ebb_w9$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ebb_w9', HRS_m_ds_ebb_w9)
#opal.symbol_import(o,'HRS_m_ds_ebb_w9', project='_Athlos_Harm_Dataset')
```




### Wave 10  

#### Study-specific variable description

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-EBB-w10` |
| **Description** |  |

```{r assign_ebb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-EBB-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ebb10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ebb10, echo=TRUE}
HRS_ds_ebb_w10 <- tibble(id=HRS_dep$id)
HRS_ds_ebb_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ebb_w10$depression <- labelled(HRS_ds_ebb_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ebb10, echo=FALSE}
vari <- HRS_ds_ebb_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ebb10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ebb_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ebb10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ebb_w10', HRS_ds_ebb_w10)
#opal.symbol_import(o,'HRS_ds_ebb_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_ebb_w10$depression) <- ds_label_all
depression <- HRS_ds_ebb_w10
save(depression, file = "../RData/ebb_w10/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ebb_w10 <- HRS_ds_ebb_w10
HRS_m_ds_ebb_w10$depression <- car::recode(HRS_m_ds_ebb_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_ebb_w10', HRS_m_ds_ebb_w10)
#opal.symbol_import(o,'HRS_m_ds_ebb_w10', project='_Athlos_Harm_Dataset')
```




### Wave 11  

#### Study-specific variable description

 

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-EBB-w11` |
| **Description** |  |

```{r assign_ebb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-EBB-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_ebb11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_ebb11, echo=TRUE}
HRS_ds_ebb_w11 <- tibble(id=HRS_dep$id)
HRS_ds_ebb_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_ebb_w11$depression <- labelled(HRS_ds_ebb_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_ebb11, echo=FALSE}
vari <- HRS_ds_ebb_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_ebb11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_ebb_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_ebb11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_ebb_w11', HRS_ds_ebb_w11)
#opal.symbol_import(o,'HRS_ds_ebb_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_ebb_w11$depression) <- ds_label_all
depression <- HRS_ds_ebb_w11
save(depression, file = "../RData/ebb_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_ebb_w11 <- HRS_ds_ebb_w11
HRS_m_ds_ebb_w11$depression <- car::recode(HRS_m_ds_ebb_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
opal.assign.data(o, 'HRS_m_ds_ebb_w11', HRS_m_ds_ebb_w11)
#opal.symbol_import(o,'HRS_m_ds_ebb_w11', project='_Athlos_Harm_Dataset')
```




## The Mid Baby Boomer (MBB) sub-sample

### Wave 10  

#### Study-specific variable description

 

| **Name** | `R10CESD`|
|-|-|
| **Label** | `W10 CESD score`|
| **Table name** | `HRS-MBB-w10` |
| **Description** |  |

```{r assign_mbb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-MBB-w10',
                         variables=list('R10CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_mbb10, echo=FALSE}
vari <- HRS_dep$R10CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`


**R script:**

```{r harmo_mbb10, echo=TRUE}
HRS_ds_mbb_w10 <- tibble(id=HRS_dep$id)
HRS_ds_mbb_w10$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_mbb_w10$depression <- labelled(HRS_ds_mbb_w10[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_mbb10, echo=FALSE}
vari <- HRS_ds_mbb_w10$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w10, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_mbb10, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_mbb_w10[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_mbb10, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_mbb_w10', HRS_ds_mbb_w10)
#opal.symbol_import(o,'HRS_ds_mbb_w10', project='_Athlos_Harm_Dataset')
label(HRS_ds_mbb_w10$depression) <- ds_label_all
depression <- HRS_ds_mbb_w10
save(depression, file = "../RData/mbb_w10/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_mbb_w10 <- HRS_ds_mbb_w10
HRS_m_ds_mbb_w10$depression <- car::recode(HRS_m_ds_mbb_w10$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_mbb_w10', HRS_m_ds_mbb_w10)
#opal.symbol_import(o,'HRS_m_ds_mbb_w10', project='_Athlos_Harm_Dataset')
```




### Wave 11  

#### Study-specific variable description

| **Name** | `R11CESD`|
|-|-|
| **Label** | `W11 CESD score`|
| **Table name** | `HRS-MBB-w11` |
| **Description** |  |

```{r assign_mbb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dep','HRS.HRS-MBB-w11',
                         variables=list('R11CESD'), missings = TRUE)
HRS_dep <- opal.execute(o,'HRS_dep')
```

```{r local_mbb11, echo=FALSE}
vari <- HRS_dep$R11CESD
kable(Continuous_summary(vari, missing_values = NA)[3], caption = ds_label) 
pander(Continuous_summary(vari, missing_values = NA)$summary, caption = "Summary")
ggplot(HRS_dep, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency") 
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `< 4 into 0` 
* `>= 4 into 1`
* `NA into 999`

**R script:**

```{r harmo_mbb11, echo=TRUE}
HRS_ds_mbb_w11 <- tibble(id=HRS_dep$id)
HRS_ds_mbb_w11$depression <- car::recode(HRS_dep[[2]], "0:3=0; 4:8=1; NA=999")
HRS_ds_mbb_w11$depression <- labelled(HRS_ds_mbb_w11[[2]], labels = c("no depression"=0, "depression"=1,  "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Does not answer"=995,  "Not attempt not done"=994, "Disable to measure"=993, "Impute"=992, "CAPI interviewer error"=991))
```


#### Statistical description of the new harmonised variable
```{r descript_mbb11, echo=FALSE}
vari <- HRS_ds_mbb_w11$depression
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = ds_label) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w11, aes(x=factor(depression))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label) + ylab("Frequency")
```

#### Validation
```{r crosstabulation_mbb11, echo=FALSE}
BeforeH <- c(sum(na.omit(HRS_dep[[2]])<4),sum(na.omit(HRS_dep[[2]])>=4), sum(is.na(HRS_dep[[2]])))
AfterH <- table(HRS_ds_mbb_w11[[2]], useNA = "ifany")
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("<4->0",">=4->1","NA->999") 
kable(C)
```

 
 

 
```{r importOPAL_mbb11, echo=FALSE}
#opal.assign.data(o, 'HRS_ds_mbb_w11', HRS_ds_mbb_w11)
#opal.symbol_import(o,'HRS_ds_mbb_w11', project='_Athlos_Harm_Dataset')
label(HRS_ds_mbb_w11$depression) <- ds_label_all
depression <- HRS_ds_mbb_w11
save(depression, file = "../RData/mbb_w11/depression.RData")
rm(depression, HRS_dep)

HRS_m_ds_mbb_w11 <- HRS_ds_mbb_w11
HRS_m_ds_mbb_w11$depression <- car::recode(HRS_m_ds_mbb_w11$depression, "c(991, 992, 993, 994, 995, 996, 997,998, 999)=NA")
#opal.assign.data(o, 'HRS_m_ds_mbb_w11', HRS_m_ds_mbb_w11)
#opal.symbol_import(o,'HRS_m_ds_mbb_w11', project='_Athlos_Harm_Dataset')
```




# Quality estimation

In the first wave they administered the ces-d 20, but in the other waves they decided to use a 8-item version test with dicotomous variable (yes/no). This fact change the cut-off and they found another equivalent =4. 

In the HRS-subsample w1 we don't have the harmonized variable because > In HRS Wave 1, however, the CES-D items were mistakenly asked of proxy respondents.
Since this was not intentional, we can not document whether the proxies reported on their own
state of mind or gave their opinion of the designated respondent's state of mind. We suggest that the researcher use the variable AAPROXY@ (from the tracker file, which is available on the HRS web site: http:\\www.umich.edu\~hrswww) to remove proxy respondents from any analysis of the CES-D in Wave 1 of the HRS. Proxy respondents were not asked the depression questions in any other wave of HRS or AHEAD.

We had the final score variable. 


```{r closeRsession, echo=FALSE} 
opal.logout(o)
```