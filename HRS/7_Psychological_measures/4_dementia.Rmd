---
title: "Dementia case"
output: 
  html_document:
    theme: united
    highlight: tango
    toc: true
    toc_depth: 6
    toc_float:
      collapsed: true
      smooth_scroll: true
    number_sections: true
---

<!-- ########################################################## --> 

<!-- # Installation, loading packages -->
<!-- **R script:** -->



```{r setup, include=FALSE, echo=FALSE}
source("M:/WPs/WP1/Maelstrom/data_process/athlos-project.github.io/setup_laia.r")
```

<!-- ########################################################## --> 

```{r main, child='../../_DS_Rmd/dementiaDS.Rmd'}
```

```{r global, echo=F}
source('../../_DS_Rmd/dementiaDS.R')
```


# Data process

## HRS sub-sample

### Wave 1 

There is no variable.



### Wave 2 

#### Study-specific variable description


There is no variable.




### Wave 3 

#### Study-specific variable description

 

There is no variable.







### Wave 4 

#### Study-specific variable description

 

There is no variable.



### Wave 5

#### Study-specific variable description

 

There is no variable.



### Wave 6

#### Study-specific variable description

There is no variable.





### Wave 7

#### Study-specific variable description

 

There is no variable.




### Wave 8

#### Study-specific variable description

 

There is no variable.



### Wave 9

#### Study-specific variable description

There is no variable.





### Wave 10

#### Study-specific variable description

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-HRS-w10` | `HRS-HRS-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |

```{r assign_hrs10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-HRS-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_hrs10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_hrs10, echo=TRUE}
HRS_ds_hrs_w10 <- tibble(id=HRS_dem$id)
HRS_ds_hrs_w10$dementia <- NA
HRS_ds_hrs_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_hrs_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_hrs_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_hrs_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_hrs_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_hrs_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_hrs10, echo=FALSE}
vari <- HRS_ds_hrs_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation



### Wave 11

#### Study-specific variable description

| **Name** | `R11DEMEN`| `R11ALZHE` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-HRS-w11` | `HRS-HRS-w11` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_hrs11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-HRS-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_hrs11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_hrs11, echo=TRUE}
HRS_ds_hrs_w11 <- tibble(id=HRS_dem$id)
HRS_ds_hrs_w11$dementia <- NA
HRS_ds_hrs_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_hrs_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_hrs_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_hrs_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_hrs_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_hrs_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_hrs11, echo=FALSE}
vari <- HRS_ds_hrs_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation




## AHEAD sub-sample

### Wave 2 

#### Study-specific variable description

There is no variable.



### Wave 3 

#### Study-specific variable description

 

There is no variable.



### Wave 4 

#### Study-specific variable description

 
There is no variable.



### Wave 5 

#### Study-specific variable description

 
There is no variable.




### Wave 6 

#### Study-specific variable description

There is no variable.



### Wave 7 

#### Study-specific variable description

There is no variable.






### Wave 8 

#### Study-specific variable description

There is no variable.





### Wave 9 

#### Study-specific variable description

There is no variable.



### Wave 10 

#### Study-specific variable description

 

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-AHEAD-w10` | `HRS-AHEAD-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_ahead10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-AHEAD-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_ahead10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`


**R script:**

```{r harmo_ahead10, echo=TRUE}
HRS_ds_ahead_w10 <- tibble(id=HRS_dem$id)
HRS_ds_ahead_w10$dementia <- NA
HRS_ds_ahead_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_ahead_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_ahead_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_ahead_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_ahead_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_ahead_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_ahead10, echo=FALSE}
vari <- HRS_ds_ahead_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation





### Wave 11 

#### Study-specific variable description

| **Name** | `R11DEMEN`| `R11ALZHE` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-AHEAD-w11` | `HRS-AHEAD-w11` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |

```{r assign_ahead11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-AHEAD-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_ahead11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_ahead11, echo=TRUE}
HRS_ds_ahead_w11 <- tibble(id=HRS_dem$id)
HRS_ds_ahead_w11$dementia <- NA
HRS_ds_ahead_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_ahead_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_ahead_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_ahead_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_ahead_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_ahead_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_ahead11, echo=FALSE}
vari <- HRS_ds_ahead_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation




### The Children of the dementia (CODA) sub-sample

### Wave 4 

#### Study-specific variable description

There is no variable.





### Wave 5 

#### Study-specific variable description

There is no variable.




### Wave 6 

#### Study-specific variable description

There is no variable.



### Wave 7 

#### Study-specific variable description

There is no variable.

### Wave 8 

#### Study-specific variable description

There is no variable.

### Wave 9 

#### Study-specific variable description

There is no variable.



### Wave 10 

#### Study-specific variable description

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-CODA-w10` | `HRS-CODA-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_coda10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-CODA-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_coda10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_coda10, echo=TRUE}
HRS_ds_coda_w10 <- tibble(id=HRS_dem$id)
HRS_ds_coda_w10$dementia <- NA
HRS_ds_coda_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_coda_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_coda_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_coda_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_coda_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_coda_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_coda10, echo=FALSE}
vari <- HRS_ds_coda_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation





### Wave 11 

#### Study-specific variable description

| **Name** | `R11DEMEN`| `R11ALZHE` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-CODA-w11` | `HRS-CODA-w11` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_coda11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-CODA-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_coda11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_coda11, echo=TRUE}
HRS_ds_coda_w11 <- tibble(id=HRS_dem$id)
HRS_ds_coda_w11$dementia <- NA
HRS_ds_coda_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_coda_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_coda_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_coda_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_coda_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_coda_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_coda11, echo=FALSE}
vari <- HRS_ds_coda_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation






## The War Baby (WB) sub-sample 

### Wave 4  

#### Study-specific variable description

There is no variable.


### Wave 5  

#### Study-specific variable description

 

There is no variable.



### Wave 6  

#### Study-specific variable description

There is no variable.





### Wave 7  

#### Study-specific variable description

There is no variable.




### Wave 8  

#### Study-specific variable description

There is no variable.




### Wave 9  

#### Study-specific variable description

There is no variable.




### Wave 10  

#### Study-specific variable description

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-WB-w10` | `HRS-WB-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_wb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-WB-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_wb10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_wb10, echo=TRUE}
HRS_ds_wb_w10 <- tibble(id=HRS_dem$id)
HRS_ds_wb_w10$dementia <- NA
HRS_ds_wb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_wb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_wb_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_wb_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_wb_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_wb_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_wb10, echo=FALSE}
vari <- HRS_ds_wb_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation




### Wave 11  

#### Study-specific variable description

| **Name** | `HRS-WB-w11`| `HRS-WB-w11` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-HRS-w10` | `HRS-HRS-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_wb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-WB-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_wb11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_wb11, echo=TRUE}
HRS_ds_wb_w11 <- tibble(id=HRS_dem$id)
HRS_ds_wb_w11$dementia <- NA
HRS_ds_wb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_wb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_wb_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_wb_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_wb_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_wb_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_wb11, echo=FALSE}
vari <- HRS_ds_wb_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation




## The Early Baby Boomer (EBB) sub-sample

### Wave 7  

#### Study-specific variable description

There is no variable.





### Wave 8  

#### Study-specific variable description

There is no variable.




### Wave 9  

#### Study-specific variable description

 

There is no variable.




### Wave 10  

#### Study-specific variable description

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-EBB-w10` | `HRS-EBB-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_ebb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-EBB-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_ebb10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_ebb10, echo=TRUE}
HRS_ds_ebb_w10 <- tibble(id=HRS_dem$id)
HRS_ds_ebb_w10$dementia <- NA
HRS_ds_ebb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_ebb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_ebb_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_ebb_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_ebb_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_ebb_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_ebb10, echo=FALSE}
vari <- HRS_ds_ebb_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation



### Wave 11  

#### Study-specific variable description

| **Name** | `R11DEMEN`| `R11ALZHE` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-EBB-w11` | `HRS-EBB-w11` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |

```{r assign_ebb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-EBB-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_ebb11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_ebb11, echo=TRUE}
HRS_ds_ebb_w11 <- tibble(id=HRS_dem$id)
HRS_ds_ebb_w11$dementia <- NA
HRS_ds_ebb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_ebb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_ebb_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_ebb_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_ebb_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_ebb_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_ebb11, echo=FALSE}
vari <- HRS_ds_ebb_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation



## The Mid Baby Boomer (MBB) sub-sample

### Wave 10  

#### Study-specific variable description

| **Name** | `R10DEMEN`| `R10ALZHE` |
|-|-|-|
| **Label** | `W10 R reports dementia prob this wv`| `W10 R reports alzheimer prob this wv` |
| **Table name** | `HRS-MBB-w10` | `HRS-MBB-w10` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |


```{r assign_mbb10, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-MBB-w10',
                         variables=list('R10DEMEN', 'R10ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_mbb10, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10DEMEN = 0,2 AND R10ALZHE = 0,2 into 0` 
* `R10DEMEN = 1 or R10ALZHE = 1 into 1`
* `R10DEMEN = 3,4,5,6,NA AND R10ALZHE = 3,4,5,6,NA into 999`


**R script:**

```{r harmo_mbb10, echo=TRUE}
HRS_ds_mbb_w10 <- tibble(id=HRS_dem$id)
HRS_ds_mbb_w10$dementia <- NA
HRS_ds_mbb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_mbb_w10$dementia[HRS_dem$R10ALZHE %in% c(0,2) & is.na(HRS_dem$R10DEMEN)] <- 0
HRS_ds_mbb_w10$dementia[is.na(HRS_dem$R10ALZHE) & HRS_dem$R10DEMEN %in% c(0,2)] <- 0
HRS_ds_mbb_w10$dementia[HRS_dem$R10ALZHE == 1 | HRS_dem$R10DEMEN == 1] <- 1
HRS_ds_mbb_w10$dementia[HRS_dem$R10ALZHE %in% 3:6 & HRS_dem$R10DEMEN%in% 3:6] <- 999
HRS_ds_mbb_w10$dementia[is.na(HRS_dem$R10ALZHE) & is.na(HRS_dem$R10DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_mbb10, echo=FALSE}
vari <- HRS_ds_mbb_w10$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w10, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation



### Wave 11  

#### Study-specific variable description

| **Name** | `R11DEMEN`| `R11ALZHE` |
|-|-|-|
| **Label** | `W11 R reports dementia prob this wv`| `W11 R reports alzheimer prob this wv` |
| **Table name** | `HRS-MBB-w11` | `HRS-MBB-w11` |
| **Categories** |`0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` |  `0 = No` <br/> `1 = Yes` <br/> `2 = TIA/possible stroke` <br/> `Disp prev record and has cond` <br/> `4 = Disp prev record and no cond` <br/> `5 = Disp prev record (DK if cond)` <br/> `6 = Preld prob:prev had/no new` | 
| **Description** |  |  |

```{r assign_mbb11, echo=FALSE}
opal.assign.table.tibble(o, 'HRS_dem','HRS.HRS-MBB-w11',
                         variables=list('R11DEMEN', 'R11ALZHE'), missings = TRUE)
HRS_dem <- opal.execute(o,'HRS_dem')
```

```{r local_mbb11, echo=FALSE}
vari <- HRS_dem[[2]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")

vari <- HRS_dem[[3]]
kable(Categorical_summary(vari, missing_values = NA)[2], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
ggplot(HRS_dem, aes(x=factor(vari))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11DEMEN = 0,2 AND R11ALZHE = 0,2 into 0` 
* `R11DEMEN = 1 or R11ALZHE = 1 into 1`
* `R11DEMEN = 3,4,5,6,NA AND R11ALZHE = 3,4,5,6,NA into 999`

**R script:**

```{r harmo_mbb11, echo=TRUE}
HRS_ds_mbb_w11 <- tibble(id=HRS_dem$id)
HRS_ds_mbb_w11$dementia <- NA
HRS_ds_mbb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_mbb_w11$dementia[HRS_dem$R11ALZHE %in% c(0,2) & is.na(HRS_dem$R11DEMEN)] <- 0
HRS_ds_mbb_w11$dementia[is.na(HRS_dem$R11ALZHE) & HRS_dem$R11DEMEN %in% c(0,2)] <- 0
HRS_ds_mbb_w11$dementia[HRS_dem$R11ALZHE == 1 | HRS_dem$R11DEMEN == 1] <- 1
HRS_ds_mbb_w11$dementia[HRS_dem$R11ALZHE %in% 3:6 & HRS_dem$R11DEMEN%in% 3:6] <- 999
HRS_ds_mbb_w11$dementia[is.na(HRS_dem$R11ALZHE) & is.na(HRS_dem$R11DEMEN)] <- 999
```


#### Statistical description of the new harmonised variable
```{r descript_mbb11, echo=FALSE}
vari <- HRS_ds_mbb_w11$dementia
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3], caption = label(vari)) 
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w11, aes(x=factor(dementia))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vari)) + ylab("Frequency")
```

#### Validation


## Summary of descriptive statistics of the harmonised variable accross populations and waves

Two tables are generated: 

1. Percentages of categories in each harmonised variable.

2. Frequencies and percentages of individuals with different trajectories. To avoid too large table, Only trajectories with percentages larger than 0.3 are shown.

**R script:**

```{r summ}

lf.hrs <- list(hrs_w10 = HRS_ds_hrs_w10, hrs_w11 = HRS_ds_hrs_w11, ahead_w10 = HRS_ds_ahead_w10, ahead_w11 = HRS_ds_ahead_w11, coda_w10 = HRS_ds_coda_w10, coda_w11 = HRS_ds_coda_w11, wb_w10 = HRS_ds_wb_w10, wb_w11 = HRS_ds_wb_w11, ebb_w10 = HRS_ds_ebb_w10, ebb_w11 = HRS_ds_ebb_w11, mbb_w11 = HRS_ds_mbb_w11)

```


# Quality estimation

No comments

<!-- ########################################################## --> 
<!-- # Save -->
```{r save, include=FALSE, echo=F}


for(name in names(lf.hrs)) {
  dementia <- lf.hrs[[name]]
  save(dementia, file = paste0(datafolder,name,"/dementia.RData"))
}


```
<!-- ########################################################## --> 






<!-- ########################################################## -->
<!--- # Close OPAL R Session -->
```{r closeRsession, echo=FALSE}
opal.logout(o)
```

