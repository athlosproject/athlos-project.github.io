---
title: "Has spouse/partner"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup_iago.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/spouseDS.Rmd'}
```


```{r global, echo=F}
source('../../_DS_Rmd/spouseDS.R')
```



# Data process

## HRS
### Wave 1 

#### Study-specific variable description



| **Name** | `R1MSTAT`|
|-|-|
| **Label** |`R1MSTAT:W1 R Marital Status`|
| **Table name** |`HRS-HRS-w1`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |





```{r assign1 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w1_spouse','HRS.HRS-HRS-w1', variables=list('R1MSTAT'), missings = TRUE)
```

```{r local1 , echo=F}
HRS_hrs_w1_spouse <- opal.execute(o,'HRS_hrs_w1_spouse')
vari <- HRS_hrs_w1_spouse$R1MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w1_spouse$R1MSTAT, missing_values = NA)
ggplot(HRS_hrs_w1_spouse, aes(x=factor(R1MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo1 , echo=TRUE}
HRS_ds_hrs_w1 <- tibble(id=HRS_hrs_w1_spouse$id)
HRS_ds_hrs_w1$spouse <- car::recode(as.vector(HRS_hrs_w1_spouse$R1MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w1$spouse <- labelled(HRS_ds_hrs_w1$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript1 mbb, echo=F}
vari <- HRS_ds_hrs_w1$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w1$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w1, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation1 , echo=F}
AfterH <- table(HRS_ds_hrs_w1$spouse)
BeforeH <- table(HRS_hrs_w1_spouse$R1MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 2

#### Study-specific variable description



| **Name** | `R2MSTAT`|
|-|-|
| **Label** |`R2MSTAT:W2 R Marital Status`|
| **Table name** |`HRS-HRS-w2`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |


```{r assign2 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w2_spouse','HRS.HRS-HRS-w2', variables=list('R2MSTAT'), missings = TRUE)
```

```{r local2 , echo=F}
HRS_hrs_w2_spouse <- opal.execute(o,'HRS_hrs_w2_spouse')
vari <- HRS_hrs_w2_spouse$R2MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w2_spouse$R2MSTAT, missing_values = NA)
ggplot(HRS_hrs_w2_spouse, aes(x=factor(R2MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo2 , echo=TRUE}
HRS_ds_hrs_w2 <- tibble(id=HRS_hrs_w2_spouse$id)
HRS_ds_hrs_w2$spouse <- car::recode(as.vector(HRS_hrs_w2_spouse$R2MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w2$spouse <- labelled(HRS_ds_hrs_w2$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript2 , echo=F}
vari <- HRS_ds_hrs_w2$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w2$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w2, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation2 , echo=F}
AfterH <- table(HRS_ds_hrs_w2$spouse)
BeforeH <- table(HRS_hrs_w2_spouse$R2MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 3

#### Study-specific variable description



| **Name** | `R3MSTAT`|
|-|-|
| **Label** |`R3MSTAT:W3 R Marital Status`|
| **Table name** |`HRS-HRS-w3`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |


```{r assign3 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w3_spouse','HRS.HRS-HRS-w3',variables=list('R3MSTAT'), missings = TRUE)
```

```{r local3 , echo=F}
HRS_hrs_w3_spouse <- opal.execute(o,'HRS_hrs_w3_spouse')
vari <- HRS_hrs_w3_spouse$R3MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w3_spouse$R3MSTAT, missing_values = NA)
ggplot(HRS_hrs_w3_spouse, aes(x=factor(R3MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo3 , echo=TRUE}
HRS_ds_hrs_w3 <- tibble(id=HRS_hrs_w3_spouse$id)
HRS_ds_hrs_w3$spouse <- car::recode(as.vector(HRS_hrs_w3_spouse$R3MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w3$spouse <- labelled(HRS_ds_hrs_w3$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript3 , echo=F}
vari <- HRS_ds_hrs_w3$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w3$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w3, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation3 , echo=F}
AfterH <- table(HRS_ds_hrs_w3$spouse)
BeforeH <- table(HRS_hrs_w3_spouse$R3MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]])
BeforeH <- BeforeH[c(2,1,7)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 4

#### Study-specific variable description



| **Name** | `R4MSTAT`|
|-|-|
| **Label** |`R4MSTAT:W4 R Marital Status`|
| **Table name** |`HRS-HRS-w4`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign4 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w4_spouse','HRS.HRS-HRS-w4',variables=list('R4MSTAT'), missings = TRUE)
```

```{r local4 , echo=F}
HRS_hrs_w4_spouse <- opal.execute(o,'HRS_hrs_w4_spouse')
vari <- HRS_hrs_w4_spouse$R4MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w4_spouse$R4MSTAT, missing_values = NA)
ggplot(HRS_hrs_w4_spouse, aes(x=factor(R4MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo4 , echo=TRUE}
HRS_ds_hrs_w4 <- tibble(id=HRS_hrs_w4_spouse$id)
HRS_ds_hrs_w4$spouse <- car::recode(as.vector(HRS_hrs_w4_spouse$R4MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w4$spouse <- labelled(HRS_ds_hrs_w4$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript4 , echo=F}
vari <- HRS_ds_hrs_w4$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w4$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w4, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation4 , echo=F}
AfterH <- table(HRS_ds_hrs_w4$spouse)
BeforeH <- table(HRS_hrs_w4_spouse$R4MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 5

#### Study-specific variable description



| **Name** | `R5MSTAT`|
|-|-|
| **Label** |`R5MSTAT:W5 R Marital Status`|
| **Table name** |`HRS-HRS-w5`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign5 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w5_spouse','HRS.HRS-HRS-w5',variables=list('R5MSTAT'), missings = TRUE)
```

```{r local5 , echo=F}
HRS_hrs_w5_spouse <- opal.execute(o,'HRS_hrs_w5_spouse')
vari <- HRS_hrs_w5_spouse$R5MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w5_spouse$R5MSTAT, missing_values = NA)
ggplot(HRS_hrs_w5_spouse, aes(x=factor(R5MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo5 , echo=TRUE}
HRS_ds_hrs_w5 <- tibble(id=HRS_hrs_w5_spouse$id)
HRS_ds_hrs_w5$spouse <- car::recode(as.vector(HRS_hrs_w5_spouse$R5MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w5$spouse <- labelled(HRS_ds_hrs_w5$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript5 , echo=F}
vari <- HRS_ds_hrs_w5$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w5$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w5, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation5 , echo=F}
AfterH <- table(HRS_ds_hrs_w5$spouse)
BeforeH <- table(HRS_hrs_w5_spouse$R5MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 6

#### Study-specific variable description



| **Name** | `R6MSTAT`|
|-|-|
| **Label** |`R6MSTAT:W6 R Marital Status`|
| **Table name** |`HRS-HRS-w6`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign6 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w6_spouse','HRS.HRS-HRS-w6', variables=list('R6MSTAT'), missings = TRUE)
```

```{r local6 , echo=F}
HRS_hrs_w6_spouse <- opal.execute(o,'HRS_hrs_w6_spouse')
vari <- HRS_hrs_w6_spouse$R6MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w6_spouse$R6MSTAT, missing_values = NA)
ggplot(HRS_hrs_w6_spouse, aes(x=factor(R6MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo6 , echo=TRUE}
HRS_ds_hrs_w6 <- tibble(id=HRS_hrs_w6_spouse$id)
HRS_ds_hrs_w6$spouse <- car::recode(as.vector(HRS_hrs_w6_spouse$R6MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w6$spouse <- labelled(HRS_ds_hrs_w6$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript6 , echo=F}
vari <- HRS_ds_hrs_w6$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w6$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w6, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation6 , echo=F}
AfterH <- table(HRS_ds_hrs_w6$spouse)
BeforeH <- table(HRS_hrs_w6_spouse$R6MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 7

#### Study-specific variable description



| **Name** | `R7MSTAT`|
|-|-|
| **Label** |`R7MSTAT:W7 R Marital Status`|
| **Table name** |`HRS-HRS-w7`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |




```{r assign7 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w7_spouse','HRS.HRS-HRS-w7',variables=list('R7MSTAT'), missings = TRUE)
```

```{r local7 , echo=F}
HRS_hrs_w7_spouse <- opal.execute(o,'HRS_hrs_w7_spouse')
vari <- HRS_hrs_w7_spouse$R7MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w7_spouse$R7MSTAT, missing_values = NA)
ggplot(HRS_hrs_w7_spouse, aes(x=factor(R7MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo7 , echo=TRUE}
HRS_ds_hrs_w7 <- tibble(id=HRS_hrs_w7_spouse$id)
HRS_ds_hrs_w7$spouse <- car::recode(as.vector(HRS_hrs_w7_spouse$R7MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w7$spouse <- labelled(HRS_ds_hrs_w7$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7 , echo=F}
vari <- HRS_ds_hrs_w7$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w7$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w7, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation7 , echo=F}
AfterH <- table(HRS_ds_hrs_w7$spouse)
BeforeH <- table(HRS_hrs_w7_spouse$R7MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 8

#### Study-specific variable description



| **Name** | `R8MSTAT`|
|-|-|
| **Label** |`R8MSTAT:W8 R Marital Status`|
| **Table name** |`HRS-HRS-w8`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign8 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w8_spouse','HRS.HRS-HRS-w8',variables=list('R8MSTAT'), missings = TRUE)
```

```{r local8 , echo=F}
HRS_hrs_w8_spouse <- opal.execute(o,'HRS_hrs_w8_spouse')
vari <- HRS_hrs_w8_spouse$R8MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w8_spouse$R8MSTAT, missing_values = NA)
ggplot(HRS_hrs_w8_spouse, aes(x=factor(R8MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo8 , echo=TRUE}
HRS_ds_hrs_w8 <- tibble(id=HRS_hrs_w8_spouse$id)
HRS_ds_hrs_w8$spouse <- car::recode(as.vector(HRS_hrs_w8_spouse$R8MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w8$spouse <- labelled(HRS_ds_hrs_w8$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript8 , echo=F}
vari <- HRS_ds_hrs_w8$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w8$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w8, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation8 , echo=F}
AfterH <- table(HRS_ds_hrs_w8$spouse)
BeforeH <- table(HRS_hrs_w8_spouse$R8MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 9

#### Study-specific variable description



| **Name** | `R9MSTAT`|
|-|-|
| **Label** |`R9MSTAT:W9 R Marital Status`|
| **Table name** |`HRS-HRS-w9`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign9 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w9_spouse','HRS.HRS-HRS-w9',variables=list('R9MSTAT'), missings = TRUE)
```

```{r local9 , echo=F}
HRS_hrs_w9_spouse <- opal.execute(o,'HRS_hrs_w9_spouse')
vari <- HRS_hrs_w9_spouse$R9MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w9_spouse$R9MSTAT, missing_values = NA)
ggplot(HRS_hrs_w9_spouse, aes(x=factor(R9MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo9 , echo=TRUE}
HRS_ds_hrs_w9 <- tibble(id=HRS_hrs_w9_spouse$id)
HRS_ds_hrs_w9$spouse <- car::recode(as.vector(HRS_hrs_w9_spouse$R9MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w9$spouse <- labelled(HRS_ds_hrs_w9$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9 , echo=F}
vari <- HRS_ds_hrs_w9$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w9$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w9, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation9 , echo=F}
AfterH <- table(HRS_ds_hrs_w9$spouse)
BeforeH <- table(HRS_hrs_w9_spouse$R9MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-HRS-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign10 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w10_spouse','HRS.HRS-HRS-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 , echo=F}
HRS_hrs_w10_spouse <- opal.execute(o,'HRS_hrs_w10_spouse')
vari <- HRS_hrs_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_hrs_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 , echo=TRUE}
HRS_ds_hrs_w10 <- tibble(id=HRS_hrs_w10_spouse$id)
HRS_ds_hrs_w10$spouse <- car::recode(as.vector(HRS_hrs_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w10$spouse <- labelled(HRS_ds_hrs_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 , echo=F}
vari <- HRS_ds_hrs_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 , echo=F}
AfterH <- table(HRS_ds_hrs_w10$spouse)
BeforeH <- table(HRS_hrs_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-HRS-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign11 , echo=F}
opal.assign.table.tibble(o, 'HRS_hrs_w11_spouse','HRS.HRS-HRS-w11',variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 , echo=F}
HRS_hrs_w11_spouse <- opal.execute(o,'HRS_hrs_w11_spouse')
vari <- HRS_hrs_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_hrs_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_hrs_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 , echo=TRUE}
HRS_ds_hrs_w11 <- tibble(id=HRS_hrs_w11_spouse$id)
HRS_ds_hrs_w11$spouse <- car::recode(as.vector(HRS_hrs_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_hrs_w11$spouse <- labelled(HRS_ds_hrs_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 , echo=F}
vari <- HRS_ds_hrs_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_hrs_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_hrs_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11 , echo=F}
AfterH <- table(HRS_ds_hrs_w11$spouse)
BeforeH <- table(HRS_hrs_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



## AHEAD
  

### Wave 2

#### Study-specific variable description



| **Name** | `R2MSTAT`|
|-|-|
| **Label** |`R2MSTAT:W2 R Marital Status`|
| **Table name** |`HRS-AHEAD-w2`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |



```{r assign2 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w2_spouse','HRS.HRS-AHEAD-w2',variables=list('R2MSTAT'), missings = TRUE)
```

```{r local2 ahead , echo=F}
HRS_ahead_w2_spouse <- opal.execute(o,'HRS_ahead_w2_spouse')
vari <- HRS_ahead_w2_spouse$R2MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w2_spouse$R2MSTAT, missing_values = NA)
ggplot(HRS_ahead_w2_spouse, aes(x=factor(R2MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo2 ahead , echo=TRUE}
HRS_ds_ahead_w2 <- tibble(id=HRS_ahead_w2_spouse$id)
HRS_ds_ahead_w2$spouse <- car::recode(as.vector(HRS_ahead_w2_spouse$R2MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w2$spouse <- labelled(HRS_ds_ahead_w2$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript2 ahead , echo=F}
vari <- HRS_ds_ahead_w2$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w2$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w2, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation2 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w2$spouse)
BeforeH <- table(HRS_ahead_w2_spouse$R2MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]])
BeforeH <- BeforeH[c(2,1,7)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 3

#### Study-specific variable description



| **Name** | `R3MSTAT`|
|-|-|
| **Label** |`R3MSTAT:W3 R Marital Status`|
| **Table name** |`HRS-AHEAD-w3`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign3 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w3_spouse','HRS.HRS-AHEAD-w3',variables=list('R3MSTAT'), missings = TRUE)
```

```{r local3 ahead , echo=F}
HRS_ahead_w3_spouse <- opal.execute(o,'HRS_ahead_w3_spouse')
vari <- HRS_ahead_w3_spouse$R3MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w3_spouse$R3MSTAT, missing_values = NA)
ggplot(HRS_ahead_w3_spouse, aes(x=factor(R3MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo3 ahead , echo=TRUE}
HRS_ds_ahead_w3 <- tibble(id=HRS_ahead_w3_spouse$id)
HRS_ds_ahead_w3$spouse <- car::recode(as.vector(HRS_ahead_w3_spouse$R3MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w3$spouse <- labelled(HRS_ds_ahead_w3$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript3 ahead , echo=F}
vari <- HRS_ds_ahead_w3$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w3$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w3, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation3 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w3$spouse)
BeforeH <- table(HRS_ahead_w3_spouse$R3MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]])
BeforeH <- BeforeH[c(2,1,7)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 4

#### Study-specific variable description



| **Name** | `R4MSTAT`|
|-|-|
| **Label** |`R4MSTAT:W4 R Marital Status`|
| **Table name** |`HRS-AHEAD-w4`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign4 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w4_spouse','HRS.HRS-AHEAD-w4',variables=list('R4MSTAT'), missings = TRUE)
```

```{r local4 ahead , echo=F}
HRS_ahead_w4_spouse <- opal.execute(o,'HRS_ahead_w4_spouse')
vari <- HRS_ahead_w4_spouse$R4MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w4_spouse$R4MSTAT, missing_values = NA)
ggplot(HRS_ahead_w4_spouse, aes(x=factor(R4MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo4 ahead , echo=TRUE}
HRS_ds_ahead_w4 <- tibble(id=HRS_ahead_w4_spouse$id)
HRS_ds_ahead_w4$spouse <- car::recode(as.vector(HRS_ahead_w4_spouse$R4MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w4$spouse <- labelled(HRS_ds_ahead_w4$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript4 ahead , echo=F}
vari <- HRS_ds_ahead_w4$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w4$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w4, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation4 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w4$spouse)
BeforeH <- table(HRS_ahead_w4_spouse$R4MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 5

#### Study-specific variable description



| **Name** | `R5MSTAT`|
|-|-|
| **Label** |`R5MSTAT:W5 R Marital Status`|
| **Table name** |`HRS-AHEAD-w5`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign5 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w5_spouse','HRS.HRS-AHEAD-w5',variables=list('R5MSTAT'), missings = TRUE)
```

```{r local5 ahead , echo=F}
HRS_ahead_w5_spouse <- opal.execute(o,'HRS_ahead_w5_spouse')
vari <- HRS_ahead_w5_spouse$R5MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w5_spouse$R5MSTAT, missing_values = NA)
ggplot(HRS_ahead_w5_spouse, aes(x=factor(R5MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo5} ahead , echo=TRUE}
HRS_ds_ahead_w5 <- tibble(id=HRS_ahead_w5_spouse$id)
HRS_ds_ahead_w5$spouse <- car::recode(as.vector(HRS_ahead_w5_spouse$R5MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w5$spouse <- labelled(HRS_ds_ahead_w5$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript5 ahead , echo=F}
vari <- HRS_ds_ahead_w5$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w5$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w5, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation5 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w5$spouse)
BeforeH <- table(HRS_ahead_w5_spouse$R5MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 6

#### Study-specific variable description



| **Name** | `R6MSTAT`|
|-|-|
| **Label** |`R6MSTAT:W6 R Marital Status`|
| **Table name** |`HRS-AHEAD-w6`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign6 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w6_spouse','HRS.HRS-AHEAD-w6',variables=list('R6MSTAT'), missings = TRUE)
```

```{r local6 ahead , echo=F}
HRS_ahead_w6_spouse <- opal.execute(o,'HRS_ahead_w6_spouse')
vari <- HRS_ahead_w6_spouse$R6MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w6_spouse$R6MSTAT, missing_values = NA)
ggplot(HRS_ahead_w6_spouse, aes(x=factor(R6MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo6 ahead , echo=TRUE}
HRS_ds_ahead_w6 <- tibble(id=HRS_ahead_w6_spouse$id)
HRS_ds_ahead_w6$spouse <- car::recode(as.vector(HRS_ahead_w6_spouse$R6MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w6$spouse <- labelled(HRS_ds_ahead_w6$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript6 ahead , echo=F}
vari <- HRS_ds_ahead_w6$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w6$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w6, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation6 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w6$spouse)
BeforeH <- table(HRS_ahead_w6_spouse$R6MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 7

#### Study-specific variable description



| **Name** | `R7MSTAT`|
|-|-|
| **Label** |`R7MSTAT:W7 R Marital Status`|
| **Table name** |`HRS-AHEAD-w7`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign7 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w7_spouse','HRS.HRS-AHEAD-w7',variables=list('R7MSTAT'), missings = TRUE)
```

```{r local7 ahead , echo=F}
HRS_ahead_w7_spouse <- opal.execute(o,'HRS_ahead_w7_spouse')
vari <- HRS_ahead_w7_spouse$R7MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w7_spouse$R7MSTAT, missing_values = NA)
ggplot(HRS_ahead_w7_spouse, aes(x=factor(R7MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo7 ahead , echo=TRUE}
HRS_ds_ahead_w7 <- tibble(id=HRS_ahead_w7_spouse$id)
HRS_ds_ahead_w7$spouse <- car::recode(as.vector(HRS_ahead_w7_spouse$R7MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w7$spouse <- labelled(HRS_ds_ahead_w7$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7 ahead , echo=F}
vari <- HRS_ds_ahead_w7$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w7$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w7, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation7 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w7$spouse)
BeforeH <- table(HRS_ahead_w7_spouse$R7MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 8

#### Study-specific variable description



| **Name** | `R8MSTAT`|
|-|-|
| **Label** |`R8MSTAT:W8 R Marital Status`|
| **Table name** |`HRS-AHEAD-w8`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign8 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w8_spouse','HRS.HRS-AHEAD-w8', variables=list('R8MSTAT'), missings = TRUE)
```

```{r local8 ahead , echo=F}
HRS_ahead_w8_spouse <- opal.execute(o,'HRS_ahead_w8_spouse')
vari <- HRS_ahead_w8_spouse$R8MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w8_spouse$R8MSTAT, missing_values = NA)
ggplot(HRS_ahead_w8_spouse, aes(x=factor(R8MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo8 ahead , echo=TRUE}
HRS_ds_ahead_w8 <- tibble(id=HRS_ahead_w8_spouse$id)
HRS_ds_ahead_w8$spouse <- car::recode(as.vector(HRS_ahead_w8_spouse$R8MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w8$spouse <- labelled(HRS_ds_ahead_w8$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript8 ahead , echo=F}
vari <- HRS_ds_ahead_w8$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w8$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w8, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation8 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w8$spouse)
BeforeH <- table(HRS_ahead_w8_spouse$R8MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 9

#### Study-specific variable description



| **Name** | `R9MSTAT`|
|-|-|
| **Label** |`R9MSTAT:W9 R Marital Status`|
| **Table name** |`HRS-AHEAD-w9`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign9 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w9_spouse','HRS.HRS-AHEAD-w9',variables=list('R9MSTAT'), missings = TRUE)
```

```{r local9 ahead , echo=F}
HRS_ahead_w9_spouse <- opal.execute(o,'HRS_ahead_w9_spouse')
vari <- HRS_ahead_w9_spouse$R9MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w9_spouse$R9MSTAT, missing_values = NA)
ggplot(HRS_ahead_w9_spouse, aes(x=factor(R9MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo9 ahead , echo=TRUE}
HRS_ds_ahead_w9 <- tibble(id=HRS_ahead_w9_spouse$id)
HRS_ds_ahead_w9$spouse <- car::recode(as.vector(HRS_ahead_w9_spouse$R9MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w9$spouse <- labelled(HRS_ds_ahead_w9$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9 ahead , echo=F}
vari <- HRS_ds_ahead_w9$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w9$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w9, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation9 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w9$spouse)
BeforeH <- table(HRS_ahead_w9_spouse$R9MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-AHEAD-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign10 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w10_spouse','HRS.HRS-AHEAD-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 ahead , echo=F}
HRS_ahead_w10_spouse <- opal.execute(o,'HRS_ahead_w10_spouse')
vari <- HRS_ahead_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_ahead_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 ahead , echo=TRUE}
HRS_ds_ahead_w10 <- tibble(id=HRS_ahead_w10_spouse$id)
HRS_ds_ahead_w10$spouse <- car::recode(as.vector(HRS_ahead_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w10$spouse <- labelled(HRS_ds_ahead_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 ahead , echo=F}
vari <- HRS_ds_ahead_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w10$spouse)
BeforeH <- table(HRS_ahead_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-AHEAD-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |










    

```{r assign11 ahead , echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w11_spouse','HRS.HRS-AHEAD-w11',variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 ahead , echo=F}
HRS_ahead_w11_spouse <- opal.execute(o,'HRS_ahead_w11_spouse')
vari <- HRS_ahead_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ahead_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_ahead_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 ahead , echo=TRUE}
HRS_ds_ahead_w11 <- tibble(id=HRS_ahead_w11_spouse$id)
HRS_ds_ahead_w11$spouse <- car::recode(as.vector(HRS_ahead_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ahead_w11$spouse <- labelled(HRS_ds_ahead_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 ahead , echo=F}
vari <- HRS_ds_ahead_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ahead_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ahead_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11} ahead , echo=F}
AfterH <- table(HRS_ds_ahead_w11$spouse)
BeforeH <- table(HRS_ahead_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



## CODA
  
  



### Wave 4

#### Study-specific variable description



| **Name** | `R4MSTAT`|
|-|-|
| **Label** |`R4MSTAT:W4 R Marital Status`|
| **Table name** |`HRS-CODA-w4`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign4 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w4_spouse','HRS.HRS-CODA-w4',variables=list('R4MSTAT'), missings = TRUE)
```

```{r local4 coda , echo=F}
HRS_coda_w4_spouse <- opal.execute(o,'HRS_coda_w4_spouse')
vari <- HRS_coda_w4_spouse$R4MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w4_spouse$R4MSTAT, missing_values = NA)
ggplot(HRS_coda_w4_spouse, aes(x=factor(R4MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo4 coda , echo=TRUE}
HRS_ds_coda_w4 <- tibble(id=HRS_coda_w4_spouse$id)
HRS_ds_coda_w4$spouse <- car::recode(as.vector(HRS_coda_w4_spouse$R4MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w4$spouse <- labelled(HRS_ds_coda_w4$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript4 coda , echo=F}
vari <- HRS_ds_coda_w4$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w4$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w4, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation4 coda , echo=F}
AfterH <- table(HRS_ds_coda_w4$spouse)
BeforeH <- table(HRS_coda_w4_spouse$R4MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 5

#### Study-specific variable description



| **Name** | `R5MSTAT`|
|-|-|
| **Label** |`R5MSTAT:W5 R Marital Status`|
| **Table name** |`HRS-CODA-w5`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign5 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w5_spouse','HRS.HRS-CODA-w5',variables=list('R5MSTAT'), missings = TRUE)
```

```{r local5 coda , echo=F}
HRS_coda_w5_spouse <- opal.execute(o,'HRS_coda_w5_spouse')
vari <- HRS_coda_w5_spouse$R5MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w5_spouse$R5MSTAT, missing_values = NA)
ggplot(HRS_coda_w5_spouse, aes(x=factor(R5MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo5 coda , echo=TRUE}
HRS_ds_coda_w5 <- tibble(id=HRS_coda_w5_spouse$id)
HRS_ds_coda_w5$spouse <- car::recode(as.vector(HRS_coda_w5_spouse$R5MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w5$spouse <- labelled(HRS_ds_coda_w5$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript5 coda , echo=F}
vari <- HRS_ds_coda_w5$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w5$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w5, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation5 coda , echo=F}
AfterH <- table(HRS_ds_coda_w5$spouse)
BeforeH <- table(HRS_coda_w5_spouse$R5MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 6

#### Study-specific variable description



| **Name** | `R6MSTAT`|
|-|-|
| **Label** |`R6MSTAT:W6 R Marital Status`|
| **Table name** |`HRS-CODA-w6`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign6 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w6_spouse','HRS.HRS-CODA-w6',variables=list('R6MSTAT'), missings = TRUE)
```

```{r local6 coda , echo=F}
HRS_coda_w6_spouse <- opal.execute(o,'HRS_coda_w6_spouse')
vari <- HRS_coda_w6_spouse$R6MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w6_spouse$R6MSTAT, missing_values = NA)
ggplot(HRS_coda_w6_spouse, aes(x=factor(R6MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo6 coda , echo=TRUE}
HRS_ds_coda_w6 <- tibble(id=HRS_coda_w6_spouse$id)
HRS_ds_coda_w6$spouse <- car::recode(as.vector(HRS_coda_w6_spouse$R6MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w6$spouse <- labelled(HRS_ds_coda_w6$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript6 coda , echo=F}
vari <- HRS_ds_coda_w6$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w6$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w6, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation6 coda , echo=F}
AfterH <- table(HRS_ds_coda_w6$spouse)
BeforeH <- table(HRS_coda_w6_spouse$R6MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 7

#### Study-specific variable description



| **Name** | `R7MSTAT`|
|-|-|
| **Label** |`R7MSTAT:W7 R Marital Status`|
| **Table name** |`HRS-CODA-w7`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign7 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w7_spouse','HRS.HRS-CODA-w7',variables=list('R7MSTAT'), missings = TRUE)
```

```{r local7 coda , echo=F}
HRS_coda_w7_spouse <- opal.execute(o,'HRS_coda_w7_spouse')
vari <- HRS_coda_w7_spouse$R7MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w7_spouse$R7MSTAT, missing_values = NA)
ggplot(HRS_coda_w7_spouse, aes(x=factor(R7MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo7 coda , echo=TRUE}
HRS_ds_coda_w7 <- tibble(id=HRS_coda_w7_spouse$id)
HRS_ds_coda_w7$spouse <- car::recode(as.vector(HRS_coda_w7_spouse$R7MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w7$spouse <- labelled(HRS_ds_coda_w7$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7 coda , echo=F}
vari <- HRS_ds_coda_w7$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w7$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w7, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation7 coda , echo=F}
AfterH <- table(HRS_ds_coda_w7$spouse)
BeforeH <- table(HRS_coda_w7_spouse$R7MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 8

#### Study-specific variable description



| **Name** | `R8MSTAT`|
|-|-|
| **Label** |`R8MSTAT:W8 R Marital Status`|
| **Table name** |`HRS-CODA-w8`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign8 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w8_spouse','HRS.HRS-CODA-w8', variables=list('R8MSTAT'), missings = TRUE)
```

```{r local8 coda , echo=F}
HRS_coda_w8_spouse <- opal.execute(o,'HRS_coda_w8_spouse')
vari <- HRS_coda_w8_spouse$R8MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w8_spouse$R8MSTAT, missing_values = NA)
ggplot(HRS_coda_w8_spouse, aes(x=factor(R8MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo8 coda , echo=TRUE}
HRS_ds_coda_w8 <- tibble(id=HRS_coda_w8_spouse$id)
HRS_ds_coda_w8$spouse <- car::recode(as.vector(HRS_coda_w8_spouse$R8MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w8$spouse <- labelled(HRS_ds_coda_w8$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript8 coda , echo=F}
vari <- HRS_ds_coda_w8$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w8$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w8, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation8 coda , echo=F}
AfterH <- table(HRS_ds_coda_w8$spouse)
BeforeH <- table(HRS_coda_w8_spouse$R8MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 9

#### Study-specific variable description



| **Name** | `R9MSTAT`|
|-|-|
| **Label** |`R9MSTAT:W9 R Marital Status`|
| **Table name** |`HRS-CODA-w9`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign9 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w9_spouse','HRS.HRS-CODA-w9',variables=list('R9MSTAT'), missings = TRUE)
```

```{r local9 coda , echo=F}
HRS_coda_w9_spouse <- opal.execute(o,'HRS_coda_w9_spouse')
vari <- HRS_coda_w9_spouse$R9MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w9_spouse$R9MSTAT, missing_values = NA)
ggplot(HRS_coda_w9_spouse, aes(x=factor(R9MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo9 coda , echo=TRUE}
HRS_ds_coda_w9 <- tibble(id=HRS_coda_w9_spouse$id)
HRS_ds_coda_w9$spouse <- car::recode(as.vector(HRS_coda_w9_spouse$R9MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w9$spouse <- labelled(HRS_ds_coda_w9$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9 coda , echo=F}
vari <- HRS_ds_coda_w9$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w9$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w9, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation9 coda , echo=F}
AfterH <- table(HRS_ds_coda_w9$spouse)
BeforeH <- table(HRS_coda_w9_spouse$R9MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-CODA-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign10 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w10_spouse','HRS.HRS-CODA-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 coda , echo=F}
HRS_coda_w10_spouse <- opal.execute(o,'HRS_coda_w10_spouse')
vari <- HRS_coda_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_coda_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 coda , echo=TRUE}
HRS_ds_coda_w10 <- tibble(id=HRS_coda_w10_spouse$id)
HRS_ds_coda_w10$spouse <- car::recode(as.vector(HRS_coda_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w10$spouse <- labelled(HRS_ds_coda_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 coda , echo=F}
vari <- HRS_ds_coda_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 coda , echo=F}
AfterH <- table(HRS_ds_coda_w10$spouse)
BeforeH <- table(HRS_coda_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-CODA-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |










    

```{r assign11 coda , echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w11_spouse','HRS.HRS-CODA-w11',variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 coda , echo=F}
HRS_coda_w11_spouse <- opal.execute(o,'HRS_coda_w11_spouse')
vari <- HRS_coda_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_coda_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_coda_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 coda , echo=TRUE}
HRS_ds_coda_w11 <- tibble(id=HRS_coda_w11_spouse$id)
HRS_ds_coda_w11$spouse <- car::recode(as.vector(HRS_coda_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_coda_w11$spouse <- labelled(HRS_ds_coda_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 coda , echo=F}
vari <- HRS_ds_coda_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_coda_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_coda_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11 coda , echo=F}
AfterH <- table(HRS_ds_coda_w11$spouse)
BeforeH <- table(HRS_coda_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



## WB

### Wave 4

#### Study-specific variable description



| **Name** | `R4MSTAT`|
|-|-|
| **Label** |`R4MSTAT:W4 R Marital Status`|
| **Table name** |`HRS-WB-w4`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign4 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w4_spouse','HRS.HRS-WB-w4',variables=list('R4MSTAT'), missings = TRUE)
```

```{r local4 wb , echo=F}
HRS_wb_w4_spouse <- opal.execute(o,'HRS_wb_w4_spouse')
vari <- HRS_wb_w4_spouse$R4MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w4_spouse$R4MSTAT, missing_values = NA)
ggplot(HRS_wb_w4_spouse, aes(x=factor(R4MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo4 wb , echo=TRUE}
HRS_ds_wb_w4 <- tibble(id=HRS_wb_w4_spouse$id)
HRS_ds_wb_w4$spouse <- car::recode(as.vector(HRS_wb_w4_spouse$R4MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w4$spouse <- labelled(HRS_ds_wb_w4$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript4 wb , echo=F}
vari <- HRS_ds_wb_w4$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w4$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w4, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation4 wb , echo=F}
AfterH <- table(HRS_ds_wb_w4$spouse)
BeforeH <- table(HRS_wb_w4_spouse$R4MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 5

#### Study-specific variable description



| **Name** | `R5MSTAT`|
|-|-|
| **Label** |`R5MSTAT:W5 R Marital Status`|
| **Table name** |`HRS-WB-w5`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign5 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w5_spouse','HRS.HRS-WB-w5',variables=list('R5MSTAT'), missings = TRUE)
```

```{r local5 wb , echo=F}
HRS_wb_w5_spouse <- opal.execute(o,'HRS_wb_w5_spouse')
vari <- HRS_wb_w5_spouse$R5MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w5_spouse$R5MSTAT, missing_values = NA)
ggplot(HRS_wb_w5_spouse, aes(x=factor(R5MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo5 wb , echo=TRUE}
HRS_ds_wb_w5 <- tibble(id=HRS_wb_w5_spouse$id)
HRS_ds_wb_w5$spouse <- car::recode(as.vector(HRS_wb_w5_spouse$R5MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w5$spouse <- labelled(HRS_ds_wb_w5$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript5 wb , echo=F}
vari <- HRS_ds_wb_w5$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w5$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w5, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue")+ xlab("Has spouse/partner") + ylab("Frequency")
```

##### Validation
```{r crosstabulation5 wb , echo=F}
AfterH <- table(HRS_ds_wb_w5$spouse)
BeforeH <- table(HRS_wb_w5_spouse$R5MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 6

#### Study-specific variable description



| **Name** | `R6MSTAT`|
|-|-|
| **Label** |`R6MSTAT:W6 R Marital Status`|
| **Table name** |`HRS-WB-w6`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign6 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w6_spouse','HRS.HRS-WB-w6',variables=list('R6MSTAT'), missings = TRUE)
```

```{r local6 wb , echo=F}
HRS_wb_w6_spouse <- opal.execute(o,'HRS_wb_w6_spouse')
vari <- HRS_wb_w6_spouse$R6MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w6_spouse$R6MSTAT, missing_values = NA)
ggplot(HRS_wb_w6_spouse, aes(x=factor(R6MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo6 wb , echo=TRUE}
HRS_ds_wb_w6 <- tibble(id=HRS_wb_w6_spouse$id)
HRS_ds_wb_w6$spouse <- car::recode(as.vector(HRS_wb_w6_spouse$R6MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w6$spouse <- labelled(HRS_ds_wb_w6$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript6 wb , echo=F}
vari <- HRS_ds_wb_w6$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w6$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w6, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation6 wb , echo=F}
AfterH <- table(HRS_ds_wb_w6$spouse)
BeforeH <- table(HRS_wb_w6_spouse$R6MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 7

#### Study-specific variable description



| **Name** | `R7MSTAT`|
|-|-|
| **Label** |`R7MSTAT:W7 R Marital Status`|
| **Table name** |`HRS-WB-w7`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign7 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w7_spouse','HRS.HRS-WB-w7', variables=list('R7MSTAT'), missings = TRUE)
```

```{r local7 wb , echo=F}
HRS_wb_w7_spouse <- opal.execute(o,'HRS_wb_w7_spouse')
vari <- HRS_wb_w7_spouse$R7MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w7_spouse$R7MSTAT, missing_values = NA)
ggplot(HRS_wb_w7_spouse, aes(x=factor(R7MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo7 wb , echo=TRUE}
HRS_ds_wb_w7 <- tibble(id=HRS_wb_w7_spouse$id)
HRS_ds_wb_w7$spouse <- car::recode(as.vector(HRS_wb_w7_spouse$R7MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w7$spouse <- labelled(HRS_ds_wb_w7$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7 wb , echo=F}
vari <- HRS_ds_wb_w7$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w7$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w7, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation7 wb , echo=F}
AfterH <- table(HRS_ds_wb_w7$spouse)
BeforeH <- table(HRS_wb_w7_spouse$R7MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 8

#### Study-specific variable description



| **Name** | `R8MSTAT`|
|-|-|
| **Label** |`R8MSTAT:W8 R Marital Status`|
| **Table name** |`HRS-WB-w8`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign8 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w8_spouse','HRS.HRS-WB-w8',variables=list('R8MSTAT'), missings = TRUE)
```

```{r local8 wb , echo=F}
HRS_wb_w8_spouse <- opal.execute(o,'HRS_wb_w8_spouse')
vari <- HRS_wb_w8_spouse$R8MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w8_spouse$R8MSTAT, missing_values = NA)
ggplot(HRS_wb_w8_spouse, aes(x=factor(R8MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo8 wb , echo=TRUE}
HRS_ds_wb_w8 <- tibble(id=HRS_wb_w8_spouse$id)
HRS_ds_wb_w8$spouse <- car::recode(as.vector(HRS_wb_w8_spouse$R8MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w8$spouse <- labelled(HRS_ds_wb_w8$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript8 wb , echo=F}
vari <- HRS_ds_wb_w8$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w8$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w8, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation8 wb , echo=F}
AfterH <- table(HRS_ds_wb_w8$spouse)
BeforeH <- table(HRS_wb_w8_spouse$R8MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 9

#### Study-specific variable description



| **Name** | `R9MSTAT`|
|-|-|
| **Label** |`R9MSTAT:W9 R Marital Status`|
| **Table name** |`HRS-WB-w9`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign9 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w9_spouse','HRS.HRS-WB-w9',variables=list('R9MSTAT'), missings = TRUE)
```

```{r local9 wb , echo=F}
HRS_wb_w9_spouse <- opal.execute(o,'HRS_wb_w9_spouse')
vari <- HRS_wb_w9_spouse$R9MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w9_spouse$R9MSTAT, missing_values = NA)
ggplot(HRS_wb_w9_spouse, aes(x=factor(R9MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo9 wb , echo=TRUE}
HRS_ds_wb_w9 <- tibble(id=HRS_wb_w9_spouse$id)
HRS_ds_wb_w9$spouse <- car::recode(as.vector(HRS_wb_w9_spouse$R9MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w9$spouse <- labelled(HRS_ds_wb_w9$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9 wb , echo=F}
vari <- HRS_ds_wb_w9$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w9$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w9, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation9 wb , echo=F}
AfterH <- table(HRS_ds_wb_w9$spouse)
BeforeH <- table(HRS_wb_w9_spouse$R9MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-WB-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign10 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w10_spouse','HRS.HRS-WB-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 wb , echo=F}
HRS_wb_w10_spouse <- opal.execute(o,'HRS_wb_w10_spouse')
vari <- HRS_wb_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_wb_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 wb , echo=TRUE}
HRS_ds_wb_w10 <- tibble(id=HRS_wb_w10_spouse$id)
HRS_ds_wb_w10$spouse <- car::recode(as.vector(HRS_wb_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w10$spouse <- labelled(HRS_ds_wb_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 wb , echo=F}
vari <- HRS_ds_wb_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 wb , echo=F}
AfterH <- table(HRS_ds_wb_w10$spouse)
BeforeH <- table(HRS_wb_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-WB-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |










    

```{r assign11 wb , echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w11_spouse','HRS.HRS-WB-w11', variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 wb , echo=F}
HRS_wb_w11_spouse <- opal.execute(o,'HRS_wb_w11_spouse')
vari <- HRS_wb_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_wb_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_wb_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 wb , echo=TRUE}
HRS_ds_wb_w11 <- tibble(id=HRS_wb_w11_spouse$id)
HRS_ds_wb_w11$spouse <- car::recode(as.vector(HRS_wb_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_wb_w11$spouse <- labelled(HRS_ds_wb_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 wb , echo=F}
vari <- HRS_ds_wb_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_wb_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_wb_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11 wb , echo=F}
AfterH <- table(HRS_ds_wb_w11$spouse)
BeforeH <- table(HRS_wb_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



## EBB


### Wave 7

#### Study-specific variable description



| **Name** | `R7MSTAT`|
|-|-|
| **Label** |`R7MSTAT:W7 R Marital Status`|
| **Table name** |`HRS-EBB-w7`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign7 ebb , echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w7_spouse','HRS.HRS-EBB-w7',variables=list('R7MSTAT'), missings = TRUE)
```

```{r local7 ebb , echo=F}
HRS_ebb_w7_spouse <- opal.execute(o,'HRS_ebb_w7_spouse')
vari <- HRS_ebb_w7_spouse$R7MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ebb_w7_spouse$R7MSTAT, missing_values = NA)
ggplot(HRS_ebb_w7_spouse, aes(x=factor(R7MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo7 ebb , echo=TRUE}
HRS_ds_ebb_w7 <- tibble(id=HRS_ebb_w7_spouse$id)
HRS_ds_ebb_w7$spouse <- car::recode(as.vector(HRS_ebb_w7_spouse$R7MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ebb_w7$spouse <- labelled(HRS_ds_ebb_w7$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript7 ebb , echo=F}
vari <- HRS_ds_ebb_w7$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ebb_w7$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ebb_w7, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation7 ebb , echo=F}
AfterH <- table(HRS_ds_ebb_w7$spouse)
BeforeH <- table(HRS_ebb_w7_spouse$R7MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 8

#### Study-specific variable description



| **Name** | `R8MSTAT`|
|-|-|
| **Label** |`R8MSTAT:W8 R Marital Status`|
| **Table name** |`HRS-EBB-w8`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign8 ebb , echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w8_spouse','HRS.HRS-EBB-w8', variables=list('R8MSTAT'), missings = TRUE)
```

```{r local8 ebb , echo=F}
HRS_ebb_w8_spouse <- opal.execute(o,'HRS_ebb_w8_spouse')
vari <- HRS_ebb_w8_spouse$R8MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ebb_w8_spouse$R8MSTAT, missing_values = NA)
ggplot(HRS_ebb_w8_spouse, aes(x=factor(R8MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo8 ebb , echo=TRUE}
HRS_ds_ebb_w8 <- tibble(id=HRS_ebb_w8_spouse$id)
HRS_ds_ebb_w8$spouse <- car::recode(as.vector(HRS_ebb_w8_spouse$R8MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ebb_w8$spouse <- labelled(HRS_ds_ebb_w8$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript8 ebb , echo=F}
vari <- HRS_ds_ebb_w8$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ebb_w8$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ebb_w8, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation8 ebb , echo=F}
AfterH <- table(HRS_ds_ebb_w8$spouse)
BeforeH <- table(HRS_ebb_w8_spouse$R8MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



### Wave 9

#### Study-specific variable description



| **Name** | `R9MSTAT`|
|-|-|
| **Label** |`R9MSTAT:W9 R Marital Status`|
| **Table name** |`HRS-EBB-w9`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign9 ebb , echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w9_spouse','HRS.HRS-EBB-w9',variables=list('R9MSTAT'), missings = TRUE)
```

```{r local9 ebb , echo=F}
HRS_ebb_w9_spouse <- opal.execute(o,'HRS_ebb_w9_spouse')
vari <- HRS_ebb_w9_spouse$R9MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ebb_w9_spouse$R9MSTAT, missing_values = NA)
ggplot(HRS_ebb_w9_spouse, aes(x=factor(R9MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo9 ebb , echo=TRUE}
HRS_ds_ebb_w9 <- tibble(id=HRS_ebb_w9_spouse$id)
HRS_ds_ebb_w9$spouse <- car::recode(as.vector(HRS_ebb_w9_spouse$R9MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ebb_w9$spouse <- labelled(HRS_ds_ebb_w9$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript9 ebb , echo=F}
vari <- HRS_ds_ebb_w9$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ebb_w9$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ebb_w9, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation9 ebb , echo=F}
AfterH <- table(HRS_ds_ebb_w9$spouse)
BeforeH <- table(HRS_ebb_w9_spouse$R9MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-EBB-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign10 ebb , echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w10_spouse','HRS.HRS-EBB-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 ebb , echo=F}
HRS_ebb_w10_spouse <- opal.execute(o,'HRS_ebb_w10_spouse')
vari <- HRS_ebb_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ebb_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_ebb_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 ebb , echo=TRUE}
HRS_ds_ebb_w10 <- tibble(id=HRS_ebb_w10_spouse$id)
HRS_ds_ebb_w10$spouse <- car::recode(as.vector(HRS_ebb_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ebb_w10$spouse <- labelled(HRS_ds_ebb_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 ebb , echo=F}
vari <- HRS_ds_ebb_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ebb_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ebb_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 ebb , echo=F}
AfterH <- table(HRS_ds_ebb_w10$spouse)
BeforeH <- table(HRS_ebb_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-EBB-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |










    

```{r assign11 ebb , echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w11_spouse','HRS.HRS-EBB-w11',variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 ebb , echo=F}
HRS_ebb_w11_spouse <- opal.execute(o,'HRS_ebb_w11_spouse')
vari <- HRS_ebb_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_ebb_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_ebb_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 ebb , echo=TRUE}
HRS_ds_ebb_w11 <- tibble(id=HRS_ebb_w11_spouse$id)
HRS_ds_ebb_w11$spouse <- car::recode(as.vector(HRS_ebb_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_ebb_w11$spouse <- labelled(HRS_ds_ebb_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 ebb , echo=F}
vari <- HRS_ds_ebb_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_ebb_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_ebb_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11 ebb , echo=F}
AfterH <- table(HRS_ds_ebb_w11$spouse)
BeforeH <- table(HRS_ebb_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 



## MBB

### Wave 10

#### Study-specific variable description



| **Name** | `R10MSTAT`|
|-|-|
| **Label** |`R10MSTAT:W10 R Marital Status`|
| **Table name** |`HRS-MBB-w10`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |












```{r assign10 mbb, echo=F}
opal.assign.table.tibble(o, 'HRS_mbb_w10_spouse','HRS.HRS-MBB-w10',variables=list('R10MSTAT'), missings = TRUE)
```

```{r local10 mbb, echo=F}
HRS_mbb_w10_spouse <- opal.execute(o,'HRS_mbb_w10_spouse')
vari <- HRS_mbb_w10_spouse$R10MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_mbb_w10_spouse$R10MSTAT, missing_values = NA)
ggplot(HRS_mbb_w10_spouse, aes(x=factor(R10MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo10 mbb, echo=TRUE}
HRS_ds_mbb_w10 <- tibble(id=HRS_mbb_w10_spouse$id)
HRS_ds_mbb_w10$spouse <- car::recode(as.vector(HRS_mbb_w10_spouse$R10MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_mbb_w10$spouse <- labelled(HRS_ds_mbb_w10$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript10 mbb, echo=F}
vari <- HRS_ds_mbb_w10$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_mbb_w10$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_mbb_w10, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation10 mbb, echo=F}
AfterH <- table(HRS_ds_mbb_w10$spouse)
BeforeH <- table(HRS_mbb_w10_spouse$R10MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]])
BeforeH <- BeforeH[c(2,1,8)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 




### Wave 11

#### Study-specific variable description



| **Name** | `R11MSTAT`|
|-|-|
| **Label** |`R11MSTAT:W11 R Marital Status`|
| **Table name** |`HRS-MBB-w11`|
| **Categories** |`1 = Married`<br/>`2 = Married, spouse absent`<br/>`3 = Partnered`<br/>`4 = Separated`<br/>`5 = Divorced`<br/>`6 = Separated/Divorced`<br/>`7 = Widowed`<br/>`8 = Never Married`|
| **Missings** |`NA`|
| **Description** |  |










    

```{r assign11 mbb, echo=F}
opal.assign.table.tibble(o, 'HRS_mbb_w11_spouse','HRS.HRS-MBB-w11',variables=list('R11MSTAT'), missings = TRUE)
```

```{r local11 mbb, echo=F}
HRS_mbb_w11_spouse <- opal.execute(o,'HRS_mbb_w11_spouse')
vari <- HRS_mbb_w11_spouse$R11MSTAT
kable(Categorical_summary(vari, missing_values = NA)[2], caption = attributes(vari)$`spss::shortName`)
kable(Categorical_summary(vari, missing_values = NA)[1], caption = "Category")
#Categorical_summary(var = HRS_mbb_w11_spouse$R11MSTAT, missing_values = NA)
ggplot(HRS_mbb_w11_spouse, aes(x=factor(R11MSTAT))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Marital Status") + ylab("Frequency")
```

#### Harmonisation algorithm
To recode the harmonize variable from the study-specific variable it has to be recoded as follows:  

* `1,2 OR 3 into 1`
* `4,5,6,7 OR 8 into 0`
* `NA into 999`

**R script:**

```{r harmo11 mbb, echo=TRUE}
HRS_ds_mbb_w11 <- tibble(id=HRS_mbb_w11_spouse$id)
HRS_ds_mbb_w11$spouse <- car::recode(as.vector(HRS_mbb_w11_spouse$R11MSTAT), "1:3='1'; 4:8='0'; NA='999'")
HRS_ds_mbb_w11$spouse <- labelled(HRS_ds_mbb_w11$spouse, labels = c("No"=0, "Yes"=1, "Missing"=999, "Do not know"=998, "Refuse"=997, "Not applicable"=996, "Don't answer"=995,  "Not attempt/not done/not yet recorded"=994, "Disable to measure"=993, "Impute"=992, "CAPI/interviewer error"=991))
```

#### Statistical description of the new harmonised variable
```{r descript11 mbb, echo=F}
vari <- HRS_ds_mbb_w11$spouse
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[3])
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[1], caption = "Category")
kable(Categorical_summary(vari, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))[2], caption = "Type of missing")
#Categorical_summary(var = HRS_ds_mbb_w11$spouse, missing_values = c(991, 992, 993, 994, 995, 996, 997, 998, 999))
ggplot(HRS_ds_mbb_w11, aes(x=factor(spouse))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Has spouse/partner") + ylab("Frequency")
```

#### Validation
```{r crosstabulation11 mbb, echo=F}
AfterH <- table(HRS_ds_mbb_w11$spouse)
BeforeH <- table(HRS_mbb_w11_spouse$R11MSTAT, useNA='ifany')
BeforeH[[1]] <- sum(BeforeH[[1]],BeforeH[[2]],BeforeH[[3]])
BeforeH[[2]] <- sum(BeforeH[[4]],BeforeH[[5]],BeforeH[[6]],BeforeH[[7]],BeforeH[[8]])
BeforeH <- BeforeH[c(2,1,9)]
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("4:8->0","1:3->1","NA->999")

kable(C)
```

 
 
```{r save, echo=FALSE}
spouse <- HRS_ds_ahead_w2
save(spouse, file = "../RData/ahead_w2/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w3
save(spouse, file = "../RData/ahead_w3/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w4
save(spouse, file = "../RData/ahead_w4/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w5
save(spouse, file = "../RData/ahead_w5/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w6
save(spouse, file = "../RData/ahead_w6/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w7
save(spouse, file = "../RData/ahead_w7/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w8
save(spouse, file = "../RData/ahead_w8/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w9
save(spouse, file = "../RData/ahead_w9/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w10
save(spouse, file = "../RData/ahead_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ahead_w11
save(spouse, file = "../RData/ahead_w11/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w4
save(spouse, file = "../RData/coda_w4/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w5
save(spouse, file = "../RData/coda_w5/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w6
save(spouse, file = "../RData/coda_w6/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w7
save(spouse, file = "../RData/coda_w7/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w8
save(spouse, file = "../RData/coda_w8/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w9
save(spouse, file = "../RData/coda_w9/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w10
save(spouse, file = "../RData/coda_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_coda_w11
save(spouse, file = "../RData/coda_w11/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ebb_w7
save(spouse, file = "../RData/ebb_w7/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ebb_w8
save(spouse, file = "../RData/ebb_w8/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ebb_w9
save(spouse, file = "../RData/ebb_w9/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ebb_w10
save(spouse, file = "../RData/ebb_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_ebb_w11
save(spouse, file = "../RData/ebb_w11/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w1
save(spouse, file = "../RData/hrs_w1/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w2
save(spouse, file = "../RData/hrs_w2/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w3
save(spouse, file = "../RData/hrs_w3/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w4
save(spouse, file = "../RData/hrs_w4/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w5
save(spouse, file = "../RData/hrs_w5/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w6
save(spouse, file = "../RData/hrs_w6/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w7
save(spouse, file = "../RData/hrs_w7/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w8
save(spouse, file = "../RData/hrs_w8/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w9
save(spouse, file = "../RData/hrs_w9/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w10
save(spouse, file = "../RData/hrs_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_hrs_w11
save(spouse, file = "../RData/hrs_w11/spouse.RData")
rm(spouse)

spouse <- HRS_ds_mbb_w10
save(spouse, file = "../RData/mbb_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_mbb_w11
save(spouse, file = "../RData/mbb_w11/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w4
save(spouse, file = "../RData/wb_w4/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w5
save(spouse, file = "../RData/wb_w5/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w6
save(spouse, file = "../RData/wb_w6/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w7
save(spouse, file = "../RData/wb_w7/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w8
save(spouse, file = "../RData/wb_w8/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w9
save(spouse, file = "../RData/wb_w9/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w10
save(spouse, file = "../RData/wb_w10/spouse.RData")
rm(spouse)

spouse <- HRS_ds_wb_w11
save(spouse, file = "../RData/wb_w11/spouse.RData")
rm(spouse)


```

# Quality estimation
```{r closeRsession, echo=FALSE} 
opal.logout(o)
```

