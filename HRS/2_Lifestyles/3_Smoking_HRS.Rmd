---
title: "Smoking"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup_iago.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/smokingDS.Rmd'}
```
```{r global, echo=F}
source('../../_DS_Rmd/smokingDS.R')
```

# Data process

## HRS

### Wave 1  

#### Study-specific variable description




| **Name** | `R1SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w1`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R1SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w1`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w1, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w1_smoking','HRS.HRS-HRS-w1', variables=list('R1SMOKEN','R1SMOKEV'), missings = TRUE)
```

```{r local HRS w1, echo=F}
HRS_HRS_w1_smoking <- opal.execute(o,'HRS_HRS_w1_smoking')
vbl <- HRS_HRS_w1_smoking$R1SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R1SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w1_smoking$R1SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R1SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w1_smoking, aes(x=factor(R1SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w1_smoking, aes(x=factor(R1SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R1SMOKEV=0 into 0` 
* `R1SMOKEN=0&R1SMOKEV=1 into 1` 
* `R1SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w1}
HRS_ds_hrs_w1 <- tibble(id=HRS_HRS_w1_smoking$id)
HRS_ds_hrs_w1$smoking <- rep(999,length(HRS_ds_hrs_w1$id))
HRS_ds_hrs_w1$smoking[HRS_HRS_w1_smoking$R1SMOKEV==0] <- 0
HRS_ds_hrs_w1$smoking[HRS_HRS_w1_smoking$R1SMOKEN==0&HRS_HRS_w1_smoking$R1SMOKEV==1] <- 1
HRS_ds_hrs_w1$smoking[HRS_HRS_w1_smoking$R1SMOKEN==1] <- 2
#HRS_ds_hrs_w1$smoking <- Recode(HRS_HRS_w1_smoking$R1SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w1$smoking <- labelled(HRS_ds_hrs_w1$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w1, echo=F}
vbl <- HRS_ds_hrs_w1$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w1, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w1, echo=F}
AfterH <- table(HRS_ds_hrs_w1$smoking)
X<-c(sum(na.omit(HRS_HRS_w1_smoking$R1SMOKEV==0)),sum(na.omit(HRS_HRS_w1_smoking$R1SMOKEN==0&HRS_HRS_w1_smoking$R1SMOKEV==1)),sum(na.omit(HRS_HRS_w1_smoking$R1SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_HRS_w1_smoking$R1SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R1SMOKEV=0->0","R1SMOKEN=0&R1SMOKEV=1->1","R1SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 2

#### Study-specific variable description




| **Name** | `R2SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w2`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R2SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w2`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w2, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w2_smoking','HRS.HRS-HRS-w2', variables=list('R2SMOKEN','R2SMOKEV'), missings = TRUE)
```

```{r local HRS w2, echo=F}
HRS_HRS_w2_smoking <- opal.execute(o,'HRS_HRS_w2_smoking')
vbl <- HRS_HRS_w2_smoking$R2SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R2SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w2_smoking$R2SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R2SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w2_smoking, aes(x=factor(R2SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w2_smoking, aes(x=factor(R2SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R2SMOKEV=0 into 0` 
* `R2SMOKEN=0&R2SMOKEV=1 into 1` 
* `R2SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w2}
HRS_ds_hrs_w2 <- tibble(id=HRS_HRS_w2_smoking$id)
HRS_ds_hrs_w2$smoking <- rep(999,length(HRS_ds_hrs_w2$id))
HRS_ds_hrs_w2$smoking[HRS_HRS_w2_smoking$R2SMOKEV==0] <- 0
HRS_ds_hrs_w2$smoking[HRS_HRS_w2_smoking$R2SMOKEN==0&HRS_HRS_w2_smoking$R2SMOKEV==1] <- 1
HRS_ds_hrs_w2$smoking[HRS_HRS_w2_smoking$R2SMOKEN==1] <- 2
#HRS_ds_hrs_w2$smoking <- Recode(HRS_HRS_w2_smoking$R2SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w2$smoking <- labelled(HRS_ds_hrs_w2$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w2, echo=F}
vbl <- HRS_ds_hrs_w2$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w2, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w2, echo=F}
AfterH <- table(HRS_ds_hrs_w2$smoking)
X<-c(sum(na.omit(HRS_HRS_w2_smoking$R2SMOKEV==0)),sum(na.omit(HRS_HRS_w2_smoking$R2SMOKEN==0&HRS_HRS_w2_smoking$R2SMOKEV==1)),sum(na.omit(HRS_HRS_w2_smoking$R2SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w2_smoking$R2SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R2SMOKEV=0->0","R2SMOKEN=0&R2SMOKEV=1->1","R2SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 3 

#### Study-specific variable description




| **Name** | `R3SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w3`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R3SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w3`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w3, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w3_smoking','HRS.HRS-HRS-w3', variables=list('R3SMOKEN','R3SMOKEV'), missings = TRUE)
```

```{r local HRS w3, echo=F}
HRS_HRS_w3_smoking <- opal.execute(o,'HRS_HRS_w3_smoking')
vbl <- HRS_HRS_w3_smoking$R3SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R3SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w3_smoking$R3SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R3SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w3_smoking, aes(x=factor(R3SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w3_smoking, aes(x=factor(R3SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R3SMOKEV=0 into 0` 
* `R3SMOKEN=0&R3SMOKEV=1 into 1` 
* `R3SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w3}
HRS_ds_hrs_w3 <- tibble(id=HRS_HRS_w3_smoking$id)
HRS_ds_hrs_w3$smoking <- rep(999,length(HRS_ds_hrs_w3$id))
HRS_ds_hrs_w3$smoking[HRS_HRS_w3_smoking$R3SMOKEV==0] <- 0
HRS_ds_hrs_w3$smoking[HRS_HRS_w3_smoking$R3SMOKEN==0&HRS_HRS_w3_smoking$R3SMOKEV==1] <- 1
HRS_ds_hrs_w3$smoking[HRS_HRS_w3_smoking$R3SMOKEN==1] <- 2
#HRS_ds_hrs_w3$smoking <- Recode(HRS_HRS_w3_smoking$R3SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w3$smoking <- labelled(HRS_ds_hrs_w3$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w3, echo=F}
vbl <- HRS_ds_hrs_w3$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w3, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w3, echo=F}
AfterH <- table(HRS_ds_hrs_w3$smoking)
X<-c(sum(na.omit(HRS_HRS_w3_smoking$R3SMOKEV==0)),sum(na.omit(HRS_HRS_w3_smoking$R3SMOKEN==0&HRS_HRS_w3_smoking$R3SMOKEV==1)),sum(na.omit(HRS_HRS_w3_smoking$R3SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w3_smoking$R3SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R3SMOKEV=0->0","R3SMOKEN=0&R3SMOKEV=1->1","R3SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 4

#### Study-specific variable description




| **Name** | `R4SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R4SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w4, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w4_smoking','HRS.HRS-HRS-w4', variables=list('R4SMOKEN','R4SMOKEV'), missings = TRUE)
```

```{r local HRS w4, echo=F}
HRS_HRS_w4_smoking <- opal.execute(o,'HRS_HRS_w4_smoking')
vbl <- HRS_HRS_w4_smoking$R4SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w4_smoking$R4SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w4_smoking, aes(x=factor(R4SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w4_smoking, aes(x=factor(R4SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R4SMOKEV=0 into 0` 
* `R4SMOKEN=0&R4SMOKEV=1 into 1` 
* `R4SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w4}
HRS_ds_hrs_w4 <- tibble(id=HRS_HRS_w4_smoking$id)
HRS_ds_hrs_w4$smoking <- rep(999,length(HRS_ds_hrs_w4$id))
HRS_ds_hrs_w4$smoking[HRS_HRS_w4_smoking$R4SMOKEV==0] <- 0
HRS_ds_hrs_w4$smoking[HRS_HRS_w4_smoking$R4SMOKEN==0&HRS_HRS_w4_smoking$R4SMOKEV==1] <- 1
HRS_ds_hrs_w4$smoking[HRS_HRS_w4_smoking$R4SMOKEN==1] <- 2
#HRS_ds_hrs_w4$smoking <- Recode(HRS_HRS_w4_smoking$R4SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w4$smoking <- labelled(HRS_ds_hrs_w4$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w4, echo=F}
vbl <- HRS_ds_hrs_w4$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w4, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w4, echo=F}
AfterH <- table(HRS_ds_hrs_w4$smoking)
X<-c(sum(na.omit(HRS_HRS_w4_smoking$R4SMOKEV==0)),sum(na.omit(HRS_HRS_w4_smoking$R4SMOKEN==0&HRS_HRS_w4_smoking$R4SMOKEV==1)),sum(na.omit(HRS_HRS_w4_smoking$R4SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w4_smoking$R4SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R4SMOKEV=0->0","R4SMOKEN=0&R4SMOKEV=1->1","R4SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 5

#### Study-specific variable description




| **Name** | `R5SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R5SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w5, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w5_smoking','HRS.HRS-HRS-w5', variables=list('R5SMOKEN','R5SMOKEV'), missings = TRUE)
```

```{r local HRS w5, echo=F}
HRS_HRS_w5_smoking <- opal.execute(o,'HRS_HRS_w5_smoking')
vbl <- HRS_HRS_w5_smoking$R5SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w5_smoking$R5SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w5_smoking, aes(x=factor(R5SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w5_smoking, aes(x=factor(R5SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R5SMOKEV=0 into 0` 
* `R5SMOKEN=0&R5SMOKEV=1 into 1` 
* `R5SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w5}
HRS_ds_hrs_w5 <- tibble(id=HRS_HRS_w5_smoking$id)
HRS_ds_hrs_w5$smoking <- rep(999,length(HRS_ds_hrs_w5$id))
HRS_ds_hrs_w5$smoking[HRS_HRS_w5_smoking$R5SMOKEV==0] <- 0
HRS_ds_hrs_w5$smoking[HRS_HRS_w5_smoking$R5SMOKEN==0&HRS_HRS_w5_smoking$R5SMOKEV==1] <- 1
HRS_ds_hrs_w5$smoking[HRS_HRS_w5_smoking$R5SMOKEN==1] <- 2
#HRS_ds_hrs_w5$smoking <- Recode(HRS_HRS_w5_smoking$R5SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w5$smoking <- labelled(HRS_ds_hrs_w5$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w5, echo=F}
vbl <- HRS_ds_hrs_w5$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w5, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w5, echo=F}
AfterH <- table(HRS_ds_hrs_w5$smoking)
X<-c(sum(na.omit(HRS_HRS_w5_smoking$R5SMOKEV==0)),sum(na.omit(HRS_HRS_w5_smoking$R5SMOKEN==0&HRS_HRS_w5_smoking$R5SMOKEV==1)),sum(na.omit(HRS_HRS_w5_smoking$R5SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w5_smoking$R5SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R5SMOKEV=0->0","R5SMOKEN=0&R5SMOKEV=1->1","R5SMOKEN=1->2","NA->999") 
kable(C)
```


### Wave 6

#### Study-specific variable description




| **Name** | `R6SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R6SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w6, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w6_smoking','HRS.HRS-HRS-w6', variables=list('R6SMOKEN','R6SMOKEV'), missings = TRUE)
```

```{r local HRS w6, echo=F}
HRS_HRS_w6_smoking <- opal.execute(o,'HRS_HRS_w6_smoking')
vbl <- HRS_HRS_w6_smoking$R6SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w6_smoking$R6SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w6_smoking, aes(x=factor(R6SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w6_smoking, aes(x=factor(R6SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R6SMOKEV=0 into 0` 
* `R6SMOKEN=0&R6SMOKEV=1 into 1` 
* `R6SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w6}
HRS_ds_hrs_w6 <- tibble(id=HRS_HRS_w6_smoking$id)
HRS_ds_hrs_w6$smoking <- rep(999,length(HRS_ds_hrs_w6$id))
HRS_ds_hrs_w6$smoking[HRS_HRS_w6_smoking$R6SMOKEV==0] <- 0
HRS_ds_hrs_w6$smoking[HRS_HRS_w6_smoking$R6SMOKEN==0&HRS_HRS_w6_smoking$R6SMOKEV==1] <- 1
HRS_ds_hrs_w6$smoking[HRS_HRS_w6_smoking$R6SMOKEN==1] <- 2
#HRS_ds_hrs_w6$smoking <- Recode(HRS_HRS_w6_smoking$R6SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w6$smoking <- labelled(HRS_ds_hrs_w6$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w6, echo=F}
vbl <- HRS_ds_hrs_w6$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w6, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w6, echo=F}
AfterH <- table(HRS_ds_hrs_w6$smoking)
X<-c(sum(na.omit(HRS_HRS_w6_smoking$R6SMOKEV==0)),sum(na.omit(HRS_HRS_w6_smoking$R6SMOKEN==0&HRS_HRS_w6_smoking$R6SMOKEV==1)),sum(na.omit(HRS_HRS_w6_smoking$R6SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w6_smoking$R6SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R6SMOKEV=0->0","R6SMOKEN=0&R6SMOKEV=1->1","R6SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 7  

#### Study-specific variable description




| **Name** | `R7SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R7SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w7, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w7_smoking','HRS.HRS-HRS-w7', variables=list('R7SMOKEN','R7SMOKEV'), missings = TRUE)
```

```{r local HRS w7, echo=F}
HRS_HRS_w7_smoking <- opal.execute(o,'HRS_HRS_w7_smoking')
vbl <- HRS_HRS_w7_smoking$R7SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w7_smoking$R7SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w7_smoking, aes(x=factor(R7SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w7_smoking, aes(x=factor(R7SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R7SMOKEV=0 into 0` 
* `R7SMOKEN=0&R7SMOKEV=1 into 1` 
* `R7SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w7}
HRS_ds_hrs_w7 <- tibble(id=HRS_HRS_w7_smoking$id)
HRS_ds_hrs_w7$smoking <- rep(999,length(HRS_ds_hrs_w7$id))
HRS_ds_hrs_w7$smoking[HRS_HRS_w7_smoking$R7SMOKEV==0] <- 0
HRS_ds_hrs_w7$smoking[HRS_HRS_w7_smoking$R7SMOKEN==0&HRS_HRS_w7_smoking$R7SMOKEV==1] <- 1
HRS_ds_hrs_w7$smoking[HRS_HRS_w7_smoking$R7SMOKEN==1] <- 2
#HRS_ds_hrs_w7$smoking <- Recode(HRS_HRS_w7_smoking$R7SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w7$smoking <- labelled(HRS_ds_hrs_w7$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w7, echo=F}
vbl <- HRS_ds_hrs_w7$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w7, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w7, echo=F}
AfterH <- table(HRS_ds_hrs_w7$smoking)
X<-c(sum(na.omit(HRS_HRS_w7_smoking$R7SMOKEV==0)),sum(na.omit(HRS_HRS_w7_smoking$R7SMOKEN==0&HRS_HRS_w7_smoking$R7SMOKEV==1)),sum(na.omit(HRS_HRS_w7_smoking$R7SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w7_smoking$R7SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R7SMOKEV=0->0","R7SMOKEN=0&R7SMOKEV=1->1","R7SMOKEN=1->2","NA->999") 
kable(C)
```

### Wave 8  

#### Study-specific variable description




| **Name** | `R8SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R8SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w8, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w8_smoking','HRS.HRS-HRS-w8', variables=list('R8SMOKEN','R8SMOKEV'), missings = TRUE)
```

```{r local HRS w8, echo=F}
HRS_HRS_w8_smoking <- opal.execute(o,'HRS_HRS_w8_smoking')
vbl <- HRS_HRS_w8_smoking$R8SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w8_smoking$R8SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w8_smoking, aes(x=factor(R8SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w8_smoking, aes(x=factor(R8SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R8SMOKEV=0 into 0` 
* `R8SMOKEN=0&R8SMOKEV=1 into 1` 
* `R8SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w8}
HRS_ds_hrs_w8 <- tibble(id=HRS_HRS_w8_smoking$id)
HRS_ds_hrs_w8$smoking <- rep(999,length(HRS_ds_hrs_w8$id))
HRS_ds_hrs_w8$smoking[HRS_HRS_w8_smoking$R8SMOKEV==0] <- 0
HRS_ds_hrs_w8$smoking[HRS_HRS_w8_smoking$R8SMOKEN==0&HRS_HRS_w8_smoking$R8SMOKEV==1] <- 1
HRS_ds_hrs_w8$smoking[HRS_HRS_w8_smoking$R8SMOKEN==1] <- 2
#HRS_ds_hrs_w8$smoking <- Recode(HRS_HRS_w8_smoking$R8SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w8$smoking <- labelled(HRS_ds_hrs_w8$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w8, echo=F}
vbl <- HRS_ds_hrs_w8$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w8, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w8, echo=F}
AfterH <- table(HRS_ds_hrs_w8$smoking)
X<-c(sum(na.omit(HRS_HRS_w8_smoking$R8SMOKEV==0)),sum(na.omit(HRS_HRS_w8_smoking$R8SMOKEN==0&HRS_HRS_w8_smoking$R8SMOKEV==1)),sum(na.omit(HRS_HRS_w8_smoking$R8SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w8_smoking$R8SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R8SMOKEV=0->0","R8SMOKEN=0&R8SMOKEV=1->1","R8SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 9 

#### Study-specific variable description




| **Name** | `R9SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R9SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w9, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w9_smoking','HRS.HRS-HRS-w9', variables=list('R9SMOKEN','R9SMOKEV'), missings = TRUE)
```

```{r local HRS w9, echo=F}
HRS_HRS_w9_smoking <- opal.execute(o,'HRS_HRS_w9_smoking')
vbl <- HRS_HRS_w9_smoking$R9SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w9_smoking$R9SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w9_smoking, aes(x=factor(R9SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w9_smoking, aes(x=factor(R9SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R9SMOKEV=0 into 0` 
* `R9SMOKEN=0&R9SMOKEV=1 into 1` 
* `R9SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w9}
HRS_ds_hrs_w9 <- tibble(id=HRS_HRS_w9_smoking$id)
HRS_ds_hrs_w9$smoking <- rep(999,length(HRS_ds_hrs_w9$id))
HRS_ds_hrs_w9$smoking[HRS_HRS_w9_smoking$R9SMOKEV==0] <- 0
HRS_ds_hrs_w9$smoking[HRS_HRS_w9_smoking$R9SMOKEN==0&HRS_HRS_w9_smoking$R9SMOKEV==1] <- 1
HRS_ds_hrs_w9$smoking[HRS_HRS_w9_smoking$R9SMOKEN==1] <- 2
#HRS_ds_hrs_w9$smoking <- Recode(HRS_HRS_w9_smoking$R9SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w9$smoking <- labelled(HRS_ds_hrs_w9$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w9, echo=F}
vbl <- HRS_ds_hrs_w9$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w9, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w9, echo=F}
AfterH <- table(HRS_ds_hrs_w9$smoking)
X<-c(sum(na.omit(HRS_HRS_w9_smoking$R9SMOKEV==0)),sum(na.omit(HRS_HRS_w9_smoking$R9SMOKEN==0&HRS_HRS_w9_smoking$R9SMOKEV==1)),sum(na.omit(HRS_HRS_w9_smoking$R9SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w9_smoking$R9SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R9SMOKEV=0->0","R9SMOKEN=0&R9SMOKEV=1->1","R9SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w10, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w10_smoking','HRS.HRS-HRS-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local HRS w10, echo=F}
HRS_HRS_w10_smoking <- opal.execute(o,'HRS_HRS_w10_smoking')
vbl <- HRS_HRS_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w10}
HRS_ds_hrs_w10 <- tibble(id=HRS_HRS_w10_smoking$id)
HRS_ds_hrs_w10$smoking <- rep(999,length(HRS_ds_hrs_w10$id))
HRS_ds_hrs_w10$smoking[HRS_HRS_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_hrs_w10$smoking[HRS_HRS_w10_smoking$R10SMOKEN==0&HRS_HRS_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_hrs_w10$smoking[HRS_HRS_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_hrs_w10$smoking <- Recode(HRS_HRS_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w10$smoking <- labelled(HRS_ds_hrs_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w10, echo=F}
vbl <- HRS_ds_hrs_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w10, echo=F}
AfterH <- table(HRS_ds_hrs_w10$smoking)
X<-c(sum(na.omit(HRS_HRS_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_HRS_w10_smoking$R10SMOKEN==0&HRS_HRS_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_HRS_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w10_smoking$R10SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 11  

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-HRS-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-HRS-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign HRS w11, echo=F}
opal.assign.table.tibble(o, 'HRS_HRS_w11_smoking','HRS.HRS-HRS-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local HRS w11, echo=F}
HRS_HRS_w11_smoking <- opal.execute(o,'HRS_HRS_w11_smoking')
vbl <- HRS_HRS_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_HRS_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_HRS_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_HRS_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo HRS w11}
HRS_ds_hrs_w11 <- tibble(id=HRS_HRS_w11_smoking$id)
HRS_ds_hrs_w11$smoking <- rep(999,length(HRS_ds_hrs_w11$id))
HRS_ds_hrs_w11$smoking[HRS_HRS_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_hrs_w11$smoking[HRS_HRS_w11_smoking$R11SMOKEN==0&HRS_HRS_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_hrs_w11$smoking[HRS_HRS_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_hrs_w11$smoking <- Recode(HRS_HRS_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_hrs_w11$smoking <- labelled(HRS_ds_hrs_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript HRS w11, echo=F}
vbl <- HRS_ds_hrs_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_hrs_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation HRS w11, echo=F}
AfterH <- table(HRS_ds_hrs_w11$smoking)
X<-c(sum(na.omit(HRS_HRS_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_HRS_w11_smoking$R11SMOKEN==0&HRS_HRS_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_HRS_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,length(HRS_HRS_w11_smoking$R11SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```


## AHEAD

### Wave 2

#### Study-specific variable description




| **Name** | `R2SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w2`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R2SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w2`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w2, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w2_smoking','HRS.HRS-AHEAD-w2', variables=list('R2SMOKEN','R2SMOKEV'), missings = TRUE)
```

```{r local ahead w2, echo=F}
HRS_ahead_w2_smoking <- opal.execute(o,'HRS_ahead_w2_smoking')
vbl <- HRS_ahead_w2_smoking$R2SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R2SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w2_smoking$R2SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R2SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w2_smoking, aes(x=factor(R2SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w2_smoking, aes(x=factor(R2SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R2SMOKEV=0 into 0` 
* `R2SMOKEN=0&R2SMOKEV=1 into 1` 
* `R2SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w2}
HRS_ds_ahead_w2 <- tibble(id=HRS_ahead_w2_smoking$id)
HRS_ds_ahead_w2$smoking <- rep(999,length(HRS_ds_ahead_w2$id))
HRS_ds_ahead_w2$smoking[HRS_ahead_w2_smoking$R2SMOKEV==0] <- 0
HRS_ds_ahead_w2$smoking[HRS_ahead_w2_smoking$R2SMOKEN==0&HRS_ahead_w2_smoking$R2SMOKEV==1] <- 1
HRS_ds_ahead_w2$smoking[HRS_ahead_w2_smoking$R2SMOKEN==1] <- 2
#HRS_ds_ahead_w2$smoking <- Recode(HRS_ahead_w2_smoking$R2SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w2$smoking <- labelled(HRS_ds_ahead_w2$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w2, echo=F}
vbl <- HRS_ds_ahead_w2$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w2, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w2, echo=F}
AfterH <- table(HRS_ds_ahead_w2$smoking)
X<-c(sum(na.omit(HRS_ahead_w2_smoking$R2SMOKEV==0)),sum(na.omit(HRS_ahead_w2_smoking$R2SMOKEN==0&HRS_ahead_w2_smoking$R2SMOKEV==1)),sum(na.omit(HRS_ahead_w2_smoking$R2SMOKEN==1)))
BeforeH <- c(X,length(HRS_ahead_w2_smoking$R2SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R2SMOKEV=0->0","R2SMOKEN=0&R2SMOKEV=1->1","R2SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 3

#### Study-specific variable description




| **Name** | `R3SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w3`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R3SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w3`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w3, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w3_smoking','HRS.HRS-AHEAD-w3', variables=list('R3SMOKEN','R3SMOKEV'), missings = TRUE)
```

```{r local ahead w3, echo=F}
HRS_ahead_w3_smoking <- opal.execute(o,'HRS_ahead_w3_smoking')
vbl <- HRS_ahead_w3_smoking$R3SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R3SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w3_smoking$R3SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R3SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w3_smoking, aes(x=factor(R3SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w3_smoking, aes(x=factor(R3SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R3SMOKEV=0 into 0` 
* `R3SMOKEN=0&R3SMOKEV=1 into 1` 
* `R3SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w3}
HRS_ds_ahead_w3 <- tibble(id=HRS_ahead_w3_smoking$id)
HRS_ds_ahead_w3$smoking <- rep(999,length(HRS_ds_ahead_w3$id))
HRS_ds_ahead_w3$smoking[HRS_ahead_w3_smoking$R3SMOKEV==0] <- 0
HRS_ds_ahead_w3$smoking[HRS_ahead_w3_smoking$R3SMOKEN==0&HRS_ahead_w3_smoking$R3SMOKEV==1] <- 1
HRS_ds_ahead_w3$smoking[HRS_ahead_w3_smoking$R3SMOKEN==1] <- 2
#HRS_ds_ahead_w3$smoking <- Recode(HRS_ahead_w3_smoking$R3SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w3$smoking <- labelled(HRS_ds_ahead_w3$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w3, echo=F}
vbl <- HRS_ds_ahead_w3$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w3, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w3, echo=F}
AfterH <- table(HRS_ds_ahead_w3$smoking)
X<-c(sum(na.omit(HRS_ahead_w3_smoking$R3SMOKEV==0)),sum(na.omit(HRS_ahead_w3_smoking$R3SMOKEN==0&HRS_ahead_w3_smoking$R3SMOKEV==1)),sum(na.omit(HRS_ahead_w3_smoking$R3SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w3_smoking$R3SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R3SMOKEV=0->0","R3SMOKEN=0&R3SMOKEV=1->1","R3SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 4

#### Study-specific variable description




| **Name** | `R4SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R4SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w4, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w4_smoking','HRS.HRS-AHEAD-w4', variables=list('R4SMOKEN','R4SMOKEV'), missings = TRUE)
```

```{r local ahead w4, echo=F}
HRS_ahead_w4_smoking <- opal.execute(o,'HRS_ahead_w4_smoking')
vbl <- HRS_ahead_w4_smoking$R4SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w4_smoking$R4SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w4_smoking, aes(x=factor(R4SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w4_smoking, aes(x=factor(R4SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R4SMOKEV=0 into 0` 
* `R4SMOKEN=0&R4SMOKEV=1 into 1` 
* `R4SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w4}
HRS_ds_ahead_w4 <- tibble(id=HRS_ahead_w4_smoking$id)
HRS_ds_ahead_w4$smoking <- rep(999,length(HRS_ds_ahead_w4$id))
HRS_ds_ahead_w4$smoking[HRS_ahead_w4_smoking$R4SMOKEV==0] <- 0
HRS_ds_ahead_w4$smoking[HRS_ahead_w4_smoking$R4SMOKEN==0&HRS_ahead_w4_smoking$R4SMOKEV==1] <- 1
HRS_ds_ahead_w4$smoking[HRS_ahead_w4_smoking$R4SMOKEN==1] <- 2
#HRS_ds_ahead_w4$smoking <- Recode(HRS_ahead_w4_smoking$R4SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w4$smoking <- labelled(HRS_ds_ahead_w4$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w4, echo=F}
vbl <- HRS_ds_ahead_w4$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w4, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w4, echo=F}
AfterH <- table(HRS_ds_ahead_w4$smoking)
X<-c(sum(na.omit(HRS_ahead_w4_smoking$R4SMOKEV==0)),sum(na.omit(HRS_ahead_w4_smoking$R4SMOKEN==0&HRS_ahead_w4_smoking$R4SMOKEV==1)),sum(na.omit(HRS_ahead_w4_smoking$R4SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w4_smoking$R4SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R4SMOKEV=0->0","R4SMOKEN=0&R4SMOKEV=1->1","R4SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 5

#### Study-specific variable description




| **Name** | `R5SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R5SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w5, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w5_smoking','HRS.HRS-AHEAD-w5', variables=list('R5SMOKEN','R5SMOKEV'), missings = TRUE)
```

```{r local ahead w5, echo=F}
HRS_ahead_w5_smoking <- opal.execute(o,'HRS_ahead_w5_smoking')
vbl <- HRS_ahead_w5_smoking$R5SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w5_smoking$R5SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w5_smoking, aes(x=factor(R5SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w5_smoking, aes(x=factor(R5SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R5SMOKEV=0 into 0` 
* `R5SMOKEN=0&R5SMOKEV=1 into 1` 
* `R5SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w5}
HRS_ds_ahead_w5 <- tibble(id=HRS_ahead_w5_smoking$id)
HRS_ds_ahead_w5$smoking <- rep(999,length(HRS_ds_ahead_w5$id))
HRS_ds_ahead_w5$smoking[HRS_ahead_w5_smoking$R5SMOKEV==0] <- 0
HRS_ds_ahead_w5$smoking[HRS_ahead_w5_smoking$R5SMOKEN==0&HRS_ahead_w5_smoking$R5SMOKEV==1] <- 1
HRS_ds_ahead_w5$smoking[HRS_ahead_w5_smoking$R5SMOKEN==1] <- 2
#HRS_ds_ahead_w5$smoking <- Recode(HRS_ahead_w5_smoking$R5SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w5$smoking <- labelled(HRS_ds_ahead_w5$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w5, echo=F}
vbl <- HRS_ds_ahead_w5$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w5, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w5, echo=F}
AfterH <- table(HRS_ds_ahead_w5$smoking)
X<-c(sum(na.omit(HRS_ahead_w5_smoking$R5SMOKEV==0)),sum(na.omit(HRS_ahead_w5_smoking$R5SMOKEN==0&HRS_ahead_w5_smoking$R5SMOKEV==1)),sum(na.omit(HRS_ahead_w5_smoking$R5SMOKEN==1)))
BeforeH <- c(X,length(HRS_ahead_w5_smoking$R5SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R5SMOKEV=0->0","R5SMOKEN=0&R5SMOKEV=1->1","R5SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 6

#### Study-specific variable description




| **Name** | `R6SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R6SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w6, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w6_smoking','HRS.HRS-AHEAD-w6', variables=list('R6SMOKEN','R6SMOKEV'), missings = TRUE)
```

```{r local ahead w6, echo=F}
HRS_ahead_w6_smoking <- opal.execute(o,'HRS_ahead_w6_smoking')
vbl <- HRS_ahead_w6_smoking$R6SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w6_smoking$R6SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w6_smoking, aes(x=factor(R6SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w6_smoking, aes(x=factor(R6SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R6SMOKEV=0 into 0` 
* `R6SMOKEN=0&R6SMOKEV=1 into 1` 
* `R6SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w6}
HRS_ds_ahead_w6 <- tibble(id=HRS_ahead_w6_smoking$id)
HRS_ds_ahead_w6$smoking <- rep(999,length(HRS_ds_ahead_w6$id))
HRS_ds_ahead_w6$smoking[HRS_ahead_w6_smoking$R6SMOKEV==0] <- 0
HRS_ds_ahead_w6$smoking[HRS_ahead_w6_smoking$R6SMOKEN==0&HRS_ahead_w6_smoking$R6SMOKEV==1] <- 1
HRS_ds_ahead_w6$smoking[HRS_ahead_w6_smoking$R6SMOKEN==1] <- 2
#HRS_ds_ahead_w6$smoking <- Recode(HRS_ahead_w6_smoking$R6SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w6$smoking <- labelled(HRS_ds_ahead_w6$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w6, echo=F}
vbl <- HRS_ds_ahead_w6$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w6, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w6, echo=F}
AfterH <- table(HRS_ds_ahead_w6$smoking)
X<-c(sum(na.omit(HRS_ahead_w6_smoking$R6SMOKEV==0)),sum(na.omit(HRS_ahead_w6_smoking$R6SMOKEN==0&HRS_ahead_w6_smoking$R6SMOKEV==1)),sum(na.omit(HRS_ahead_w6_smoking$R6SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w6_smoking$R6SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R6SMOKEV=0->0","R6SMOKEN=0&R6SMOKEV=1->1","R6SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 7

#### Study-specific variable description




| **Name** | `R7SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R7SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w7, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w7_smoking','HRS.HRS-AHEAD-w7', variables=list('R7SMOKEN','R7SMOKEV'), missings = TRUE)
```

```{r local ahead w7, echo=F}
HRS_ahead_w7_smoking <- opal.execute(o,'HRS_ahead_w7_smoking')
vbl <- HRS_ahead_w7_smoking$R7SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w7_smoking$R7SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w7_smoking, aes(x=factor(R7SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w7_smoking, aes(x=factor(R7SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R7SMOKEV=0 into 0` 
* `R7SMOKEN=0&R7SMOKEV=1 into 1` 
* `R7SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w7}
HRS_ds_ahead_w7 <- tibble(id=HRS_ahead_w7_smoking$id)
HRS_ds_ahead_w7$smoking <- rep(999,length(HRS_ds_ahead_w7$id))
HRS_ds_ahead_w7$smoking[HRS_ahead_w7_smoking$R7SMOKEV==0] <- 0
HRS_ds_ahead_w7$smoking[HRS_ahead_w7_smoking$R7SMOKEN==0&HRS_ahead_w7_smoking$R7SMOKEV==1] <- 1
HRS_ds_ahead_w7$smoking[HRS_ahead_w7_smoking$R7SMOKEN==1] <- 2
#HRS_ds_ahead_w7$smoking <- Recode(HRS_ahead_w7_smoking$R7SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w7$smoking <- labelled(HRS_ds_ahead_w7$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w7, echo=F}
vbl <- HRS_ds_ahead_w7$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w7, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w7, echo=F}
AfterH <- table(HRS_ds_ahead_w7$smoking)
X<-c(sum(na.omit(HRS_ahead_w7_smoking$R7SMOKEV==0)),sum(na.omit(HRS_ahead_w7_smoking$R7SMOKEN==0&HRS_ahead_w7_smoking$R7SMOKEV==1)),sum(na.omit(HRS_ahead_w7_smoking$R7SMOKEN==1)))
BeforeH <- c(X,length(HRS_ahead_w7_smoking$R7SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R7SMOKEV=0->0","R7SMOKEN=0&R7SMOKEV=1->1","R7SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 8

#### Study-specific variable description




| **Name** | `R8SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R8SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w8, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w8_smoking','HRS.HRS-AHEAD-w8', variables=list('R8SMOKEN','R8SMOKEV'), missings = TRUE)
```

```{r local ahead w8, echo=F}
HRS_ahead_w8_smoking <- opal.execute(o,'HRS_ahead_w8_smoking')
vbl <- HRS_ahead_w8_smoking$R8SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w8_smoking$R8SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w8_smoking, aes(x=factor(R8SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w8_smoking, aes(x=factor(R8SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R8SMOKEV=0 into 0` 
* `R8SMOKEN=0&R8SMOKEV=1 into 1` 
* `R8SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w8}
HRS_ds_ahead_w8 <- tibble(id=HRS_ahead_w8_smoking$id)
HRS_ds_ahead_w8$smoking <- rep(999,length(HRS_ds_ahead_w8$id))
HRS_ds_ahead_w8$smoking[HRS_ahead_w8_smoking$R8SMOKEV==0] <- 0
HRS_ds_ahead_w8$smoking[HRS_ahead_w8_smoking$R8SMOKEN==0&HRS_ahead_w8_smoking$R8SMOKEV==1] <- 1
HRS_ds_ahead_w8$smoking[HRS_ahead_w8_smoking$R8SMOKEN==1] <- 2
#HRS_ds_ahead_w8$smoking <- Recode(HRS_ahead_w8_smoking$R8SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w8$smoking <- labelled(HRS_ds_ahead_w8$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w8, echo=F}
vbl <- HRS_ds_ahead_w8$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w8, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w8, echo=F}
AfterH <- table(HRS_ds_ahead_w8$smoking)
X<-c(sum(na.omit(HRS_ahead_w8_smoking$R8SMOKEV==0)),sum(na.omit(HRS_ahead_w8_smoking$R8SMOKEN==0&HRS_ahead_w8_smoking$R8SMOKEV==1)),sum(na.omit(HRS_ahead_w8_smoking$R8SMOKEN==1)))
BeforeH <- c(X,length(HRS_ahead_w8_smoking$R8SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R8SMOKEV=0->0","R8SMOKEN=0&R8SMOKEV=1->1","R8SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 9

#### Study-specific variable description




| **Name** | `R9SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R9SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w9, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w9_smoking','HRS.HRS-AHEAD-w9', variables=list('R9SMOKEN','R9SMOKEV'), missings = TRUE)
```

```{r local ahead w9, echo=F}
HRS_ahead_w9_smoking <- opal.execute(o,'HRS_ahead_w9_smoking')
vbl <- HRS_ahead_w9_smoking$R9SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w9_smoking$R9SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w9_smoking, aes(x=factor(R9SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w9_smoking, aes(x=factor(R9SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R9SMOKEV=0 into 0` 
* `R9SMOKEN=0&R9SMOKEV=1 into 1` 
* `R9SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w9}
HRS_ds_ahead_w9 <- tibble(id=HRS_ahead_w9_smoking$id)
HRS_ds_ahead_w9$smoking <- rep(999,length(HRS_ds_ahead_w9$id))
HRS_ds_ahead_w9$smoking[HRS_ahead_w9_smoking$R9SMOKEV==0] <- 0
HRS_ds_ahead_w9$smoking[HRS_ahead_w9_smoking$R9SMOKEN==0&HRS_ahead_w9_smoking$R9SMOKEV==1] <- 1
HRS_ds_ahead_w9$smoking[HRS_ahead_w9_smoking$R9SMOKEN==1] <- 2
#HRS_ds_ahead_w9$smoking <- Recode(HRS_ahead_w9_smoking$R9SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w9$smoking <- labelled(HRS_ds_ahead_w9$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w9, echo=F}
vbl <- HRS_ds_ahead_w9$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w9, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w9, echo=F}
AfterH <- table(HRS_ds_ahead_w9$smoking)
X<-c(sum(na.omit(HRS_ahead_w9_smoking$R9SMOKEV==0)),sum(na.omit(HRS_ahead_w9_smoking$R9SMOKEN==0&HRS_ahead_w9_smoking$R9SMOKEV==1)),sum(na.omit(HRS_ahead_w9_smoking$R9SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w9_smoking$R9SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R9SMOKEV=0->0","R9SMOKEN=0&R9SMOKEV=1->1","R9SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w10, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w10_smoking','HRS.HRS-AHEAD-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local ahead w10, echo=F}
HRS_ahead_w10_smoking <- opal.execute(o,'HRS_ahead_w10_smoking')
vbl <- HRS_ahead_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w10}
HRS_ds_ahead_w10 <- tibble(id=HRS_ahead_w10_smoking$id)
HRS_ds_ahead_w10$smoking <- rep(999,length(HRS_ds_ahead_w10$id))
HRS_ds_ahead_w10$smoking[HRS_ahead_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_ahead_w10$smoking[HRS_ahead_w10_smoking$R10SMOKEN==0&HRS_ahead_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_ahead_w10$smoking[HRS_ahead_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_ahead_w10$smoking <- Recode(HRS_ahead_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w10$smoking <- labelled(HRS_ds_ahead_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w10, echo=F}
vbl <- HRS_ds_ahead_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w10, echo=F}
AfterH <- table(HRS_ds_ahead_w10$smoking)
X<-c(sum(na.omit(HRS_ahead_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_ahead_w10_smoking$R10SMOKEN==0&HRS_ahead_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_ahead_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w10_smoking$R10SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 11

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-AHEAD-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-AHEAD-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign ahead w11, echo=F}
opal.assign.table.tibble(o, 'HRS_ahead_w11_smoking','HRS.HRS-AHEAD-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local ahead w11, echo=F}
HRS_ahead_w11_smoking <- opal.execute(o,'HRS_ahead_w11_smoking')
vbl <- HRS_ahead_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ahead_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ahead_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo ahead w11}
HRS_ds_ahead_w11 <- tibble(id=HRS_ahead_w11_smoking$id)
HRS_ds_ahead_w11$smoking <- rep(999,length(HRS_ds_ahead_w11$id))
HRS_ds_ahead_w11$smoking[HRS_ahead_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_ahead_w11$smoking[HRS_ahead_w11_smoking$R11SMOKEN==0&HRS_ahead_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_ahead_w11$smoking[HRS_ahead_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_ahead_w11$smoking <- Recode(HRS_ahead_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ahead_w11$smoking <- labelled(HRS_ds_ahead_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript ahead w11, echo=F}
vbl <- HRS_ds_ahead_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ahead_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation ahead w11, echo=F}
AfterH <- table(HRS_ds_ahead_w11$smoking)
X<-c(sum(na.omit(HRS_ahead_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_ahead_w11_smoking$R11SMOKEN==0&HRS_ahead_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_ahead_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ahead_w11_smoking$R11SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```


## CODA

### Wave 4

#### Study-specific variable description




| **Name** | `R4SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R4SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w4, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w4_smoking','HRS.HRS-CODA-w4', variables=list('R4SMOKEN','R4SMOKEV'), missings = TRUE)
```

```{r local CODA w4, echo=F}
HRS_coda_w4_smoking <- opal.execute(o,'HRS_coda_w4_smoking')
vbl <- HRS_coda_w4_smoking$R4SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w4_smoking$R4SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w4_smoking, aes(x=factor(R4SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w4_smoking, aes(x=factor(R4SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R4SMOKEV=0 into 0` 
* `R4SMOKEN=0&R4SMOKEV=1 into 1` 
* `R4SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w4}
HRS_ds_coda_w4 <- tibble(id=HRS_coda_w4_smoking$id)
HRS_ds_coda_w4$smoking <- rep(999,length(HRS_ds_coda_w4$id))
HRS_ds_coda_w4$smoking[HRS_coda_w4_smoking$R4SMOKEV==0] <- 0
HRS_ds_coda_w4$smoking[HRS_coda_w4_smoking$R4SMOKEN==0&HRS_coda_w4_smoking$R4SMOKEV==1] <- 1
HRS_ds_coda_w4$smoking[HRS_coda_w4_smoking$R4SMOKEN==1] <- 2
#HRS_ds_coda_w4$smoking <- Recode(HRS_coda_w4_smoking$R4SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w4$smoking <- labelled(HRS_ds_coda_w4$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w4, echo=F}
vbl <- HRS_ds_coda_w4$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w4, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w4, echo=F}
AfterH <- table(HRS_ds_coda_w4$smoking)
X<-c(sum(na.omit(HRS_coda_w4_smoking$R4SMOKEV==0)),sum(na.omit(HRS_coda_w4_smoking$R4SMOKEN==0&HRS_coda_w4_smoking$R4SMOKEV==1)),sum(na.omit(HRS_coda_w4_smoking$R4SMOKEN==1)))
BeforeH <- c(X,length(HRS_coda_w4_smoking$R4SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R4SMOKEV=0->0","R4SMOKEN=0&R4SMOKEV=1->1","R4SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 5

#### Study-specific variable description




| **Name** | `R5SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R5SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w5, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w5_smoking','HRS.HRS-CODA-w5', variables=list('R5SMOKEN','R5SMOKEV'), missings = TRUE)
```

```{r local CODA w5, echo=F}
HRS_coda_w5_smoking <- opal.execute(o,'HRS_coda_w5_smoking')
vbl <- HRS_coda_w5_smoking$R5SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w5_smoking$R5SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w5_smoking, aes(x=factor(R5SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w5_smoking, aes(x=factor(R5SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R5SMOKEV=0 into 0` 
* `R5SMOKEN=0&R5SMOKEV=1 into 1` 
* `R5SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w5}
HRS_ds_coda_w5 <- tibble(id=HRS_coda_w5_smoking$id)
HRS_ds_coda_w5$smoking <- rep(999,length(HRS_ds_coda_w5$id))
HRS_ds_coda_w5$smoking[HRS_coda_w5_smoking$R5SMOKEV==0] <- 0
HRS_ds_coda_w5$smoking[HRS_coda_w5_smoking$R5SMOKEN==0&HRS_coda_w5_smoking$R5SMOKEV==1] <- 1
HRS_ds_coda_w5$smoking[HRS_coda_w5_smoking$R5SMOKEN==1] <- 2
#HRS_ds_coda_w5$smoking <- Recode(HRS_coda_w5_smoking$R5SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w5$smoking <- labelled(HRS_ds_coda_w5$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w5, echo=F}
vbl <- HRS_ds_coda_w5$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w5, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w5, echo=F}
AfterH <- table(HRS_ds_coda_w5$smoking)
X<-c(sum(na.omit(HRS_coda_w5_smoking$R5SMOKEV==0)),sum(na.omit(HRS_coda_w5_smoking$R5SMOKEN==0&HRS_coda_w5_smoking$R5SMOKEV==1)),sum(na.omit(HRS_coda_w5_smoking$R5SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w5_smoking$R5SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R5SMOKEV=0->0","R5SMOKEN=0&R5SMOKEV=1->1","R5SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 6

#### Study-specific variable description




| **Name** | `R6SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R6SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w6, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w6_smoking','HRS.HRS-CODA-w6', variables=list('R6SMOKEN','R6SMOKEV'), missings = TRUE)
```

```{r local CODA w6, echo=F}
HRS_coda_w6_smoking <- opal.execute(o,'HRS_coda_w6_smoking')
vbl <- HRS_coda_w6_smoking$R6SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w6_smoking$R6SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w6_smoking, aes(x=factor(R6SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w6_smoking, aes(x=factor(R6SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R6SMOKEV=0 into 0` 
* `R6SMOKEN=0&R6SMOKEV=1 into 1` 
* `R6SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w6}
HRS_ds_coda_w6 <- tibble(id=HRS_coda_w6_smoking$id)
HRS_ds_coda_w6$smoking <- rep(999,length(HRS_ds_coda_w6$id))
HRS_ds_coda_w6$smoking[HRS_coda_w6_smoking$R6SMOKEV==0] <- 0
HRS_ds_coda_w6$smoking[HRS_coda_w6_smoking$R6SMOKEN==0&HRS_coda_w6_smoking$R6SMOKEV==1] <- 1
HRS_ds_coda_w6$smoking[HRS_coda_w6_smoking$R6SMOKEN==1] <- 2
#HRS_ds_coda_w6$smoking <- Recode(HRS_coda_w6_smoking$R6SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w6$smoking <- labelled(HRS_ds_coda_w6$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w6, echo=F}
vbl <- HRS_ds_coda_w6$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w6, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w6, echo=F}
AfterH <- table(HRS_ds_coda_w6$smoking)
X<-c(sum(na.omit(HRS_coda_w6_smoking$R6SMOKEV==0)),sum(na.omit(HRS_coda_w6_smoking$R6SMOKEN==0&HRS_coda_w6_smoking$R6SMOKEV==1)),sum(na.omit(HRS_coda_w6_smoking$R6SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w6_smoking$R6SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R6SMOKEV=0->0","R6SMOKEN=0&R6SMOKEV=1->1","R6SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 7

#### Study-specific variable description




| **Name** | `R7SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R7SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w7, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w7_smoking','HRS.HRS-CODA-w7', variables=list('R7SMOKEN','R7SMOKEV'), missings = TRUE)
```

```{r local CODA w7, echo=F}
HRS_coda_w7_smoking <- opal.execute(o,'HRS_coda_w7_smoking')
vbl <- HRS_coda_w7_smoking$R7SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w7_smoking$R7SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w7_smoking, aes(x=factor(R7SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w7_smoking, aes(x=factor(R7SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R7SMOKEV=0 into 0` 
* `R7SMOKEN=0&R7SMOKEV=1 into 1` 
* `R7SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w7}
HRS_ds_coda_w7 <- tibble(id=HRS_coda_w7_smoking$id)
HRS_ds_coda_w7$smoking <- rep(999,length(HRS_ds_coda_w7$id))
HRS_ds_coda_w7$smoking[HRS_coda_w7_smoking$R7SMOKEV==0] <- 0
HRS_ds_coda_w7$smoking[HRS_coda_w7_smoking$R7SMOKEN==0&HRS_coda_w7_smoking$R7SMOKEV==1] <- 1
HRS_ds_coda_w7$smoking[HRS_coda_w7_smoking$R7SMOKEN==1] <- 2
#HRS_ds_coda_w7$smoking <- Recode(HRS_coda_w7_smoking$R7SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w7$smoking <- labelled(HRS_ds_coda_w7$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w7, echo=F}
vbl <- HRS_ds_coda_w7$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w7, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w7, echo=F}
AfterH <- table(HRS_ds_coda_w7$smoking)
X<-c(sum(na.omit(HRS_coda_w7_smoking$R7SMOKEV==0)),sum(na.omit(HRS_coda_w7_smoking$R7SMOKEN==0&HRS_coda_w7_smoking$R7SMOKEV==1)),sum(na.omit(HRS_coda_w7_smoking$R7SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w7_smoking$R7SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R7SMOKEV=0->0","R7SMOKEN=0&R7SMOKEV=1->1","R7SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 8

#### Study-specific variable description




| **Name** | `R8SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R8SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w8, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w8_smoking','HRS.HRS-CODA-w8', variables=list('R8SMOKEN','R8SMOKEV'), missings = TRUE)
```

```{r local CODA w8, echo=F}
HRS_coda_w8_smoking <- opal.execute(o,'HRS_coda_w8_smoking')
vbl <- HRS_coda_w8_smoking$R8SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w8_smoking$R8SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w8_smoking, aes(x=factor(R8SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w8_smoking, aes(x=factor(R8SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R8SMOKEV=0 into 0` 
* `R8SMOKEN=0&R8SMOKEV=1 into 1` 
* `R8SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w8}
HRS_ds_coda_w8 <- tibble(id=HRS_coda_w8_smoking$id)
HRS_ds_coda_w8$smoking <- rep(999,length(HRS_ds_coda_w8$id))
HRS_ds_coda_w8$smoking[HRS_coda_w8_smoking$R8SMOKEV==0] <- 0
HRS_ds_coda_w8$smoking[HRS_coda_w8_smoking$R8SMOKEN==0&HRS_coda_w8_smoking$R8SMOKEV==1] <- 1
HRS_ds_coda_w8$smoking[HRS_coda_w8_smoking$R8SMOKEN==1] <- 2
#HRS_ds_coda_w8$smoking <- Recode(HRS_coda_w8_smoking$R8SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w8$smoking <- labelled(HRS_ds_coda_w8$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w8, echo=F}
vbl <- HRS_ds_coda_w8$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w8, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w8, echo=F}
AfterH <- table(HRS_ds_coda_w8$smoking)
X<-c(sum(na.omit(HRS_coda_w8_smoking$R8SMOKEV==0)),sum(na.omit(HRS_coda_w8_smoking$R8SMOKEN==0&HRS_coda_w8_smoking$R8SMOKEV==1)),sum(na.omit(HRS_coda_w8_smoking$R8SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w8_smoking$R8SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R8SMOKEV=0->0","R8SMOKEN=0&R8SMOKEV=1->1","R8SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 9

#### Study-specific variable description




| **Name** | `R9SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R9SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w9, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w9_smoking','HRS.HRS-CODA-w9', variables=list('R9SMOKEN','R9SMOKEV'), missings = TRUE)
```

```{r local CODA w9, echo=F}
HRS_coda_w9_smoking <- opal.execute(o,'HRS_coda_w9_smoking')
vbl <- HRS_coda_w9_smoking$R9SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w9_smoking$R9SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w9_smoking, aes(x=factor(R9SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w9_smoking, aes(x=factor(R9SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R9SMOKEV=0 into 0` 
* `R9SMOKEN=0&R9SMOKEV=1 into 1` 
* `R9SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w9}
HRS_ds_coda_w9 <- tibble(id=HRS_coda_w9_smoking$id)
HRS_ds_coda_w9$smoking <- rep(999,length(HRS_ds_coda_w9$id))
HRS_ds_coda_w9$smoking[HRS_coda_w9_smoking$R9SMOKEV==0] <- 0
HRS_ds_coda_w9$smoking[HRS_coda_w9_smoking$R9SMOKEN==0&HRS_coda_w9_smoking$R9SMOKEV==1] <- 1
HRS_ds_coda_w9$smoking[HRS_coda_w9_smoking$R9SMOKEN==1] <- 2
#HRS_ds_coda_w9$smoking <- Recode(HRS_coda_w9_smoking$R9SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w9$smoking <- labelled(HRS_ds_coda_w9$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w9, echo=F}
vbl <- HRS_ds_coda_w9$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w9, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w9, echo=F}
AfterH <- table(HRS_ds_coda_w9$smoking)
X<-c(sum(na.omit(HRS_coda_w9_smoking$R9SMOKEV==0)),sum(na.omit(HRS_coda_w9_smoking$R9SMOKEN==0&HRS_coda_w9_smoking$R9SMOKEV==1)),sum(na.omit(HRS_coda_w9_smoking$R9SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w9_smoking$R9SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R9SMOKEV=0->0","R9SMOKEN=0&R9SMOKEV=1->1","R9SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w10, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w10_smoking','HRS.HRS-CODA-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local CODA w10, echo=F}
HRS_coda_w10_smoking <- opal.execute(o,'HRS_coda_w10_smoking')
vbl <- HRS_coda_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w10}
HRS_ds_coda_w10 <- tibble(id=HRS_coda_w10_smoking$id)
HRS_ds_coda_w10$smoking <- rep(999,length(HRS_ds_coda_w10$id))
HRS_ds_coda_w10$smoking[HRS_coda_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_coda_w10$smoking[HRS_coda_w10_smoking$R10SMOKEN==0&HRS_coda_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_coda_w10$smoking[HRS_coda_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_coda_w10$smoking <- Recode(HRS_coda_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w10$smoking <- labelled(HRS_ds_coda_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w10, echo=F}
vbl <- HRS_ds_coda_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w10, echo=F}
AfterH <- table(HRS_ds_coda_w10$smoking)
X<-c(sum(na.omit(HRS_coda_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_coda_w10_smoking$R10SMOKEN==0&HRS_coda_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_coda_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w10_smoking$R10SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 11

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-CODA-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-CODA-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign CODA w11, echo=F}
opal.assign.table.tibble(o, 'HRS_coda_w11_smoking','HRS.HRS-CODA-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local CODA w11, echo=F}
HRS_coda_w11_smoking <- opal.execute(o,'HRS_coda_w11_smoking')
vbl <- HRS_coda_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_coda_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_coda_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo CODA w11}
HRS_ds_coda_w11 <- tibble(id=HRS_coda_w11_smoking$id)
HRS_ds_coda_w11$smoking <- rep(999,length(HRS_ds_coda_w11$id))
HRS_ds_coda_w11$smoking[HRS_coda_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_coda_w11$smoking[HRS_coda_w11_smoking$R11SMOKEN==0&HRS_coda_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_coda_w11$smoking[HRS_coda_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_coda_w11$smoking <- Recode(HRS_coda_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_coda_w11$smoking <- labelled(HRS_ds_coda_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript CODA w11, echo=F}
vbl <- HRS_ds_coda_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_coda_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation CODA w11, echo=F}
AfterH <- table(HRS_ds_coda_w11$smoking)
X<-c(sum(na.omit(HRS_coda_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_coda_w11_smoking$R11SMOKEN==0&HRS_coda_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_coda_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_coda_w11_smoking$R11SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```



## WB


### Wave 4

#### Study-specific variable description




| **Name** | `R4SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R4SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w4`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w4, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w4_smoking','HRS.HRS-WB-w4', variables=list('R4SMOKEN','R4SMOKEV'), missings = TRUE)
```

```{r local WB w4, echo=F}
HRS_wb_w4_smoking <- opal.execute(o,'HRS_wb_w4_smoking')
vbl <- HRS_wb_w4_smoking$R4SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w4_smoking$R4SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R4SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w4_smoking, aes(x=factor(R4SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w4_smoking, aes(x=factor(R4SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R4SMOKEV=0 into 0` 
* `R4SMOKEN=0&R4SMOKEV=1 into 1` 
* `R4SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w4}
HRS_ds_wb_w4 <- tibble(id=HRS_wb_w4_smoking$id)
HRS_ds_wb_w4$smoking <- rep(999,length(HRS_ds_wb_w4$id))
HRS_ds_wb_w4$smoking[HRS_wb_w4_smoking$R4SMOKEV==0] <- 0
HRS_ds_wb_w4$smoking[HRS_wb_w4_smoking$R4SMOKEN==0&HRS_wb_w4_smoking$R4SMOKEV==1] <- 1
HRS_ds_wb_w4$smoking[HRS_wb_w4_smoking$R4SMOKEN==1] <- 2
#HRS_ds_wb_w4$smoking <- Recode(HRS_wb_w4_smoking$R4SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w4$smoking <- labelled(HRS_ds_wb_w4$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w4, echo=F}
vbl <- HRS_ds_wb_w4$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w4, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w4, echo=F}
AfterH <- table(HRS_ds_wb_w4$smoking)
X<-c(sum(na.omit(HRS_wb_w4_smoking$R4SMOKEV==0)),sum(na.omit(HRS_wb_w4_smoking$R4SMOKEN==0&HRS_wb_w4_smoking$R4SMOKEV==1)),sum(na.omit(HRS_wb_w4_smoking$R4SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w4_smoking$R4SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R4SMOKEV=0->0","R4SMOKEN=0&R4SMOKEV=1->1","R4SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 5

#### Study-specific variable description




| **Name** | `R5SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R5SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w5`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w5, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w5_smoking','HRS.HRS-WB-w5', variables=list('R5SMOKEN','R5SMOKEV'), missings = TRUE)
```

```{r local WB w5, echo=F}
HRS_wb_w5_smoking <- opal.execute(o,'HRS_wb_w5_smoking')
vbl <- HRS_wb_w5_smoking$R5SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w5_smoking$R5SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R5SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w5_smoking, aes(x=factor(R5SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w5_smoking, aes(x=factor(R5SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R5SMOKEV=0 into 0` 
* `R5SMOKEN=0&R5SMOKEV=1 into 1` 
* `R5SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w5}
HRS_ds_wb_w5 <- tibble(id=HRS_wb_w5_smoking$id)
HRS_ds_wb_w5$smoking <- rep(999,length(HRS_ds_wb_w5$id))
HRS_ds_wb_w5$smoking[HRS_wb_w5_smoking$R5SMOKEV==0] <- 0
HRS_ds_wb_w5$smoking[HRS_wb_w5_smoking$R5SMOKEN==0&HRS_wb_w5_smoking$R5SMOKEV==1] <- 1
HRS_ds_wb_w5$smoking[HRS_wb_w5_smoking$R5SMOKEN==1] <- 2
#HRS_ds_wb_w5$smoking <- Recode(HRS_wb_w5_smoking$R5SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w5$smoking <- labelled(HRS_ds_wb_w5$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w5, echo=F}
vbl <- HRS_ds_wb_w5$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w5, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w5, echo=F}
AfterH <- table(HRS_ds_wb_w5$smoking)
X<-c(sum(na.omit(HRS_wb_w5_smoking$R5SMOKEV==0)),sum(na.omit(HRS_wb_w5_smoking$R5SMOKEN==0&HRS_wb_w5_smoking$R5SMOKEV==1)),sum(na.omit(HRS_wb_w5_smoking$R5SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w5_smoking$R5SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R5SMOKEV=0->0","R5SMOKEN=0&R5SMOKEV=1->1","R5SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 6

#### Study-specific variable description




| **Name** | `R6SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R6SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w6`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w6, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w6_smoking','HRS.HRS-WB-w6', variables=list('R6SMOKEN','R6SMOKEV'), missings = TRUE)
```

```{r local WB w6, echo=F}
HRS_wb_w6_smoking <- opal.execute(o,'HRS_wb_w6_smoking')
vbl <- HRS_wb_w6_smoking$R6SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w6_smoking$R6SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R6SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w6_smoking, aes(x=factor(R6SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w6_smoking, aes(x=factor(R6SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R6SMOKEV=0 into 0` 
* `R6SMOKEN=0&R6SMOKEV=1 into 1` 
* `R6SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w6}
HRS_ds_wb_w6 <- tibble(id=HRS_wb_w6_smoking$id)
HRS_ds_wb_w6$smoking <- rep(999,length(HRS_ds_wb_w6$id))
HRS_ds_wb_w6$smoking[HRS_wb_w6_smoking$R6SMOKEV==0] <- 0
HRS_ds_wb_w6$smoking[HRS_wb_w6_smoking$R6SMOKEN==0&HRS_wb_w6_smoking$R6SMOKEV==1] <- 1
HRS_ds_wb_w6$smoking[HRS_wb_w6_smoking$R6SMOKEN==1] <- 2
#HRS_ds_wb_w6$smoking <- Recode(HRS_wb_w6_smoking$R6SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w6$smoking <- labelled(HRS_ds_wb_w6$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w6, echo=F}
vbl <- HRS_ds_wb_w6$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w6, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w6, echo=F}
AfterH <- table(HRS_ds_wb_w6$smoking)
X<-c(sum(na.omit(HRS_wb_w6_smoking$R6SMOKEV==0)),sum(na.omit(HRS_wb_w6_smoking$R6SMOKEN==0&HRS_wb_w6_smoking$R6SMOKEV==1)),sum(na.omit(HRS_wb_w6_smoking$R6SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w6_smoking$R6SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R6SMOKEV=0->0","R6SMOKEN=0&R6SMOKEV=1->1","R6SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 7

#### Study-specific variable description




| **Name** | `R7SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R7SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w7, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w7_smoking','HRS.HRS-WB-w7', variables=list('R7SMOKEN','R7SMOKEV'), missings = TRUE)
```

```{r local WB w7, echo=F}
HRS_wb_w7_smoking <- opal.execute(o,'HRS_wb_w7_smoking')
vbl <- HRS_wb_w7_smoking$R7SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w7_smoking$R7SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w7_smoking, aes(x=factor(R7SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w7_smoking, aes(x=factor(R7SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R7SMOKEV=0 into 0` 
* `R7SMOKEN=0&R7SMOKEV=1 into 1` 
* `R7SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w7}
HRS_ds_wb_w7 <- tibble(id=HRS_wb_w7_smoking$id)
HRS_ds_wb_w7$smoking <- rep(999,length(HRS_ds_wb_w7$id))
HRS_ds_wb_w7$smoking[HRS_wb_w7_smoking$R7SMOKEV==0] <- 0
HRS_ds_wb_w7$smoking[HRS_wb_w7_smoking$R7SMOKEN==0&HRS_wb_w7_smoking$R7SMOKEV==1] <- 1
HRS_ds_wb_w7$smoking[HRS_wb_w7_smoking$R7SMOKEN==1] <- 2
#HRS_ds_wb_w7$smoking <- Recode(HRS_wb_w7_smoking$R7SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w7$smoking <- labelled(HRS_ds_wb_w7$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w7, echo=F}
vbl <- HRS_ds_wb_w7$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w7, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w7, echo=F}
AfterH <- table(HRS_ds_wb_w7$smoking)
X<-c(sum(na.omit(HRS_wb_w7_smoking$R7SMOKEV==0)),sum(na.omit(HRS_wb_w7_smoking$R7SMOKEN==0&HRS_wb_w7_smoking$R7SMOKEV==1)),sum(na.omit(HRS_wb_w7_smoking$R7SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w7_smoking$R7SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R7SMOKEV=0->0","R7SMOKEN=0&R7SMOKEV=1->1","R7SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 8

#### Study-specific variable description




| **Name** | `R8SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R8SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w8, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w8_smoking','HRS.HRS-WB-w8', variables=list('R8SMOKEN','R8SMOKEV'), missings = TRUE)
```

```{r local WB w8, echo=F}
HRS_wb_w8_smoking <- opal.execute(o,'HRS_wb_w8_smoking')
vbl <- HRS_wb_w8_smoking$R8SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w8_smoking$R8SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w8_smoking, aes(x=factor(R8SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w8_smoking, aes(x=factor(R8SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R8SMOKEV=0 into 0` 
* `R8SMOKEN=0&R8SMOKEV=1 into 1` 
* `R8SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w8}
HRS_ds_wb_w8 <- tibble(id=HRS_wb_w8_smoking$id)
HRS_ds_wb_w8$smoking <- rep(999,length(HRS_ds_wb_w8$id))
HRS_ds_wb_w8$smoking[HRS_wb_w8_smoking$R8SMOKEV==0] <- 0
HRS_ds_wb_w8$smoking[HRS_wb_w8_smoking$R8SMOKEN==0&HRS_wb_w8_smoking$R8SMOKEV==1] <- 1
HRS_ds_wb_w8$smoking[HRS_wb_w8_smoking$R8SMOKEN==1] <- 2
#HRS_ds_wb_w8$smoking <- Recode(HRS_wb_w8_smoking$R8SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w8$smoking <- labelled(HRS_ds_wb_w8$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w8, echo=F}
vbl <- HRS_ds_wb_w8$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w8, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w8, echo=F}
AfterH <- table(HRS_ds_wb_w8$smoking)
X<-c(sum(na.omit(HRS_wb_w8_smoking$R8SMOKEV==0)),sum(na.omit(HRS_wb_w8_smoking$R8SMOKEN==0&HRS_wb_w8_smoking$R8SMOKEV==1)),sum(na.omit(HRS_wb_w8_smoking$R8SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w8_smoking$R8SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R8SMOKEV=0->0","R8SMOKEN=0&R8SMOKEV=1->1","R8SMOKEN=1->2","NA->999") 
kable(C)
```



### Wave 9

#### Study-specific variable description




| **Name** | `R9SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R9SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w9, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w9_smoking','HRS.HRS-WB-w9', variables=list('R9SMOKEN','R9SMOKEV'), missings = TRUE)
```

```{r local WB w9, echo=F}
HRS_wb_w9_smoking <- opal.execute(o,'HRS_wb_w9_smoking')
vbl <- HRS_wb_w9_smoking$R9SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w9_smoking$R9SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w9_smoking, aes(x=factor(R9SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w9_smoking, aes(x=factor(R9SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R9SMOKEV=0 into 0` 
* `R9SMOKEN=0&R9SMOKEV=1 into 1` 
* `R9SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w9}
HRS_ds_wb_w9 <- tibble(id=HRS_wb_w9_smoking$id)
HRS_ds_wb_w9$smoking <- rep(999,length(HRS_ds_wb_w9$id))
HRS_ds_wb_w9$smoking[HRS_wb_w9_smoking$R9SMOKEV==0] <- 0
HRS_ds_wb_w9$smoking[HRS_wb_w9_smoking$R9SMOKEN==0&HRS_wb_w9_smoking$R9SMOKEV==1] <- 1
HRS_ds_wb_w9$smoking[HRS_wb_w9_smoking$R9SMOKEN==1] <- 2
#HRS_ds_wb_w9$smoking <- Recode(HRS_wb_w9_smoking$R9SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w9$smoking <- labelled(HRS_ds_wb_w9$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w9, echo=F}
vbl <- HRS_ds_wb_w9$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w9, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w9, echo=F}
AfterH <- table(HRS_ds_wb_w9$smoking)
X<-c(sum(na.omit(HRS_wb_w9_smoking$R9SMOKEV==0)),sum(na.omit(HRS_wb_w9_smoking$R9SMOKEN==0&HRS_wb_w9_smoking$R9SMOKEV==1)),sum(na.omit(HRS_wb_w9_smoking$R9SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w9_smoking$R9SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R9SMOKEV=0->0","R9SMOKEN=0&R9SMOKEV=1->1","R9SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w10, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w10_smoking','HRS.HRS-WB-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local WB w10, echo=F}
HRS_wb_w10_smoking <- opal.execute(o,'HRS_wb_w10_smoking')
vbl <- HRS_wb_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w10}
HRS_ds_wb_w10 <- tibble(id=HRS_wb_w10_smoking$id)
HRS_ds_wb_w10$smoking <- rep(999,length(HRS_ds_wb_w10$id))
HRS_ds_wb_w10$smoking[HRS_wb_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_wb_w10$smoking[HRS_wb_w10_smoking$R10SMOKEN==0&HRS_wb_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_wb_w10$smoking[HRS_wb_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_wb_w10$smoking <- Recode(HRS_wb_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w10$smoking <- labelled(HRS_ds_wb_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w10, echo=F}
vbl <- HRS_ds_wb_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w10, echo=F}
AfterH <- table(HRS_ds_wb_w10$smoking)
X<-c(sum(na.omit(HRS_wb_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_wb_w10_smoking$R10SMOKEN==0&HRS_wb_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_wb_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w10_smoking$R10SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 11

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-WB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-WB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign WB w11, echo=F}
opal.assign.table.tibble(o, 'HRS_wb_w11_smoking','HRS.HRS-WB-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local WB w11, echo=F}
HRS_wb_w11_smoking <- opal.execute(o,'HRS_wb_w11_smoking')
vbl <- HRS_wb_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_wb_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_wb_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo WB w11}
HRS_ds_wb_w11 <- tibble(id=HRS_wb_w11_smoking$id)
HRS_ds_wb_w11$smoking <- rep(999,length(HRS_ds_wb_w11$id))
HRS_ds_wb_w11$smoking[HRS_wb_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_wb_w11$smoking[HRS_wb_w11_smoking$R11SMOKEN==0&HRS_wb_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_wb_w11$smoking[HRS_wb_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_wb_w11$smoking <- Recode(HRS_wb_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_wb_w11$smoking <- labelled(HRS_ds_wb_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript WB w11, echo=F}
vbl <- HRS_ds_wb_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_wb_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation WB w11, echo=F}
AfterH <- table(HRS_ds_wb_w11$smoking)
X<-c(sum(na.omit(HRS_wb_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_wb_w11_smoking$R11SMOKEN==0&HRS_wb_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_wb_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_wb_w11_smoking$R11SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```



## EBB

### Wave 7

#### Study-specific variable description




| **Name** | `R7SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-EBB-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R7SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-EBB-w7`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign EBB w7, echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w7_smoking','HRS.HRS-EBB-w7', variables=list('R7SMOKEN','R7SMOKEV'), missings = TRUE)
```

```{r local EBB w7, echo=F}
HRS_ebb_w7_smoking <- opal.execute(o,'HRS_ebb_w7_smoking')
vbl <- HRS_ebb_w7_smoking$R7SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ebb_w7_smoking$R7SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R7SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w7_smoking, aes(x=factor(R7SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ebb_w7_smoking, aes(x=factor(R7SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R7SMOKEV=0 into 0` 
* `R7SMOKEN=0&R7SMOKEV=1 into 1` 
* `R7SMOKEN=1 into 2`
* `NA into 999`

```{r harmo EBB w7}
HRS_ds_ebb_w7 <- tibble(id=HRS_ebb_w7_smoking$id)
HRS_ds_ebb_w7$smoking <- rep(999,length(HRS_ds_ebb_w7$id))
HRS_ds_ebb_w7$smoking[HRS_ebb_w7_smoking$R7SMOKEV==0] <- 0
HRS_ds_ebb_w7$smoking[HRS_ebb_w7_smoking$R7SMOKEN==0&HRS_ebb_w7_smoking$R7SMOKEV==1] <- 1
HRS_ds_ebb_w7$smoking[HRS_ebb_w7_smoking$R7SMOKEN==1] <- 2
#HRS_ds_ebb_w7$smoking <- Recode(HRS_ebb_w7_smoking$R7SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ebb_w7$smoking <- labelled(HRS_ds_ebb_w7$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript EBB w7, echo=F}
vbl <- HRS_ds_ebb_w7$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ebb_w7, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation EBB w7, echo=F}
AfterH <- table(HRS_ds_ebb_w7$smoking)
X<-c(sum(na.omit(HRS_ebb_w7_smoking$R7SMOKEV==0)),sum(na.omit(HRS_ebb_w7_smoking$R7SMOKEN==0&HRS_ebb_w7_smoking$R7SMOKEV==1)),sum(na.omit(HRS_ebb_w7_smoking$R7SMOKEN==1)))
BeforeH <- c(X,length(HRS_ebb_w7_smoking$R7SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R7SMOKEV=0->0","R7SMOKEN=0&R7SMOKEV=1->1","R7SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 8

#### Study-specific variable description




| **Name** | `R8SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-EBB-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R8SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-EBB-w8`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign EBB w8, echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w8_smoking','HRS.HRS-EBB-w8', variables=list('R8SMOKEN','R8SMOKEV'), missings = TRUE)
```

```{r local EBB w8, echo=F}
HRS_ebb_w8_smoking <- opal.execute(o,'HRS_ebb_w8_smoking')
vbl <- HRS_ebb_w8_smoking$R8SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ebb_w8_smoking$R8SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R8SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w8_smoking, aes(x=factor(R8SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ebb_w8_smoking, aes(x=factor(R8SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R8SMOKEV=0 into 0` 
* `R8SMOKEN=0&R8SMOKEV=1 into 1` 
* `R8SMOKEN=1 into 2`
* `NA into 999`

```{r harmo EBB w8}
HRS_ds_ebb_w8 <- tibble(id=HRS_ebb_w8_smoking$id)
HRS_ds_ebb_w8$smoking <- rep(999,length(HRS_ds_ebb_w8$id))
HRS_ds_ebb_w8$smoking[HRS_ebb_w8_smoking$R8SMOKEV==0] <- 0
HRS_ds_ebb_w8$smoking[HRS_ebb_w8_smoking$R8SMOKEN==0&HRS_ebb_w8_smoking$R8SMOKEV==1] <- 1
HRS_ds_ebb_w8$smoking[HRS_ebb_w8_smoking$R8SMOKEN==1] <- 2
#HRS_ds_ebb_w8$smoking <- Recode(HRS_ebb_w8_smoking$R8SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ebb_w8$smoking <- labelled(HRS_ds_ebb_w8$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript EBB w8, echo=F}
vbl <- HRS_ds_ebb_w8$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ebb_w8, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation EBB w8, echo=F}
AfterH <- table(HRS_ds_ebb_w8$smoking)
X<-c(sum(na.omit(HRS_ebb_w8_smoking$R8SMOKEV==0)),sum(na.omit(HRS_ebb_w8_smoking$R8SMOKEN==0&HRS_ebb_w8_smoking$R8SMOKEV==1)),sum(na.omit(HRS_ebb_w8_smoking$R8SMOKEN==1)))
BeforeH <- c(X,length(HRS_ebb_w8_smoking$R8SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R8SMOKEV=0->0","R8SMOKEN=0&R8SMOKEV=1->1","R8SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 9

#### Study-specific variable description




| **Name** | `R9SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-EBB-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R9SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-EBB-w9`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign EBB w9, echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w9_smoking','HRS.HRS-EBB-w9', variables=list('R9SMOKEN','R9SMOKEV'), missings = TRUE)
```

```{r local EBB w9, echo=F}
HRS_ebb_w9_smoking <- opal.execute(o,'HRS_ebb_w9_smoking')
vbl <- HRS_ebb_w9_smoking$R9SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ebb_w9_smoking$R9SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R9SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w9_smoking, aes(x=factor(R9SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ebb_w9_smoking, aes(x=factor(R9SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R9SMOKEV=0 into 0` 
* `R9SMOKEN=0&R9SMOKEV=1 into 1` 
* `R9SMOKEN=1 into 2`
* `NA into 999`

```{r harmo EBB w9}
HRS_ds_ebb_w9 <- tibble(id=HRS_ebb_w9_smoking$id)
HRS_ds_ebb_w9$smoking <- rep(999,length(HRS_ds_ebb_w9$id))
HRS_ds_ebb_w9$smoking[HRS_ebb_w9_smoking$R9SMOKEV==0] <- 0
HRS_ds_ebb_w9$smoking[HRS_ebb_w9_smoking$R9SMOKEN==0&HRS_ebb_w9_smoking$R9SMOKEV==1] <- 1
HRS_ds_ebb_w9$smoking[HRS_ebb_w9_smoking$R9SMOKEN==1] <- 2
#HRS_ds_ebb_w9$smoking <- Recode(HRS_ebb_w9_smoking$R9SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ebb_w9$smoking <- labelled(HRS_ds_ebb_w9$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript EBB w9, echo=F}
vbl <- HRS_ds_ebb_w9$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ebb_w9, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation EBB w9, echo=F}
AfterH <- table(HRS_ds_ebb_w9$smoking)
X<-c(sum(na.omit(HRS_ebb_w9_smoking$R9SMOKEV==0)),sum(na.omit(HRS_ebb_w9_smoking$R9SMOKEN==0&HRS_ebb_w9_smoking$R9SMOKEV==1)),sum(na.omit(HRS_ebb_w9_smoking$R9SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ebb_w9_smoking$R9SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R9SMOKEV=0->0","R9SMOKEN=0&R9SMOKEV=1->1","R9SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-EBB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-EBB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign EBB w10, echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w10_smoking','HRS.HRS-EBB-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local EBB w10, echo=F}
HRS_ebb_w10_smoking <- opal.execute(o,'HRS_ebb_w10_smoking')
vbl <- HRS_ebb_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ebb_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ebb_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo EBB w10}
HRS_ds_ebb_w10 <- tibble(id=HRS_ebb_w10_smoking$id)
HRS_ds_ebb_w10$smoking <- rep(999,length(HRS_ds_ebb_w10$id))
HRS_ds_ebb_w10$smoking[HRS_ebb_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_ebb_w10$smoking[HRS_ebb_w10_smoking$R10SMOKEN==0&HRS_ebb_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_ebb_w10$smoking[HRS_ebb_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_ebb_w10$smoking <- Recode(HRS_ebb_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ebb_w10$smoking <- labelled(HRS_ds_ebb_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript EBB w10, echo=F}
vbl <- HRS_ds_ebb_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ebb_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation EBB w10, echo=F}
AfterH <- table(HRS_ds_ebb_w10$smoking)
X<-c(sum(na.omit(HRS_ebb_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_ebb_w10_smoking$R10SMOKEN==0&HRS_ebb_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_ebb_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_ebb_w10_smoking$R10SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```





### Wave 11

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-EBB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-EBB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign EBB w11, echo=F}
opal.assign.table.tibble(o, 'HRS_ebb_w11_smoking','HRS.HRS-EBB-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local EBB w11, echo=F}
HRS_ebb_w11_smoking <- opal.execute(o,'HRS_ebb_w11_smoking')
vbl <- HRS_ebb_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_ebb_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_ebb_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo EBB w11}
HRS_ds_ebb_w11 <- tibble(id=HRS_ebb_w11_smoking$id)
HRS_ds_ebb_w11$smoking <- rep(999,length(HRS_ds_ebb_w11$id))
HRS_ds_ebb_w11$smoking[HRS_ebb_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_ebb_w11$smoking[HRS_ebb_w11_smoking$R11SMOKEN==0&HRS_ebb_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_ebb_w11$smoking[HRS_ebb_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_ebb_w11$smoking <- Recode(HRS_ebb_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_ebb_w11$smoking <- labelled(HRS_ds_ebb_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript EBB w11, echo=F}
vbl <- HRS_ds_ebb_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_ebb_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation EBB w11, echo=F}
AfterH <- table(HRS_ds_ebb_w11$smoking)
X<-c(sum(na.omit(HRS_ebb_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_ebb_w11_smoking$R11SMOKEN==0&HRS_ebb_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_ebb_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,length(HRS_ebb_w11_smoking$R11SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```



## MBB

### Wave 10

#### Study-specific variable description




| **Name** | `R10SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-MBB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R10SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-MBB-w10`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign MBB w10, echo=F}
opal.assign.table.tibble(o, 'HRS_mbb_w10_smoking','HRS.HRS-MBB-w10', variables=list('R10SMOKEN','R10SMOKEV'), missings = TRUE)
```

```{r local MBB w10, echo=F}
HRS_mbb_w10_smoking <- opal.execute(o,'HRS_mbb_w10_smoking')
vbl <- HRS_mbb_w10_smoking$R10SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_mbb_w10_smoking$R10SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R10SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w10_smoking, aes(x=factor(R10SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_mbb_w10_smoking, aes(x=factor(R10SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R10SMOKEV=0 into 0` 
* `R10SMOKEN=0&R10SMOKEV=1 into 1` 
* `R10SMOKEN=1 into 2`
* `NA into 999`

```{r harmo MBB w10}
HRS_ds_mbb_w10 <- tibble(id=HRS_mbb_w10_smoking$id)
HRS_ds_mbb_w10$smoking <- rep(999,length(HRS_ds_mbb_w10$id))
HRS_ds_mbb_w10$smoking[HRS_mbb_w10_smoking$R10SMOKEV==0] <- 0
HRS_ds_mbb_w10$smoking[HRS_mbb_w10_smoking$R10SMOKEN==0&HRS_mbb_w10_smoking$R10SMOKEV==1] <- 1
HRS_ds_mbb_w10$smoking[HRS_mbb_w10_smoking$R10SMOKEN==1] <- 2
#HRS_ds_mbb_w10$smoking <- Recode(HRS_mbb_w10_smoking$R10SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_mbb_w10$smoking <- labelled(HRS_ds_mbb_w10$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript MBB w10, echo=F}
vbl <- HRS_ds_mbb_w10$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_mbb_w10, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation MBB w10, echo=F}
AfterH <- table(HRS_ds_mbb_w10$smoking)
X<-c(sum(na.omit(HRS_mbb_w10_smoking$R10SMOKEV==0)),sum(na.omit(HRS_mbb_w10_smoking$R10SMOKEN==0&HRS_mbb_w10_smoking$R10SMOKEV==1)),sum(na.omit(HRS_mbb_w10_smoking$R10SMOKEN==1)))
BeforeH <- c(X,sum(is.na(HRS_mbb_w10_smoking$R10SMOKEV)))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R10SMOKEV=0->0","R10SMOKEN=0&R10SMOKEV=1->1","R10SMOKEN=1->2","NA->999") 
kable(C)
```




### Wave 11

#### Study-specific variable description




| **Name** | `R11SMOKEN`|
|-|-|
| **Label** |`smokes now` |
| **Table name** |`HRS-MBB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |








| **Name** | `R11SMOKEV`|
|-|-|
| **Label** |`smokes ever` |
| **Table name** |`HRS-MBB-w11`|
| **Categories** |`1 = Yes`<br/>`0 = No`|
| **Missings** |`NA`|
| **Description** |  |







```{r assign MBB w11, echo=F}
opal.assign.table.tibble(o, 'HRS_mbb_w11_smoking','HRS.HRS-MBB-w11', variables=list('R11SMOKEN','R11SMOKEV'), missings = TRUE)
```

```{r local MBB w11, echo=F}
HRS_mbb_w11_smoking <- opal.execute(o,'HRS_mbb_w11_smoking')
vbl <- HRS_mbb_w11_smoking$R11SMOKEN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEN")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")

vbl <- HRS_mbb_w11_smoking$R11SMOKEV
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = "R11SMOKEV")
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w11_smoking, aes(x=factor(R11SMOKEN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Current smoker") + ylab("Frequency")
ggplot(HRS_mbb_w11_smoking, aes(x=factor(R11SMOKEV))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Ever smoked") + ylab("Frequency")
```

#### Harmonisation algorithm

To compute the harmonize variable from the study-specific variable it has to be recoded as follows:

* `R11SMOKEV=0 into 0` 
* `R11SMOKEN=0&R11SMOKEV=1 into 1` 
* `R11SMOKEN=1 into 2`
* `NA into 999`

```{r harmo MBB w11}
HRS_ds_mbb_w11 <- tibble(id=HRS_mbb_w11_smoking$id)
HRS_ds_mbb_w11$smoking <- rep(999,length(HRS_ds_mbb_w11$id))
HRS_ds_mbb_w11$smoking[HRS_mbb_w11_smoking$R11SMOKEV==0] <- 0
HRS_ds_mbb_w11$smoking[HRS_mbb_w11_smoking$R11SMOKEN==0&HRS_mbb_w11_smoking$R11SMOKEV==1] <- 1
HRS_ds_mbb_w11$smoking[HRS_mbb_w11_smoking$R11SMOKEN==1] <- 2
#HRS_ds_mbb_w11$smoking <- Recode(HRS_mbb_w11_smoking$R11SMOKEN, "1 = '2';2 = '0';5 = '1';-2 = '997';-1 = '998';NA = '999' ")
HRS_ds_mbb_w11$smoking <- labelled(HRS_ds_mbb_w11$smoking, labels = c(Never_smoked=0, Ex_smoker=1, Current_smoker=2, Missing=999, Do_not_know=998, Refuse=997, Not_applicable=996, Does_not_answer=995,  Not_attempt_not_done=994, Disable_to_measure=993, Impute=992, CAPI_interviewer_error=991))
```

#### Statistical description of the new harmonised variable
```{r descript MBB w11, echo=F}
vbl <- HRS_ds_mbb_w11$smoking
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
ggplot(HRS_ds_mbb_w11, aes(x=factor(smoking))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab("Smoking") + ylab("Frequency")
```

#### Validation
```{r crosstabulation MBB w11, echo=F}
AfterH <- table(HRS_ds_mbb_w11$smoking)
X<-c(sum(na.omit(HRS_mbb_w11_smoking$R11SMOKEV==0)),sum(na.omit(HRS_mbb_w11_smoking$R11SMOKEN==0&HRS_mbb_w11_smoking$R11SMOKEV==1)),sum(na.omit(HRS_mbb_w11_smoking$R11SMOKEN==1)))
BeforeH <- c(X,length(HRS_mbb_w11_smoking$R11SMOKEV)-sum(X))
C <- rbind(BeforeH,AfterH)
colnames(C) <- c("R11SMOKEV=0->0","R11SMOKEN=0&R11SMOKEV=1->1","R11SMOKEN=1->2","NA->999") 
kable(C)
```


## Summary of descriptive statistics of the harmonised variable accross populations and waves

Two tables are generated: 

1. Percentages of categories in each harmonised variable.

2. Frequencies and percentages of individuals with different trajectories. To avoid too large table, Only trajectories with percentages larger than 0.3 are shown.

**R script:**

```{r summ}

lb.hrs <- list(hrs_w1 = HRS_ds_hrs_w1, ahead_w2 = HRS_ds_ahead_w2, coda_w4 = HRS_ds_coda_w4, wb_w4 = HRS_ds_wb_w4, ebb_w7 = HRS_ds_ebb_w7, mbb_w10 = HRS_ds_mbb_w10)

lf.hrs <- list(hrs_w2 = HRS_ds_hrs_w2, hrs_w3 = HRS_ds_hrs_w3, hrs_w4 = HRS_ds_hrs_w4, hrs_w5 = HRS_ds_hrs_w5, hrs_w6 = HRS_ds_hrs_w6, hrs_w7 = HRS_ds_hrs_w7, hrs_w8 = HRS_ds_hrs_w8, hrs_w9 = HRS_ds_hrs_w9, hrs_w10 = HRS_ds_hrs_w10, hrs_w11 = HRS_ds_hrs_w11, ahead_w3 = HRS_ds_ahead_w3, ahead_w4 = HRS_ds_ahead_w4, ahead_w5 = HRS_ds_ahead_w5, ahead_w6 = HRS_ds_ahead_w6, ahead_w7 = HRS_ds_ahead_w7, ahead_w8 = HRS_ds_ahead_w8, ahead_w9 = HRS_ds_ahead_w9, ahead_w10 = HRS_ds_ahead_w10, ahead_w11 = HRS_ds_ahead_w11, coda_w5 = HRS_ds_coda_w5, coda_w6 = HRS_ds_coda_w6, coda_w7 = HRS_ds_coda_w7, coda_w8 = HRS_ds_coda_w8, coda_w9 = HRS_ds_coda_w9, coda_w10 = HRS_ds_coda_w10, coda_w11 = HRS_ds_coda_w11, wb_w5 = HRS_ds_wb_w5, wb_w6 = HRS_ds_wb_w6, wb_w7 = HRS_ds_wb_w7, wb_w8 = HRS_ds_wb_w8, wb_w9 = HRS_ds_wb_w9, wb_w10 = HRS_ds_wb_w10, wb_w11 = HRS_ds_wb_w11, ebb_w8 = HRS_ds_ebb_w8, ebb_w9 = HRS_ds_ebb_w9, ebb_w10 = HRS_ds_ebb_w10, ebb_w11 = HRS_ds_ebb_w11, mbb_w11 = HRS_ds_mbb_w11)

###################

for(name in names(lb.hrs)) {
  m_name <- paste0("HRS_m_ds_",name)
  aux_object <- lb.hrs[[name]]
  label(lb.hrs[[name]][[2]]) <- label(aux_object[[2]]) <- ds_label # Text value assigned at the DS description, at the top
  aux_object[[2]] <- car::recode(aux_object[[2]], "miss_values_vector=NA")
  lb.hrs[[name]][[2]] <- labelled(lb.hrs[[name]][[2]], labels = cat_label)
  aux_object[[2]] <- labelled(aux_object[[2]], labels = cat_label[1:2])
  assign(m_name, aux_object)
  rm(aux_object)
}

for(name in names(lf.hrs)) {
  m_name <- paste0("HRS_m_ds_",name)
  aux_object <- lf.hrs[[name]]
  label(lf.hrs[[name]][[2]]) <- label(aux_object[[2]]) <- ds_label # Text value assigned at the DS description, at the top
  aux_object[[2]] <- car::recode(aux_object[[2]], "miss_values_vector=NA")
  lf.hrs[[name]][[2]] <- labelled(lf.hrs[[name]][[2]], labels = cat_label)
  aux_object[[2]] <- labelled(aux_object[[2]], labels = cat_label[1:2])
  assign(m_name, aux_object)
  rm(aux_object)
}

##################################

mb.hrs <- list(hrs_w1 = HRS_m_ds_hrs_w1, ahead_w2 = HRS_m_ds_ahead_w2, coda_w4 = HRS_m_ds_coda_w4, wb_w4 = HRS_m_ds_wb_w4, ebb_w7 = HRS_m_ds_ebb_w7, mbb_w10 = HRS_m_ds_mbb_w10)

mf.hrs <- list(hrs_w2 = HRS_m_ds_hrs_w2, hrs_w3 = HRS_m_ds_hrs_w3, hrs_w4 = HRS_m_ds_hrs_w4, hrs_w5 = HRS_m_ds_hrs_w5, hrs_w6 = HRS_m_ds_hrs_w6, hrs_w7 = HRS_m_ds_hrs_w7, hrs_w8 = HRS_m_ds_hrs_w8, hrs_w9 = HRS_m_ds_hrs_w9, hrs_w10 = HRS_m_ds_hrs_w10, hrs_w11 = HRS_m_ds_hrs_w11, ahead_w3 = HRS_m_ds_ahead_w3, ahead_w4 = HRS_m_ds_ahead_w4, ahead_w5 = HRS_m_ds_ahead_w5, ahead_w6 = HRS_m_ds_ahead_w6, ahead_w7 = HRS_m_ds_ahead_w7, ahead_w8 = HRS_m_ds_ahead_w8, ahead_w9 = HRS_m_ds_ahead_w9, ahead_w10 = HRS_m_ds_ahead_w10, ahead_w11 = HRS_m_ds_ahead_w11, coda_w5 = HRS_m_ds_coda_w5, coda_w6 = HRS_m_ds_coda_w6, coda_w7 = HRS_m_ds_coda_w7, coda_w8 = HRS_m_ds_coda_w8, coda_w9 = HRS_m_ds_coda_w9, coda_w10 = HRS_m_ds_coda_w10, coda_w11 = HRS_m_ds_coda_w11, wb_w5 = HRS_m_ds_wb_w5, wb_w6 = HRS_m_ds_wb_w6, wb_w7 = HRS_m_ds_wb_w7, wb_w8 = HRS_m_ds_wb_w8, wb_w9 = HRS_m_ds_wb_w9, wb_w10 = HRS_m_ds_wb_w10, wb_w11 = HRS_m_ds_wb_w11, ebb_w8 = HRS_m_ds_ebb_w8, ebb_w9 = HRS_m_ds_ebb_w9, ebb_w10 = HRS_m_ds_ebb_w10, ebb_w11 = HRS_m_ds_ebb_w11, mbb_w11 = HRS_m_ds_mbb_w11)

#################################

# Table HRS
t.hrs <- frq(lb.hrs[[1]][2])[[1]][,c(1,2,4)] 
for (i in 1:10){
  t.hrs[3+i] <- frq(lf.hrs[[i]][2])[[1]][,4] 
}
t.hrs[14,] <- c("n", "sample size", length(lb.hrs[[1]][[2]]),
             length(lf.hrs[[1]][[2]]), length(lf.hrs[[2]][[2]]), length(lf.hrs[[3]][[2]]), length(lf.hrs[[4]][[2]]), length(lf.hrs[[5]][[2]]), length(lf.hrs[[6]][[2]]), length(lf.hrs[[7]][[2]]), length(lf.hrs[[8]][[2]]), length(lf.hrs[[9]][[2]]), length(lf.hrs[[10]][[2]])
             )
names(t.hrs)<-c("val", "label", "w1", "w2", "w3", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
kable(t.hrs)

dbb <- merge(HRS_m_ds_hrs_w1[,c("id","smoking")], HRS_m_ds_hrs_w2[,c("id","smoking")], by="id", suffixes = c(".w1",".w2"), all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w3[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w4[,c("id","smoking")], by="id", suffixes = c(".w3",".w4"), all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w5[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w6[,c("id","smoking")], by="id", suffixes = c(".w5",".w6"), all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w7[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w8[,c("id","smoking")], by="id", suffixes = c(".w7",".w8"), all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w9[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w10[,c("id","smoking")], by="id", suffixes = c(".w9",".w10"), all=T)
dbb <- merge(dbb, HRS_m_ds_hrs_w11[,c("id","smoking")], by="id", all=T)
names(dbb) <- c("id", "w1", "w2", "w3", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],dbb[,4],dbb[,5],dbb[,6],dbb[,7],dbb[,8],dbb[,9],dbb[,10],dbb[,11],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

# Table AHEAD
t.ahead <- frq(lb.hrs[[2]][2])[[1]][,c(1,2,4)] 
for (i in 1:9){
  t.ahead[3+i] <- frq(lf.hrs[[i+10]][2])[[1]][,4] 
}
t.ahead[14,] <- c("n", "sample size", length(lb.hrs[[2]][[2]]),
             length(lf.hrs[[11]][[2]]), length(lf.hrs[[12]][[2]]), length(lf.hrs[[13]][[2]]), length(lf.hrs[[14]][[2]]), length(lf.hrs[[15]][[2]]), length(lf.hrs[[16]][[2]]), length(lf.hrs[[17]][[2]]), length(lf.hrs[[18]][[2]]), length(lf.hrs[[19]][[2]])
             )
names(t.ahead)<-c("val", "label", "w2", "w3", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
kable(t.ahead)

dbb <- merge(HRS_m_ds_ahead_w2[,c("id","smoking")], HRS_m_ds_ahead_w3[,c("id","smoking")], by="id", suffixes = c(".w2",".w3"), all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w4[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w5[,c("id","smoking")], by="id", suffixes = c(".w4",".w5"), all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w6[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w7[,c("id","smoking")], by="id", suffixes = c(".w6",".w7"), all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w8[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w9[,c("id","smoking")], by="id", suffixes = c(".w8",".w9"), all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w10[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_ahead_w11[,c("id","smoking")], by="id", suffixes = c(".w10",".w11"), all=T)
names(dbb) <- c("id", "w2", "w3", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],dbb[,4],dbb[,5],dbb[,6],dbb[,7],dbb[,8],dbb[,9],dbb[,10],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

# Table CODA
t.coda <- frq(lb.hrs[[3]][2])[[1]][,c(1,2,4)] 
for (i in 1:7){
  t.coda[3+i] <- frq(lf.hrs[[19+i]][2])[[1]][,4] 
}
t.coda[14,] <- c("n", "sample size", length(lb.hrs[[3]][[2]]),
             length(lf.hrs[[20]][[2]]), length(lf.hrs[[21]][[2]]), length(lf.hrs[[22]][[2]]), length(lf.hrs[[23]][[2]]), length(lf.hrs[[24]][[2]]), length(lf.hrs[[25]][[2]]), length(lf.hrs[[26]][[2]])
             )
names(t.coda)<-c("val", "label", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
kable(t.coda)

dbb <- merge(HRS_m_ds_coda_w4[,c("id","smoking")], HRS_m_ds_coda_w5[,c("id","smoking")], by="id", suffixes = c(".w4",".w5"), all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w6[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w7[,c("id","smoking")], by="id", suffixes = c(".w6",".w7"), all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w8[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w9[,c("id","smoking")], by="id", suffixes = c(".w8",".w9"), all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w10[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_coda_w11[,c("id","smoking")], by="id", suffixes = c(".w10",".w11"), all=T)
names(dbb) <- c("id", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],dbb[,4],dbb[,5],dbb[,6],dbb[,7],dbb[,8],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

# Table WB
t.wb <- frq(lb.hrs[[4]][2])[[1]][,c(1,2,4)] 
for (i in 1:7){
  t.wb[3+i] <- frq(lf.hrs[[26+i]][2])[[1]][,4] 
}
t.wb[14,] <- c("n", "sample size", length(lb.hrs[[4]][[2]]),
             length(lf.hrs[[27]][[2]]), length(lf.hrs[[28]][[2]]), length(lf.hrs[[29]][[2]]), length(lf.hrs[[30]][[2]]), length(lf.hrs[[31]][[2]]), length(lf.hrs[[32]][[2]]), length(lf.hrs[[33]][[2]])
             )
names(t.wb)<-c("val", "label", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
kable(t.wb)

dbb <- merge(HRS_m_ds_wb_w4[,c("id","smoking")], HRS_m_ds_wb_w5[,c("id","smoking")], by="id", suffixes = c(".w4",".w5"), all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w6[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w7[,c("id","smoking")], by="id", suffixes = c(".w6",".w7"), all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w8[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w9[,c("id","smoking")], by="id", suffixes = c(".w8",".w9"), all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w10[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_wb_w11[,c("id","smoking")], by="id", suffixes = c(".w10",".w11"), all=T)
names(dbb) <- c("id", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],dbb[,4],dbb[,5],dbb[,6],dbb[,7],dbb[,8],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

# Table EBB
t.ebb <- frq(lb.hrs[[5]][2])[[1]][,c(1,2,4)] 
for (i in 1:4){
  t.ebb[3+i] <- frq(lf.hrs[[33+i]][2])[[1]][,4] 
}
t.ebb[14,] <- c("n", "sample size", length(lb.hrs[[5]][[2]]),
             length(lf.hrs[[34]][[2]]), length(lf.hrs[[35]][[2]]), length(lf.hrs[[36]][[2]]), length(lf.hrs[[37]][[2]])
             )
names(t.ebb)<-c("val", "label", "w7", "w8", "w9", "w10", "w11")
kable(t.ebb)

dbb <- merge(HRS_m_ds_ebb_w7[,c("id","smoking")], HRS_m_ds_ebb_w8[,c("id","smoking")], by="id", suffixes = c(".w7",".w8"), all=T)
dbb <- merge(dbb, HRS_m_ds_ebb_w9[,c("id","smoking")], by="id", all=T)
dbb <- merge(dbb, HRS_m_ds_ebb_w10[,c("id","smoking")], by="id", suffixes = c(".w9",".w10"), all=T)
dbb <- merge(dbb, HRS_m_ds_ebb_w11[,c("id","smoking")], by="id", all=T)
names(dbb) <- c("id", "w7", "w8", "w9", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],dbb[,4],dbb[,5],dbb[,6],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

# Table MBB
t.mbb <- frq(lb.hrs[[6]][2])[[1]][,c(1,2,4)] 
for (i in 1:1){
  t.mbb[3+i] <- frq(lf.hrs[[37+i]][2])[[1]][,4] 
}
t.mbb[14,] <- c("n", "sample size", length(lb.hrs[[6]][[2]]), length(lf.hrs[[38]][[2]]))
names(t.mbb)<-c("val", "label", "w10", "w11")
kable(t.mbb)

dbb <- merge(HRS_m_ds_mbb_w10[,c("id","smoking")], HRS_m_ds_mbb_w11[,c("id","smoking")], by="id", suffixes = c(".w10",".w11"), all=T)
names(dbb) <- c("id", "w10", "w11")
v.dbb <- paste(dbb[,2],dbb[,3],sep="")
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

```



# Quality estimation


<!-- ########################################################## --> 
<!-- # Save -->
```{r save, include=FALSE, echo=F}


for(name in names(lb.hrs)){
  smoking <- lb.hrs[[name]]
  save(smoking, file = paste0(datafolder,name,"/smoking.RData"))
}

for(name in names(lf.hrs)) {
  smoking <- lf.hrs[[name]]
  save(smoking, file = paste0(datafolder,name,"/smoking.RData"))
}


```
<!-- ########################################################## --> 






<!-- ########################################################## -->
<!--- # Close OPAL R Session -->
```{r closeRsession, echo=FALSE}
opal.logout(o)
```




