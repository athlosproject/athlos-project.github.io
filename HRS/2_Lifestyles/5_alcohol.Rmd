---
title: "Alcohol drinking"
output:
  html_document:
    highlight: tango
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

<!-- ########################################################## --> 
<!-- # Installation, loading packages -->
```{r setup, include=FALSE}
source("../../setup_iago.r")
```
<!-- ########################################################## --> 
<!-- # Loading DS description -->
```{r main, child='../../_DS_Rmd/alcoholDS.Rmd'}
```
```{r global, echo=F}
source('../../_DS_Rmd/alcoholDS.R')
```



# Data process


## HRS

### Wave 1

#### Study-specific variable description

| **Name** | `R1DRINK` | `R1DRINKR`|
|-|-|-|
| **Label** | `R1DRINK:W1 R ever drinks any alcohol`| `R1DRINKR:W1 R range of # drinks/day`|
| **Table name**  | `HRS-HRS-w1`| `HRS-HRS-w1`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = Doesnt drink`<br/>`1 = It 1/day`<br/>`2 = 1-2/day`<br/>`3 = 3-4/day`<br/>`4 = 5+/day`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w1, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w1','HRS.HRS-HRS-w1',variables=list('R1DRINK', 'R1DRINKR'), missings = T)
HRS_hrs_w1 <- opal.execute(o,'HRS_hrs_w1')

```

```{r local hrs_w1, echo=F}

vbl <- HRS_hrs_w1$R1DRINKR
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w1)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w1, aes(x=factor(R1DRINKR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w1$R1DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w1)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w1, aes(x=factor(R1DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")





```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`

To compute `freq_oh` from the study-specific variable `RWDRINKR` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `2,3,4 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w1}

# Categorical variable harmonization
HRS_ds_hrs_w1 <- tibble(id=HRS_hrs_w1$id)
HRS_ds_hrs_w1$current_oh <- car::recode(HRS_hrs_w1$R1DRINK, "NA=999")
HRS_ds_hrs_w1$freq_oh <- car::recode(HRS_hrs_w1$R1DRINKR, "c(3,4)=2; NA=999")


```


#### Statistics of the new harmonized variable

```{r descript hrs_w1, echo=F}

vbl <- HRS_ds_hrs_w1$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w1, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w1$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w1, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation hrs_w1, echo=F}






rm(HRS_hrs_w1)

```



### Wave 2

#### Study-specific variable description

| **Name** | `R2DRINK` | `R2DRINKR`|
|-|-|-|
| **Label** | `R2DRINK:W2 R ever drinks any alcohol`| `R2DRINKR:W2 R range of # drinks/day`|
| **Table name**  | `HRS-HRS-w2`| `HRS-HRS-w2`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = Doesnt drink`<br/>`1 = It 1/day`<br/>`2 = 1-2/day`<br/>`3 = 3-4/day`<br/>`4 = 5+/day`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w2, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w2','HRS.HRS-HRS-w2',variables=list('R2DRINK', 'R2DRINKR'), missings = T)
HRS_hrs_w2 <- opal.execute(o,'HRS_hrs_w2')












```

```{r local hrs_w2, echo=F}

vbl <- HRS_hrs_w2$R2DRINKR
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w2)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w2, aes(x=factor(R2DRINKR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w2$R2DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w2)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w2, aes(x=factor(R2DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")








```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `NA into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKR` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `2,3,4 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w2}

# Categorical variable harmonization
HRS_ds_hrs_w2 <- tibble(id=HRS_hrs_w2$id)
HRS_ds_hrs_w2$current_oh <- car::recode(HRS_hrs_w2$R2DRINK, "NA=999")
HRS_ds_hrs_w2$freq_oh <- car::recode(HRS_hrs_w2$R2DRINKR, "c(3,4)=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript hrs_w2, echo=F}

vbl <- HRS_ds_hrs_w2$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w2, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w2$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w2, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w2, echo=F, results='asis'}






rm(HRS_hrs_w2)

```




### Wave 3

#### Study-specific variable description

| **Name** | `R3DRINK` | `R3DRINKN`|
|-|-|-|
| **Label** | `R3DRINK:W3 R ever drinks any alcohol`| `R3DRINKN:W3 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w3`| `HRS-HRS-w3`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w3, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w3','HRS.HRS-HRS-w3',variables=list('R3DRINK', 'R3DRINKN'), missings = T)
HRS_hrs_w3 <- opal.execute(o,'HRS_hrs_w3')












```

```{r local hrs_w3, echo=F}

vbl <- HRS_hrs_w3$R3DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w3)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w3, aes(x=factor(R3DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w3$R3DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w3)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w3, aes(x=factor(R3DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")






```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w3}

# Categorical variable harmonization
HRS_ds_hrs_w3 <- tibble(id=HRS_hrs_w3$id)
HRS_ds_hrs_w3$current_oh <- car::recode(HRS_hrs_w3$R3DRINK, "NA=999")
HRS_ds_hrs_w3$freq_oh <- car::recode(HRS_hrs_w3$R3DRINKN, "2:hi=2; NA=999")


```


#### Statistics of the new harmonized variable

```{r descript hrs_w3, echo=F}

vbl <- HRS_ds_hrs_w3$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w3, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w3$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w3, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w3, echo=F, results='asis'}







rm(HRS_hrs_w3)

```




### Wave 4

#### Study-specific variable description

| **Name** | `R4DRINK` | `R4DRINKN`|
|-|-|-|
| **Label** | `R4DRINK:W4 R ever drinks any alcohol`| `R4DRINKN:W4 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w4`| `HRS-HRS-w4`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w4, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w4','HRS.HRS-HRS-w4',variables=list('R4DRINK', 'R4DRINKN'), missings = T)
HRS_hrs_w4 <- opal.execute(o,'HRS_hrs_w4')












```

```{r local hrs_w4, echo=F}

vbl <- HRS_hrs_w4$R4DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w4)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w4, aes(x=factor(R4DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w4$R4DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w4)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w4, aes(x=factor(R4DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")






```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w4}


# Categorical variable harmonization
HRS_ds_hrs_w4 <- tibble(id=HRS_hrs_w4$id)
HRS_ds_hrs_w4$current_oh <- car::recode(HRS_hrs_w4$R4DRINK, "NA=999")
HRS_ds_hrs_w4$freq_oh <- car::recode(HRS_hrs_w4$R4DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w4, echo=F}

vbl <- HRS_ds_hrs_w4$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w4, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w4$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w4, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w4, echo=F, results='asis'}







rm(HRS_hrs_w4)

```



### Wave 5

#### Study-specific variable description

| **Name** | `R5DRINK` | `R5DRINKN`|
|-|-|-|
| **Label** | `R5DRINK:W5 R ever drinks any alcohol`| `R5DRINKN:W5 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w5`| `HRS-HRS-w5`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w5, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w5','HRS.HRS-HRS-w5',variables=list('R5DRINK', 'R5DRINKN'), missings = T)
HRS_hrs_w5 <- opal.execute(o,'HRS_hrs_w5')












```

```{r local hrs_w5, echo=F}

vbl <- HRS_hrs_w5$R5DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w5)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w5, aes(x=factor(R5DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w5$R5DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w5)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w5, aes(x=factor(R5DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w5}




# Categorical variable harmonization
HRS_ds_hrs_w5 <- tibble(id=HRS_hrs_w5$id)
HRS_ds_hrs_w5$current_oh <- car::recode(HRS_hrs_w5$R5DRINK, "NA=999")
HRS_ds_hrs_w5$freq_oh <- car::recode(HRS_hrs_w5$R5DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w5, echo=F}

vbl <- HRS_ds_hrs_w5$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w5, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w5$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w5, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w5, echo=F, results='asis'}







rm(HRS_hrs_w5)

```



### Wave 6

#### Study-specific variable description

| **Name** | `R6DRINK` | `R6DRINKN`|
|-|-|-|
| **Label** | `R6DRINK:W6 R ever drinks any alcohol`| `R6DRINKN:W6 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w6`| `HRS-HRS-w6`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w6, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w6','HRS.HRS-HRS-w6',variables=list('R6DRINK', 'R6DRINKN'), missings = T)
HRS_hrs_w6 <- opal.execute(o,'HRS_hrs_w6')












```

```{r local hrs_w6, echo=F}

vbl <- HRS_hrs_w6$R6DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w6)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w6, aes(x=factor(R6DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w6$R6DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w6)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w6, aes(x=factor(R6DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w6}




# Categorical variable harmonization
HRS_ds_hrs_w6 <- tibble(id=HRS_hrs_w6$id)
HRS_ds_hrs_w6$current_oh <- car::recode(HRS_hrs_w6$R6DRINK, "NA=999")
HRS_ds_hrs_w6$freq_oh <- car::recode(HRS_hrs_w6$R6DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w6, echo=F}

vbl <- HRS_ds_hrs_w6$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w6, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w6$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w6, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w6, echo=F, results='asis'}







rm(HRS_hrs_w6)

```




### Wave 7

#### Study-specific variable description

| **Name** | `R7DRINK` | `R7DRINKN`|
|-|-|-|
| **Label** | `R7DRINK:W7 R ever drinks any alcohol`| `R7DRINKN:W7 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w7`| `HRS-HRS-w7`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w7, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w7','HRS.HRS-HRS-w7',variables=list('R7DRINK', 'R7DRINKN'), missings = T)
HRS_hrs_w7 <- opal.execute(o,'HRS_hrs_w7')












```

```{r local hrs_w7, echo=F}

vbl <- HRS_hrs_w7$R7DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w7)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w7, aes(x=factor(R7DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w7$R7DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w7)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w7, aes(x=factor(R7DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w7}




# Categorical variable harmonization
HRS_ds_hrs_w7 <- tibble(id=HRS_hrs_w7$id)
HRS_ds_hrs_w7$current_oh <- car::recode(HRS_hrs_w7$R7DRINK, "NA=999")
HRS_ds_hrs_w7$freq_oh <- car::recode(HRS_hrs_w7$R7DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript hrs_w7, echo=F}

vbl <- HRS_ds_hrs_w7$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w7, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w7$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w7, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w7, echo=F, results='asis'}







rm(HRS_hrs_w7)

```



### Wave 8

#### Study-specific variable description

| **Name** | `R8DRINK` | `R8DRINKN`|
|-|-|-|
| **Label** | `R8DRINK:W8 R ever drinks any alcohol`| `R8DRINKN:W8 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w8`| `HRS-HRS-w8`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w8, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w8','HRS.HRS-HRS-w8',variables=list('R8DRINK', 'R8DRINKN'), missings = T)
HRS_hrs_w8 <- opal.execute(o,'HRS_hrs_w8')












```

```{r local hrs_w8, echo=F}

vbl <- HRS_hrs_w8$R8DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w8)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w8, aes(x=factor(R8DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w8$R8DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w8)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w8, aes(x=factor(R8DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w8}




# Categorical variable harmonization
HRS_ds_hrs_w8 <- tibble(id=HRS_hrs_w8$id)
HRS_ds_hrs_w8$current_oh <- car::recode(HRS_hrs_w8$R8DRINK, "NA=999")
HRS_ds_hrs_w8$freq_oh <- car::recode(HRS_hrs_w8$R8DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w8, echo=F}

vbl <- HRS_ds_hrs_w8$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w8, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w8$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w8, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w8, echo=F, results='asis'}







rm(HRS_hrs_w8)

```



### Wave 9

#### Study-specific variable description

| **Name** | `R9DRINK` | `R9DRINKN`|
|-|-|-|
| **Label** | `R9DRINK:W9 R ever drinks any alcohol`| `R9DRINKN:W9 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w9`| `HRS-HRS-w9`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w9, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w9','HRS.HRS-HRS-w9',variables=list('R9DRINK', 'R9DRINKN'), missings = T)
HRS_hrs_w9 <- opal.execute(o,'HRS_hrs_w9')












```

```{r local hrs_w9, echo=F}

vbl <- HRS_hrs_w9$R9DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w9)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w9, aes(x=factor(R9DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w9$R9DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w9)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w9, aes(x=factor(R9DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w9}




# Categorical variable harmonization
HRS_ds_hrs_w9 <- tibble(id=HRS_hrs_w9$id)
HRS_ds_hrs_w9$current_oh <- car::recode(HRS_hrs_w9$R9DRINK, "NA=999")
HRS_ds_hrs_w9$freq_oh <- car::recode(HRS_hrs_w9$R9DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w9, echo=F}

vbl <- HRS_ds_hrs_w9$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w9, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w9$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w9, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w9, echo=F, results='asis'}







rm(HRS_hrs_w9)

```




### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w10`| `HRS-HRS-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w10','HRS.HRS-HRS-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_hrs_w10 <- opal.execute(o,'HRS_hrs_w10')












```

```{r local hrs_w10, echo=F}

vbl <- HRS_hrs_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w10}




# Categorical variable harmonization
HRS_ds_hrs_w10 <- tibble(id=HRS_hrs_w10$id)
HRS_ds_hrs_w10$current_oh <- car::recode(HRS_hrs_w10$R10DRINK, "NA=999")
HRS_ds_hrs_w10$freq_oh <- car::recode(HRS_hrs_w10$R10DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w10, echo=F}

vbl <- HRS_ds_hrs_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w10, echo=F, results='asis'}







rm(HRS_hrs_w10)

```



### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-HRS-w11`| `HRS-HRS-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign hrs_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_hrs_w11','HRS.HRS-HRS-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_hrs_w11 <- opal.execute(o,'HRS_hrs_w11')












```

```{r local hrs_w11, echo=F}

vbl <- HRS_hrs_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_hrs_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_hrs_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_hrs_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo hrs_w11}




# Categorical variable harmonization
HRS_ds_hrs_w11 <- tibble(id=HRS_hrs_w11$id)
HRS_ds_hrs_w11$current_oh <- car::recode(HRS_hrs_w11$R11DRINK, "NA=999")
HRS_ds_hrs_w11$freq_oh <- car::recode(HRS_hrs_w11$R11DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript hrs_w11, echo=F}

vbl <- HRS_ds_hrs_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_hrs_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_hrs_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation hrs_w11, echo=F, results='asis'}







rm(HRS_hrs_w11)

```



## AHEAD


### Wave 2

#### Study-specific variable description

| **Name** | `R2DRINK` | `R2DRINKR`|
|-|-|-|
| **Label** | `R2DRINK:W2 R ever drinks any alcohol`| `R2DRINKR:W2 R range of # drinks/day`|
| **Table name**  | `HRS-AHEAD-w2`| `HRS-AHEAD-w2`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = Doesnt drink`<br/>`1 = It 1/day`<br/>`2 = 1-2/day`<br/>`3 = 3-4/day`<br/>`4 = 5+/day`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w2, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w2','HRS.HRS-AHEAD-w2',variables=list('R2DRINK', 'R2DRINKR'), missings = T)
HRS_ahead_w2 <- opal.execute(o,'HRS_ahead_w2')

```

```{r local ahead_w2, echo=F}

vbl <- HRS_ahead_w2$R2DRINKR
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w2)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w2, aes(x=factor(R2DRINKR))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w2$R2DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w2)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w2, aes(x=factor(R2DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`



To compute `freq_oh` from the study-specific variable `RWDRINKR` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `2,3,4 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w2}

# Categorical variable harmonization
HRS_ds_ahead_w2 <- tibble(id=HRS_ahead_w2$id)
HRS_ds_ahead_w2$current_oh <- car::recode(HRS_ahead_w2$R2DRINK, "NA=999")
HRS_ds_ahead_w2$freq_oh <- car::recode(HRS_ahead_w2$R2DRINKR, "c(3,4)=2; NA=999")

```


#### Statistics of the new harmonized variable

```{r descript ahead_w2, echo=F}

vbl <- HRS_ds_ahead_w2$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w2, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w2$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w2, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation ahead_w2, echo=F}






rm(HRS_ahead_w2)

```



### Wave 3

#### Study-specific variable description

| **Name** | `R3DRINK` | `R3DRINKN`|
|-|-|-|
| **Label** | `R3DRINK:W3 R ever drinks any alcohol`| `R3DRINKN:W3 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w3`| `HRS-AHEAD-w3`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w3, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w3','HRS.HRS-AHEAD-w3',variables=list('R3DRINK', 'R3DRINKN'), missings = T)
HRS_ahead_w3 <- opal.execute(o,'HRS_ahead_w3')












```

```{r local ahead_w3, echo=F}

vbl <- HRS_ahead_w3$R3DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w3)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w3, aes(x=factor(R3DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w3$R3DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w3)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w3, aes(x=factor(R3DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w3}




# Categorical variable harmonization
HRS_ds_ahead_w3 <- tibble(id=HRS_ahead_w3$id)
HRS_ds_ahead_w3$current_oh <- car::recode(HRS_ahead_w3$R3DRINK, "NA=999")
HRS_ds_ahead_w3$freq_oh <- car::recode(HRS_ahead_w3$R3DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript ahead_w3, echo=F}

vbl <- HRS_ds_ahead_w3$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w3, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w3$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w3, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w3, echo=F, results='asis'}







rm(HRS_ahead_w3)

```




### Wave 4

#### Study-specific variable description

| **Name** | `R4DRINK` | `R4DRINKN`|
|-|-|-|
| **Label** | `R4DRINK:W4 R ever drinks any alcohol`| `R4DRINKN:W4 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w4`| `HRS-AHEAD-w4`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w4, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w4','HRS.HRS-AHEAD-w4',variables=list('R4DRINK', 'R4DRINKN'), missings = T)
HRS_ahead_w4 <- opal.execute(o,'HRS_ahead_w4')












```

```{r local ahead_w4, echo=F}

vbl <- HRS_ahead_w4$R4DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w4)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w4, aes(x=factor(R4DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w4$R4DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w4)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w4, aes(x=factor(R4DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w4}




# Categorical variable harmonization
HRS_ds_ahead_w4 <- tibble(id=HRS_ahead_w4$id)
HRS_ds_ahead_w4$current_oh <- car::recode(HRS_ahead_w4$R4DRINK, "NA=999")
HRS_ds_ahead_w4$freq_oh <- car::recode(HRS_ahead_w4$R4DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ahead_w4, echo=F}

vbl <- HRS_ds_ahead_w4$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w4, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w4$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w4, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w4, echo=F, results='asis'}







rm(HRS_ahead_w4)

```




### Wave 5

#### Study-specific variable description

| **Name** | `R5DRINK` | `R5DRINKN`|
|-|-|-|
| **Label** | `R5DRINK:W5 R ever drinks any alcohol`| `R5DRINKN:W5 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w5`| `HRS-AHEAD-w5`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w5, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w5','HRS.HRS-AHEAD-w5',variables=list('R5DRINK', 'R5DRINKN'), missings = T)
HRS_ahead_w5 <- opal.execute(o,'HRS_ahead_w5')












```

```{r local ahead_w5, echo=F}

vbl <- HRS_ahead_w5$R5DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w5)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w5, aes(x=factor(R5DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w5$R5DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w5)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w5, aes(x=factor(R5DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w5}




# Categorical variable harmonization
HRS_ds_ahead_w5 <- tibble(id=HRS_ahead_w5$id)
HRS_ds_ahead_w5$current_oh <- car::recode(HRS_ahead_w5$R5DRINK, "NA=999")
HRS_ds_ahead_w5$freq_oh <- car::recode(HRS_ahead_w5$R5DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript ahead_w5, echo=F}

vbl <- HRS_ds_ahead_w5$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w5, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w5$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w5, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w5, echo=F, results='asis'}







rm(HRS_ahead_w5)

```



### Wave 6

#### Study-specific variable description

| **Name** | `R6DRINK` | `R6DRINKN`|
|-|-|-|
| **Label** | `R6DRINK:W6 R ever drinks any alcohol`| `R6DRINKN:W6 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w6`| `HRS-AHEAD-w6`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w6, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w6','HRS.HRS-AHEAD-w6',variables=list('R6DRINK', 'R6DRINKN'), missings = T)
HRS_ahead_w6 <- opal.execute(o,'HRS_ahead_w6')












```

```{r local ahead_w6, echo=F}

vbl <- HRS_ahead_w6$R6DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w6)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w6, aes(x=factor(R6DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w6$R6DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w6)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w6, aes(x=factor(R6DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w6}




# Categorical variable harmonization
HRS_ds_ahead_w6 <- tibble(id=HRS_ahead_w6$id)
HRS_ds_ahead_w6$current_oh <- car::recode(HRS_ahead_w6$R6DRINK, "NA=999")
HRS_ds_ahead_w6$freq_oh <- car::recode(HRS_ahead_w6$R6DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ahead_w6, echo=F}

vbl <- HRS_ds_ahead_w6$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w6, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w6$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w6, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w6, echo=F, results='asis'}







rm(HRS_ahead_w6)

```



### Wave 7

#### Study-specific variable description

| **Name** | `R7DRINK` | `R7DRINKN`|
|-|-|-|
| **Label** | `R7DRINK:W7 R ever drinks any alcohol`| `R7DRINKN:W7 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w7`| `HRS-AHEAD-w7`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w7, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w7','HRS.HRS-AHEAD-w7',variables=list('R7DRINK', 'R7DRINKN'), missings = T)
HRS_ahead_w7 <- opal.execute(o,'HRS_ahead_w7')












```

```{r local ahead_w7, echo=F}

vbl <- HRS_ahead_w7$R7DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w7)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w7, aes(x=factor(R7DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w7$R7DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w7)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w7, aes(x=factor(R7DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")



```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w7}




# Categorical variable harmonization
HRS_ds_ahead_w7 <- tibble(id=HRS_ahead_w7$id)
HRS_ds_ahead_w7$current_oh <- car::recode(HRS_ahead_w7$R7DRINK, "NA=999")
HRS_ds_ahead_w7$freq_oh <- car::recode(HRS_ahead_w7$R7DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript ahead_w7, echo=F}

vbl <- HRS_ds_ahead_w7$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w7, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w7$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w7, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w7, echo=F, results='asis'}







rm(HRS_ahead_w7)

```




### Wave 8

#### Study-specific variable description

| **Name** | `R8DRINK` | `R8DRINKN`|
|-|-|-|
| **Label** | `R8DRINK:W8 R ever drinks any alcohol`| `R8DRINKN:W8 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w8`| `HRS-AHEAD-w8`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w8, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w8','HRS.HRS-AHEAD-w8',variables=list('R8DRINK', 'R8DRINKN'), missings = T)
HRS_ahead_w8 <- opal.execute(o,'HRS_ahead_w8')












```

```{r local ahead_w8, echo=F}

vbl <- HRS_ahead_w8$R8DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w8)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w8, aes(x=factor(R8DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w8$R8DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w8)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w8, aes(x=factor(R8DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")



```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w8}




# Categorical variable harmonization
HRS_ds_ahead_w8 <- tibble(id=HRS_ahead_w8$id)
HRS_ds_ahead_w8$current_oh <- car::recode(HRS_ahead_w8$R8DRINK, "NA=999")
HRS_ds_ahead_w8$freq_oh <- car::recode(HRS_ahead_w8$R8DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript ahead_w8, echo=F}

vbl <- HRS_ds_ahead_w8$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w8, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w8$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w8, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w8, echo=F, results='asis'}







rm(HRS_ahead_w8)

```



### Wave 9

#### Study-specific variable description

| **Name** | `R9DRINK` | `R9DRINKN`|
|-|-|-|
| **Label** | `R9DRINK:W9 R ever drinks any alcohol`| `R9DRINKN:W9 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w9`| `HRS-AHEAD-w9`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w9, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w9','HRS.HRS-AHEAD-w9',variables=list('R9DRINK', 'R9DRINKN'), missings = T)
HRS_ahead_w9 <- opal.execute(o,'HRS_ahead_w9')












```

```{r local ahead_w9, echo=F}

vbl <- HRS_ahead_w9$R9DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w9)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w9, aes(x=factor(R9DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w9$R9DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w9)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w9, aes(x=factor(R9DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w9}




# Categorical variable harmonization
HRS_ds_ahead_w9 <- tibble(id=HRS_ahead_w9$id)
HRS_ds_ahead_w9$current_oh <- car::recode(HRS_ahead_w9$R9DRINK, "NA=999")
HRS_ds_ahead_w9$freq_oh <- car::recode(HRS_ahead_w9$R9DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ahead_w9, echo=F}

vbl <- HRS_ds_ahead_w9$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w9, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w9$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w9, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w9, echo=F, results='asis'}







rm(HRS_ahead_w9)

```



### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w10`| `HRS-AHEAD-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w10','HRS.HRS-AHEAD-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_ahead_w10 <- opal.execute(o,'HRS_ahead_w10')












```

```{r local ahead_w10, echo=F}

vbl <- HRS_ahead_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w10}




# Categorical variable harmonization
HRS_ds_ahead_w10 <- tibble(id=HRS_ahead_w10$id)
HRS_ds_ahead_w10$current_oh <- car::recode(HRS_ahead_w10$R10DRINK, "NA=999")
HRS_ds_ahead_w10$freq_oh <- car::recode(HRS_ahead_w10$R10DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ahead_w10, echo=F}

vbl <- HRS_ds_ahead_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w10, echo=F, results='asis'}







rm(HRS_ahead_w10)

```




### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-AHEAD-w11`| `HRS-AHEAD-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ahead_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_ahead_w11','HRS.HRS-AHEAD-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_ahead_w11 <- opal.execute(o,'HRS_ahead_w11')












```

```{r local ahead_w11, echo=F}

vbl <- HRS_ahead_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ahead_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ahead_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ahead_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ahead_w11}




# Categorical variable harmonization
HRS_ds_ahead_w11 <- tibble(id=HRS_ahead_w11$id)
HRS_ds_ahead_w11$current_oh <- car::recode(HRS_ahead_w11$R11DRINK, "NA=999")
HRS_ds_ahead_w11$freq_oh <- car::recode(HRS_ahead_w11$R11DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ahead_w11, echo=F}

vbl <- HRS_ds_ahead_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ahead_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ahead_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ahead_w11, echo=F, results='asis'}







rm(HRS_ahead_w11)

```



## CODA

### Wave 4

#### Study-specific variable description

| **Name** | `R4DRINK` | `R4DRINKN`|
|-|-|-|
| **Label** | `R4DRINK:W4 R ever drinks any alcohol`| `R4DRINKN:W4 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w4`| `HRS-CODA-w4`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w4, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w4','HRS.HRS-CODA-w4',variables=list('R4DRINK', 'R4DRINKN'), missings = T)
HRS_coda_w4 <- opal.execute(o,'HRS_coda_w4')

```

```{r local coda_w4, echo=F}

vbl <- HRS_coda_w4$R4DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w4)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w4, aes(x=factor(R4DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w4$R4DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w4)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w4, aes(x=factor(R4DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`



To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w4}

# Categorical variable harmonization
HRS_ds_coda_w4 <- tibble(id=HRS_coda_w4$id)
HRS_ds_coda_w4$current_oh <- car::recode(HRS_coda_w4$R4DRINK, "NA=999")
HRS_ds_coda_w4$freq_oh <- car::recode(HRS_coda_w4$R4DRINKN, "2:hi=2; NA=999")

```


#### Statistics of the new harmonized variable

```{r descript coda_w4, echo=F}

vbl <- HRS_ds_coda_w4$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w4, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w4$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w4, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation coda_w4, echo=F}






rm(HRS_coda_w4)

```



### Wave 5

#### Study-specific variable description

| **Name** | `R5DRINK` | `R5DRINKN`|
|-|-|-|
| **Label** | `R5DRINK:W5 R ever drinks any alcohol`| `R5DRINKN:W5 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w5`| `HRS-CODA-w5`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w5, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w5','HRS.HRS-CODA-w5',variables=list('R5DRINK', 'R5DRINKN'), missings = T)
HRS_coda_w5 <- opal.execute(o,'HRS_coda_w5')












```

```{r local coda_w5, echo=F}

vbl <- HRS_coda_w5$R5DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w5)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w5, aes(x=factor(R5DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w5$R5DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w5)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w5, aes(x=factor(R5DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w5}




# Categorical variable harmonization
HRS_ds_coda_w5 <- tibble(id=HRS_coda_w5$id)
HRS_ds_coda_w5$current_oh <- car::recode(HRS_coda_w5$R5DRINK, "NA=999")
HRS_ds_coda_w5$freq_oh <- car::recode(HRS_coda_w5$R5DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w5, echo=F}

vbl <- HRS_ds_coda_w5$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w5, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w5$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w5, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w5, echo=F, results='asis'}







rm(HRS_coda_w5)

```




### Wave 6

#### Study-specific variable description

| **Name** | `R6DRINK` | `R6DRINKN`|
|-|-|-|
| **Label** | `R6DRINK:W6 R ever drinks any alcohol`| `R6DRINKN:W6 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w6`| `HRS-CODA-w6`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w6, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w6','HRS.HRS-CODA-w6',variables=list('R6DRINK', 'R6DRINKN'), missings = T)
HRS_coda_w6 <- opal.execute(o,'HRS_coda_w6')












```

```{r local coda_w6, echo=F}

vbl <- HRS_coda_w6$R6DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w6)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w6, aes(x=factor(R6DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w6$R6DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w6)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w6, aes(x=factor(R6DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w6}




# Categorical variable harmonization
HRS_ds_coda_w6 <- tibble(id=HRS_coda_w6$id)
HRS_ds_coda_w6$current_oh <- car::recode(HRS_coda_w6$R6DRINK, "NA=999")
HRS_ds_coda_w6$freq_oh <- car::recode(HRS_coda_w6$R6DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w6, echo=F}

vbl <- HRS_ds_coda_w6$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w6, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w6$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w6, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w6, echo=F, results='asis'}







rm(HRS_coda_w6)

```




### Wave 7

#### Study-specific variable description

| **Name** | `R7DRINK` | `R7DRINKN`|
|-|-|-|
| **Label** | `R7DRINK:W7 R ever drinks any alcohol`| `R7DRINKN:W7 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w7`| `HRS-CODA-w7`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w7, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w7','HRS.HRS-CODA-w7',variables=list('R7DRINK', 'R7DRINKN'), missings = T)
HRS_coda_w7 <- opal.execute(o,'HRS_coda_w7')












```

```{r local coda_w7, echo=F}

vbl <- HRS_coda_w7$R7DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w7)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w7, aes(x=factor(R7DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w7$R7DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w7)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w7, aes(x=factor(R7DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w7}




# Categorical variable harmonization
HRS_ds_coda_w7 <- tibble(id=HRS_coda_w7$id)
HRS_ds_coda_w7$current_oh <- car::recode(HRS_coda_w7$R7DRINK, "NA=999")
HRS_ds_coda_w7$freq_oh <- car::recode(HRS_coda_w7$R7DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w7, echo=F}

vbl <- HRS_ds_coda_w7$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w7, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w7$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w7, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w7, echo=F, results='asis'}







rm(HRS_coda_w7)

```



### Wave 8

#### Study-specific variable description

| **Name** | `R8DRINK` | `R8DRINKN`|
|-|-|-|
| **Label** | `R8DRINK:W8 R ever drinks any alcohol`| `R8DRINKN:W8 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w8`| `HRS-CODA-w8`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w8, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w8','HRS.HRS-CODA-w8',variables=list('R8DRINK', 'R8DRINKN'), missings = T)
HRS_coda_w8 <- opal.execute(o,'HRS_coda_w8')












```

```{r local coda_w8, echo=F}

vbl <- HRS_coda_w8$R8DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w8)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w8, aes(x=factor(R8DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w8$R8DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w8)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w8, aes(x=factor(R8DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w8}




# Categorical variable harmonization
HRS_ds_coda_w8 <- tibble(id=HRS_coda_w8$id)
HRS_ds_coda_w8$current_oh <- car::recode(HRS_coda_w8$R8DRINK, "NA=999")
HRS_ds_coda_w8$freq_oh <- car::recode(HRS_coda_w8$R8DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w8, echo=F}

vbl <- HRS_ds_coda_w8$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w8, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w8$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w8, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w8, echo=F, results='asis'}







rm(HRS_coda_w8)

```



### Wave 9

#### Study-specific variable description

| **Name** | `R9DRINK` | `R9DRINKN`|
|-|-|-|
| **Label** | `R9DRINK:W9 R ever drinks any alcohol`| `R9DRINKN:W9 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w9`| `HRS-CODA-w9`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w9, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w9','HRS.HRS-CODA-w9',variables=list('R9DRINK', 'R9DRINKN'), missings = T)
HRS_coda_w9 <- opal.execute(o,'HRS_coda_w9')












```

```{r local coda_w9, echo=F}

vbl <- HRS_coda_w9$R9DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w9)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w9, aes(x=factor(R9DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w9$R9DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w9)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w9, aes(x=factor(R9DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w9}




# Categorical variable harmonization
HRS_ds_coda_w9 <- tibble(id=HRS_coda_w9$id)
HRS_ds_coda_w9$current_oh <- car::recode(HRS_coda_w9$R9DRINK, "NA=999")
HRS_ds_coda_w9$freq_oh <- car::recode(HRS_coda_w9$R9DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w9, echo=F}

vbl <- HRS_ds_coda_w9$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w9, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w9$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w9, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w9, echo=F, results='asis'}







rm(HRS_coda_w9)

```




### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w10`| `HRS-CODA-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w10','HRS.HRS-CODA-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_coda_w10 <- opal.execute(o,'HRS_coda_w10')












```

```{r local coda_w10, echo=F}

vbl <- HRS_coda_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w10}




# Categorical variable harmonization
HRS_ds_coda_w10 <- tibble(id=HRS_coda_w10$id)
HRS_ds_coda_w10$current_oh <- car::recode(HRS_coda_w10$R10DRINK, "NA=999")
HRS_ds_coda_w10$freq_oh <- car::recode(HRS_coda_w10$R10DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript coda_w10, echo=F}

vbl <- HRS_ds_coda_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w10, echo=F, results='asis'}







rm(HRS_coda_w10)

```



### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-CODA-w11`| `HRS-CODA-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign coda_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_coda_w11','HRS.HRS-CODA-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_coda_w11 <- opal.execute(o,'HRS_coda_w11')












```

```{r local coda_w11, echo=F}

vbl <- HRS_coda_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_coda_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_coda_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_coda_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo coda_w11}




# Categorical variable harmonization
HRS_ds_coda_w11 <- tibble(id=HRS_coda_w11$id)
HRS_ds_coda_w11$current_oh <- car::recode(HRS_coda_w11$R11DRINK, "NA=999")
HRS_ds_coda_w11$freq_oh <- car::recode(HRS_coda_w11$R11DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript coda_w11, echo=F}

vbl <- HRS_ds_coda_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_coda_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_coda_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation coda_w11, echo=F, results='asis'}







rm(HRS_coda_w11)

```



## WB

### Wave 4

#### Study-specific variable description

| **Name** | `R4DRINK` | `R4DRINKN`|
|-|-|-|
| **Label** | `R4DRINK:W4 R ever drinks any alcohol`| `R4DRINKN:W4 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w4`| `HRS-WB-w4`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w4, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w4','HRS.HRS-WB-w4',variables=list('R4DRINK', 'R4DRINKN'), missings = T)
HRS_wb_w4 <- opal.execute(o,'HRS_wb_w4')

```

```{r local wb_w4, echo=F}

vbl <- HRS_wb_w4$R4DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w4)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w4, aes(x=factor(R4DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w4$R4DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w4)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w4, aes(x=factor(R4DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`



To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w4}

# Categorical variable harmonization
HRS_ds_wb_w4 <- tibble(id=HRS_wb_w4$id)
HRS_ds_wb_w4$current_oh <- car::recode(HRS_wb_w4$R4DRINK, "NA=999")
HRS_ds_wb_w4$freq_oh <- car::recode(HRS_wb_w4$R4DRINKN, "2:hi=2; NA=999")

```


#### Statistics of the new harmonized variable

```{r descript wb_w4, echo=F}

vbl <- HRS_ds_wb_w4$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w4, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w4$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w4, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation wb_w4, echo=F}






rm(HRS_wb_w4)

```



### Wave 5

#### Study-specific variable description

| **Name** | `R5DRINK` | `R5DRINKN`|
|-|-|-|
| **Label** | `R5DRINK:W5 R ever drinks any alcohol`| `R5DRINKN:W5 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w5`| `HRS-WB-w5`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w5, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w5','HRS.HRS-WB-w5',variables=list('R5DRINK', 'R5DRINKN'), missings = T)
HRS_wb_w5 <- opal.execute(o,'HRS_wb_w5')












```

```{r local wb_w5, echo=F}

vbl <- HRS_wb_w5$R5DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w5)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w5, aes(x=factor(R5DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w5$R5DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w5)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w5, aes(x=factor(R5DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w5}




# Categorical variable harmonization
HRS_ds_wb_w5 <- tibble(id=HRS_wb_w5$id)
HRS_ds_wb_w5$current_oh <- car::recode(HRS_wb_w5$R5DRINK, "NA=999")
HRS_ds_wb_w5$freq_oh <- car::recode(HRS_wb_w5$R5DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript wb_w5, echo=F}

vbl <- HRS_ds_wb_w5$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w5, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w5$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w5, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w5, echo=F, results='asis'}







rm(HRS_wb_w5)

```




### Wave 6

#### Study-specific variable description

| **Name** | `R6DRINK` | `R6DRINKN`|
|-|-|-|
| **Label** | `R6DRINK:W6 R ever drinks any alcohol`| `R6DRINKN:W6 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w6`| `HRS-WB-w6`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w6, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w6','HRS.HRS-WB-w6',variables=list('R6DRINK', 'R6DRINKN'), missings = T)
HRS_wb_w6 <- opal.execute(o,'HRS_wb_w6')












```

```{r local wb_w6, echo=F}

vbl <- HRS_wb_w6$R6DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w6)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w6, aes(x=factor(R6DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w6$R6DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w6)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w6, aes(x=factor(R6DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w6}




# Categorical variable harmonization
HRS_ds_wb_w6 <- tibble(id=HRS_wb_w6$id)
HRS_ds_wb_w6$current_oh <- car::recode(HRS_wb_w6$R6DRINK, "NA=999")
HRS_ds_wb_w6$freq_oh <- car::recode(HRS_wb_w6$R6DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript wb_w6, echo=F}

vbl <- HRS_ds_wb_w6$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w6, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w6$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w6, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w6, echo=F, results='asis'}







rm(HRS_wb_w6)

```




### Wave 7

#### Study-specific variable description

| **Name** | `R7DRINK` | `R7DRINKN`|
|-|-|-|
| **Label** | `R7DRINK:W7 R ever drinks any alcohol`| `R7DRINKN:W7 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w7`| `HRS-WB-w7`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w7, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w7','HRS.HRS-WB-w7',variables=list('R7DRINK', 'R7DRINKN'), missings = T)
HRS_wb_w7 <- opal.execute(o,'HRS_wb_w7')












```

```{r local wb_w7, echo=F}

vbl <- HRS_wb_w7$R7DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w7)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w7, aes(x=factor(R7DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w7$R7DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w7)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w7, aes(x=factor(R7DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w7}




# Categorical variable harmonization
HRS_ds_wb_w7 <- tibble(id=HRS_wb_w7$id)
HRS_ds_wb_w7$current_oh <- car::recode(HRS_wb_w7$R7DRINK, "NA=999")
HRS_ds_wb_w7$freq_oh <- car::recode(HRS_wb_w7$R7DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript wb_w7, echo=F}

vbl <- HRS_ds_wb_w7$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w7, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w7$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w7, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w7, echo=F, results='asis'}







rm(HRS_wb_w7)

```



### Wave 8

#### Study-specific variable description

| **Name** | `R8DRINK` | `R8DRINKN`|
|-|-|-|
| **Label** | `R8DRINK:W8 R ever drinks any alcohol`| `R8DRINKN:W8 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w8`| `HRS-WB-w8`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w8, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w8','HRS.HRS-WB-w8',variables=list('R8DRINK', 'R8DRINKN'), missings = T)
HRS_wb_w8 <- opal.execute(o,'HRS_wb_w8')












```

```{r local wb_w8, echo=F}

vbl <- HRS_wb_w8$R8DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w8)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w8, aes(x=factor(R8DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w8$R8DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w8)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w8, aes(x=factor(R8DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w8}




# Categorical variable harmonization
HRS_ds_wb_w8 <- tibble(id=HRS_wb_w8$id)
HRS_ds_wb_w8$current_oh <- car::recode(HRS_wb_w8$R8DRINK, "NA=999")
HRS_ds_wb_w8$freq_oh <- car::recode(HRS_wb_w8$R8DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript wb_w8, echo=F}

vbl <- HRS_ds_wb_w8$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w8, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w8$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w8, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w8, echo=F, results='asis'}







rm(HRS_wb_w8)

```



### Wave 9

#### Study-specific variable description

| **Name** | `R9DRINK` | `R9DRINKN`|
|-|-|-|
| **Label** | `R9DRINK:W9 R ever drinks any alcohol`| `R9DRINKN:W9 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w9`| `HRS-WB-w9`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w9, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w9','HRS.HRS-WB-w9',variables=list('R9DRINK', 'R9DRINKN'), missings = T)
HRS_wb_w9 <- opal.execute(o,'HRS_wb_w9')












```

```{r local wb_w9, echo=F}

vbl <- HRS_wb_w9$R9DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w9)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w9, aes(x=factor(R9DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w9$R9DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w9)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w9, aes(x=factor(R9DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w9}




# Categorical variable harmonization
HRS_ds_wb_w9 <- tibble(id=HRS_wb_w9$id)
HRS_ds_wb_w9$current_oh <- car::recode(HRS_wb_w9$R9DRINK, "NA=999")
HRS_ds_wb_w9$freq_oh <- car::recode(HRS_wb_w9$R9DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript wb_w9, echo=F}

vbl <- HRS_ds_wb_w9$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w9, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w9$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w9, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w9, echo=F, results='asis'}







rm(HRS_wb_w9)

```




### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w10`| `HRS-WB-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w10','HRS.HRS-WB-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_wb_w10 <- opal.execute(o,'HRS_wb_w10')












```

```{r local wb_w10, echo=F}

vbl <- HRS_wb_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w10}




# Categorical variable harmonization
HRS_ds_wb_w10 <- tibble(id=HRS_wb_w10$id)
HRS_ds_wb_w10$current_oh <- car::recode(HRS_wb_w10$R10DRINK, "NA=999")
HRS_ds_wb_w10$freq_oh <- car::recode(HRS_wb_w10$R10DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript wb_w10, echo=F}

vbl <- HRS_ds_wb_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w10, echo=F, results='asis'}







rm(HRS_wb_w10)

```



### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-WB-w11`| `HRS-WB-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign wb_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_wb_w11','HRS.HRS-WB-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_wb_w11 <- opal.execute(o,'HRS_wb_w11')












```

```{r local wb_w11, echo=F}

vbl <- HRS_wb_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_wb_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_wb_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_wb_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")



```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo wb_w11}




# Categorical variable harmonization
HRS_ds_wb_w11 <- tibble(id=HRS_wb_w11$id)
HRS_ds_wb_w11$current_oh <- car::recode(HRS_wb_w11$R11DRINK, "NA=999")
HRS_ds_wb_w11$freq_oh <- car::recode(HRS_wb_w11$R11DRINKN, "2:hi=2; NA=999")







```


#### Statistics of the new harmonized variable

```{r descript wb_w11, echo=F}

vbl <- HRS_ds_wb_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_wb_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_wb_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation wb_w11, echo=F, results='asis'}







rm(HRS_wb_w11)

```



## EBB


### Wave 7

#### Study-specific variable description

| **Name** | `R7DRINK` | `R7DRINKN`|
|-|-|-|
| **Label** | `R7DRINK:W7 R ever drinks any alcohol`| `R7DRINKN:W7 R # drinks/day when drinks`|
| **Table name**  | `HRS-EBB-w7`| `HRS-EBB-w7`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ebb_w7, echo=F}

opal.assign.table.tibble(o, 'HRS_ebb_w7','HRS.HRS-EBB-w7',variables=list('R7DRINK', 'R7DRINKN'), missings = T)
HRS_ebb_w7 <- opal.execute(o,'HRS_ebb_w7')

```

```{r local ebb_w7, echo=F}

vbl <- HRS_ebb_w7$R7DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w7)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w7, aes(x=factor(R7DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ebb_w7$R7DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w7)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w7, aes(x=factor(R7DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`



To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ebb_w7}

# Categorical variable harmonization
HRS_ds_ebb_w7 <- tibble(id=HRS_ebb_w7$id)
HRS_ds_ebb_w7$current_oh <- car::recode(HRS_ebb_w7$R7DRINK, "NA=999")
HRS_ds_ebb_w7$freq_oh <- car::recode(HRS_ebb_w7$R7DRINKN, "2:hi=2; NA=999")

```


#### Statistics of the new harmonized variable

```{r descript ebb_w7, echo=F}

vbl <- HRS_ds_ebb_w7$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w7, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ebb_w7$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w7, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation ebb_w7, echo=F}






rm(HRS_ebb_w7)

```



### Wave 8

#### Study-specific variable description

| **Name** | `R8DRINK` | `R8DRINKN`|
|-|-|-|
| **Label** | `R8DRINK:W8 R ever drinks any alcohol`| `R8DRINKN:W8 R # drinks/day when drinks`|
| **Table name**  | `HRS-EBB-w8`| `HRS-EBB-w8`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ebb_w8, echo=F}

opal.assign.table.tibble(o, 'HRS_ebb_w8','HRS.HRS-EBB-w8',variables=list('R8DRINK', 'R8DRINKN'), missings = T)
HRS_ebb_w8 <- opal.execute(o,'HRS_ebb_w8')












```

```{r local ebb_w8, echo=F}

vbl <- HRS_ebb_w8$R8DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w8)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w8, aes(x=factor(R8DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ebb_w8$R8DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w8)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w8, aes(x=factor(R8DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ebb_w8}




# Categorical variable harmonization
HRS_ds_ebb_w8 <- tibble(id=HRS_ebb_w8$id)
HRS_ds_ebb_w8$current_oh <- car::recode(HRS_ebb_w8$R8DRINK, "NA=999")
HRS_ds_ebb_w8$freq_oh <- car::recode(HRS_ebb_w8$R8DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ebb_w8, echo=F}

vbl <- HRS_ds_ebb_w8$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w8, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ebb_w8$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w8, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ebb_w8, echo=F, results='asis'}







rm(HRS_ebb_w8)

```




### Wave 9

#### Study-specific variable description

| **Name** | `R9DRINK` | `R9DRINKN`|
|-|-|-|
| **Label** | `R9DRINK:W9 R ever drinks any alcohol`| `R9DRINKN:W9 R # drinks/day when drinks`|
| **Table name**  | `HRS-EBB-w9`| `HRS-EBB-w9`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ebb_w9, echo=F}

opal.assign.table.tibble(o, 'HRS_ebb_w9','HRS.HRS-EBB-w9',variables=list('R9DRINK', 'R9DRINKN'), missings = T)
HRS_ebb_w9 <- opal.execute(o,'HRS_ebb_w9')












```

```{r local ebb_w9, echo=F}

vbl <- HRS_ebb_w9$R9DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w9)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w9, aes(x=factor(R9DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ebb_w9$R9DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w9)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w9, aes(x=factor(R9DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ebb_w9}




# Categorical variable harmonization
HRS_ds_ebb_w9 <- tibble(id=HRS_ebb_w9$id)
HRS_ds_ebb_w9$current_oh <- car::recode(HRS_ebb_w9$R9DRINK, "NA=999")
HRS_ds_ebb_w9$freq_oh <- car::recode(HRS_ebb_w9$R9DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ebb_w9, echo=F}

vbl <- HRS_ds_ebb_w9$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w9, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ebb_w9$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w9, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ebb_w9, echo=F, results='asis'}







rm(HRS_ebb_w9)

```




### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-EBB-w10`| `HRS-EBB-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ebb_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_ebb_w10','HRS.HRS-EBB-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_ebb_w10 <- opal.execute(o,'HRS_ebb_w10')












```

```{r local ebb_w10, echo=F}

vbl <- HRS_ebb_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ebb_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ebb_w10}




# Categorical variable harmonization
HRS_ds_ebb_w10 <- tibble(id=HRS_ebb_w10$id)
HRS_ds_ebb_w10$current_oh <- car::recode(HRS_ebb_w10$R10DRINK, "NA=999")
HRS_ds_ebb_w10$freq_oh <- car::recode(HRS_ebb_w10$R10DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ebb_w10, echo=F}

vbl <- HRS_ds_ebb_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ebb_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ebb_w10, echo=F, results='asis'}







rm(HRS_ebb_w10)

```



### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-EBB-w11`| `HRS-EBB-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign ebb_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_ebb_w11','HRS.HRS-EBB-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_ebb_w11 <- opal.execute(o,'HRS_ebb_w11')












```

```{r local ebb_w11, echo=F}

vbl <- HRS_ebb_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_ebb_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_ebb_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_ebb_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`








To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo ebb_w11}




# Categorical variable harmonization
HRS_ds_ebb_w11 <- tibble(id=HRS_ebb_w11$id)
HRS_ds_ebb_w11$current_oh <- car::recode(HRS_ebb_w11$R11DRINK, "NA=999")
HRS_ds_ebb_w11$freq_oh <- car::recode(HRS_ebb_w11$R11DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript ebb_w11, echo=F}

vbl <- HRS_ds_ebb_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_ebb_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_ebb_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation ebb_w11, echo=F, results='asis'}







rm(HRS_ebb_w11)

```



## MBB


### Wave 10

#### Study-specific variable description

| **Name** | `R10DRINK` | `R10DRINKN`|
|-|-|-|
| **Label** | `R10DRINK:W10 R ever drinks any alcohol`| `R10DRINKN:W10 R # drinks/day when drinks`|
| **Table name**  | `HRS-MBB-w10`| `HRS-MBB-w10`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign mbb_w10, echo=F}

opal.assign.table.tibble(o, 'HRS_mbb_w10','HRS.HRS-MBB-w10',variables=list('R10DRINK', 'R10DRINKN'), missings = T)
HRS_mbb_w10 <- opal.execute(o,'HRS_mbb_w10')

```

```{r local mbb_w10, echo=F}

vbl <- HRS_mbb_w10$R10DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_mbb_w10)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w10, aes(x=factor(R10DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_mbb_w10$R10DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_mbb_w10)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w10, aes(x=factor(R10DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")

```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 1 into 1`
* `keep up 0 into 0`
* `NA into 999`



To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo mbb_w10}

# Categorical variable harmonization
HRS_ds_mbb_w10 <- tibble(id=HRS_mbb_w10$id)
HRS_ds_mbb_w10$current_oh <- car::recode(HRS_mbb_w10$R10DRINK, "NA=999")
HRS_ds_mbb_w10$freq_oh <- car::recode(HRS_mbb_w10$R10DRINKN, "2:hi=2; NA=999")

```


#### Statistics of the new harmonized variable

```{r descript mbb_w10, echo=F}

vbl <- HRS_ds_mbb_w10$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w10, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_mbb_w10$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w10, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")

```


#### Validation

```{r crosstabulation mbb_w10, echo=F}






rm(HRS_mbb_w10)

```



### Wave 11

#### Study-specific variable description

| **Name** | `R11DRINK` | `R11DRINKN`|
|-|-|-|
| **Label** | `R11DRINK:W11 R ever drinks any alcohol`| `R11DRINKN:W11 R # drinks/day when drinks`|
| **Table name**  | `HRS-MBB-w11`| `HRS-MBB-w11`|
| **Categories** | `0 = no`<br/>`1 = yes` |`0 = doesnt drink`<br/>`99 = drinks all day`<br/>`continuous`|
| **Missings** |`NA`|`NA`|
| **Description** |  |  |

```{r assign mbb_w11, echo=F}

opal.assign.table.tibble(o, 'HRS_mbb_w11','HRS.HRS-MBB-w11',variables=list('R11DRINK', 'R11DRINKN'), missings = T)
HRS_mbb_w11 <- opal.execute(o,'HRS_mbb_w11')












```

```{r local mbb_w11, echo=F}

vbl <- HRS_mbb_w11$R11DRINKN
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_mbb_w11)[3])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w11, aes(x=factor(R11DRINKN))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


vbl <- HRS_mbb_w11$R11DRINK
kable(Categorical_summary(vbl, missing_values = NA)[2], caption = names(HRS_mbb_w11)[2])
kable(Categorical_summary(vbl, missing_values = NA)[1], caption = "Category")
ggplot(HRS_mbb_w11, aes(x=factor(R11DRINK))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(label(vbl)) + ylab("Frequency")


```


#### Harmonisation algorithm

To compute `current_oh` from the study-specific variable `RWDRINK` it has to be recoded as follows:

* `keep up 0 into 0`
* `keep up 1 into 1`
* `otherwise into 999`







To compute `freq_oh` from the study-specific variable `RWDRINKN` it has to be recoded as follows:

* `0 into 0`
* `1 into 1`
* `RWDRINKN > 1 into 2`
* `NA into 999`

**R script:**

```{r harmo mbb_w11}




# Categorical variable harmonization
HRS_ds_mbb_w11 <- tibble(id=HRS_mbb_w11$id)
HRS_ds_mbb_w11$current_oh <- car::recode(HRS_mbb_w11$R11DRINK, "NA=999")
HRS_ds_mbb_w11$freq_oh <- car::recode(HRS_mbb_w11$R11DRINKN, "2:hi=2; NA=999")






```


#### Statistics of the new harmonized variable

```{r descript mbb_w11, echo=F}

vbl <- HRS_ds_mbb_w11$freq_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_freq)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w11, aes(x=factor(freq_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_freq) + ylab("Frequency")

vbl <- HRS_ds_mbb_w11$current_oh
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[3], caption = ds_label_curr)
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[1], caption = "Category")
kable(Categorical_summary(vbl, missing_values = miss_values_vector)[2], caption = "Type of missing")
ggplot(HRS_ds_mbb_w11, aes(x=factor(current_oh))) + geom_bar(stat="count", width=0.4, fill="steelblue") + xlab(ds_label_curr) + ylab("Frequency")







```


#### Validation

```{r crosstabulation mbb_w11, echo=F, results='asis'}







rm(HRS_mbb_w11)

```



```{r final, echo=F}

l.hrs <- list(hrs_w1 = HRS_ds_hrs_w1, hrs_w2 = HRS_ds_hrs_w2, hrs_w3 = HRS_ds_hrs_w3, hrs_w4 = HRS_ds_hrs_w4, hrs_w5 = HRS_ds_hrs_w5, hrs_w6 = HRS_ds_hrs_w6, hrs_w7 = HRS_ds_hrs_w7, hrs_w8 = HRS_ds_hrs_w8, hrs_w9 = HRS_ds_hrs_w9, hrs_w10 = HRS_ds_hrs_w10, hrs_w11 = HRS_ds_hrs_w11, ahead_w2 = HRS_ds_ahead_w2, ahead_w3 = HRS_ds_ahead_w3, ahead_w4 = HRS_ds_ahead_w4, ahead_w5 = HRS_ds_ahead_w5, ahead_w6 = HRS_ds_ahead_w6, ahead_w7 = HRS_ds_ahead_w7, ahead_w8 = HRS_ds_ahead_w8, ahead_w9 = HRS_ds_ahead_w9, ahead_w10 = HRS_ds_ahead_w10, ahead_w11 = HRS_ds_ahead_w11, coda_w4 = HRS_ds_coda_w4, coda_w5 = HRS_ds_coda_w5, coda_w6 = HRS_ds_coda_w6, coda_w7 = HRS_ds_coda_w7, coda_w8 = HRS_ds_coda_w8, coda_w9 = HRS_ds_coda_w9, coda_w10 = HRS_ds_coda_w10, coda_w11 = HRS_ds_coda_w11, wb_w4 = HRS_ds_wb_w4, wb_w5 = HRS_ds_wb_w5, wb_w6 = HRS_ds_wb_w6, wb_w7 = HRS_ds_wb_w7, wb_w8 = HRS_ds_wb_w8, wb_w9 = HRS_ds_wb_w9, wb_w10 = HRS_ds_wb_w10, wb_w11 = HRS_ds_wb_w11, ebb_w7 = HRS_ds_ebb_w7, ebb_w8 = HRS_ds_ebb_w8, ebb_w9 = HRS_ds_ebb_w9, ebb_w10 = HRS_ds_ebb_w10, ebb_w11 = HRS_ds_ebb_w11, mbb_w10 = HRS_ds_mbb_w10, mbb_w11 = HRS_ds_mbb_w11)

for(name in names(l.hrs)) {
  m_name <- paste0("HRS_m_ds_",name)
  aux_object <- l.hrs[[name]]
  label(l.hrs[[name]][[2]]) <- label(aux_object[[2]]) <- ds_label_curr # Text value assigned at the DS description, at the top
  l.hrs[[name]][[2]] <- labelled(l.hrs[[name]][[2]], labels = cat_label)
  label(l.hrs[[name]][[3]]) <- label(aux_object[[3]]) <- ds_label_freq # Text value assigned at the DS description, at the top
  l.hrs[[name]][[3]] <- labelled(l.hrs[[name]][[3]], labels = freq_label)
  aux_object[[2]] <- car::recode(aux_object[[2]], "miss_values_vector=NA")
  aux_object[[2]] <- labelled(aux_object[[2]], labels = cat_label[1:2])
  aux_object[[3]] <- car::recode(aux_object[[3]], "miss_values_vector=NA")
  aux_object[[3]] <- labelled(aux_object[[3]], labels = freq_label[1:3])
  assign(m_name, aux_object)
  rm(aux_object)
}

```




## Summary of descriptive statistics of the harmonised variable `current_oh` accross populations and waves

Two tables are generated: 

1. Percentages of categories in each harmonised variable.

2. Frequencies and percentages of individuals with different trajectories. To avoid too large table, Only trajectories with percentages larger than 0.3 are shown.


**R script:**

```{r summ current}

# Table HRS
l.hds <- l.hrs[grep("hrs_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])



# Table AHEAD
l.hds <- l.hrs[grep("ahead_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])



# Table CODA
l.hds <- l.hrs[grep("coda_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table WB
l.hds <- l.hrs[grep("wb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table EBB
l.hds <- l.hrs[grep("ebb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table MBB
l.hds <- l.hrs[grep("mbb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][2])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][2])[[1]][,4] 
}
t.hds[13,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","current_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","current_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

```




## Summary of descriptive statistics of the harmonised variable `freq_oh` accross populations and waves

Two tables are generated: 

1. Percentages of categories in each harmonised variable.

2. Frequencies and percentages of individuals with different trajectories. To avoid too large table, Only trajectories with percentages larger than 0.3 are shown.


**R script:**

```{r summ freq}

# Table HRS
l.hds <- l.hrs[grep("hrs_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])



# Table AHEAD
l.hds <- l.hrs[grep("ahead_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])



# Table CODA
l.hds <- l.hrs[grep("coda_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table WB
l.hds <- l.hrs[grep("wb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table EBB
l.hds <- l.hrs[grep("ebb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])


# Table MBB
l.hds <- l.hrs[grep("mbb_w",names(l.hrs))]
t.hds <- frq(l.hds[[1]][3])[[1]][,c(1,2)] 
for (i in seq_along(l.hds)){
  t.hds[2+i] <- frq(l.hds[[i]][3])[[1]][,4] 
}
t.hds[14,] <- c("n", "sample size", sapply(l.hds,function(wave) length(wave[[1]]))
             )
names(t.hds)<-c("val", "label",substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))
kable(t.hds)

dbb <- get(paste0("HRS_m_ds_",names(l.hds)[1]))[,c("id","freq_oh")]
for(ind in 2:length(l.hds)){
  dbb <- merge(dbb, get(paste0("HRS_m_ds_",names(l.hds)[ind]))[,c("id","freq_oh")], by = "id", suffixes = c("", paste0(".",names(l.hds)[ind])), all = T)
}
names(dbb) <- c("id", substr(names(l.hds),regexpr("_w[0-9]",names(l.hds))+1,nchar(names(l.hds))))

v.dbb <- dbb[,2]
for(ind in 2:length(l.hds)){
  v.dbb <- paste(v.dbb,dbb[,ind+1],sep="")
}
f.dbb <- frq(v.dbb)[[1]][,c(1,2,4)]
kable(f.dbb[f.dbb[,3]>=0.3,])

```






# Quality estimation

* There is no information to harmonize past drinking.
* The variable `RwDRINKR`, codifying the question `R range of # drinks/day`, is present only at waves 1 and 2. After the wave 3, there are 2 different questions asking on drinking frequency: the one we choose to harmonize, `RwDRINKN`, which asks for `# drinks/day when drinks`, and `RwDRINKD` asking for `R # days/week drinks`.

<!-- ########################################################## --> 
<!-- # Save -->
```{r save, include=FALSE, echo=F}


for(name in names(l.hrs)){
  alcohol <- l.hrs[[name]]
  save(alcohol, file = paste0(datafolder,name,"/alcohol.RData"))
}


```
<!-- ########################################################## --> 






<!-- ########################################################## -->
<!--- # Close OPAL R Session -->
```{r closeRsession, echo=FALSE}
opal.logout(o)
```





